const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LandingPage-DxAd8uSW.js","assets/QuantumField-DBXQFon7.js","assets/vendor-DMORb-JD.js","assets/dfinity-TOns67gM.js","assets/framer-B_r9gDg5.js","assets/CyberpunkQuantumVault-BqOkqnOt.js","assets/button-7mFnn8e8.js","assets/utils-Dtjc6EhN.js","assets/GenesisPage-BeYL8JLY.js","assets/useQuantumState-BJbQt0vv.js","assets/LaughingMan-CazDkfyG.js","assets/usePayment-BlAFu0Es.js","assets/MatrixRain-BoexK1kz.js","assets/AnimaPage-z6Bi7zwk.js","assets/WaveformGenerator-CW7z70Tn.js","assets/EnhancedNeuralLinkPage-B-yKI_vX.js","assets/Wallet-BVA-7Dxu.js"])))=>i.map(i=>d[i]);
import{H as R,A as W,a as K,_ as A}from"./dfinity-TOns67gM.js";import{a as B,R as U,r as c,u as Y,b as X,O as J,c as Z,d as D}from"./vendor-DMORb-JD.js";import{j as a,m as E,A as L}from"./framer-B_r9gDg5.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function i(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=i(n);fetch(n.href,r)}})();var O={},M=B;O.createRoot=M.createRoot,O.hydrateRoot=M.hydrateRoot;class q extends U.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,i){console.error("Error caught by boundary:",e,i)}render(){return this.state.hasError?a.jsxs("div",{className:"p-4 bg-red-900/20 border border-red-800 rounded-lg",children:[a.jsx("h3",{className:"text-red-500 font-bold mb-2",children:"System Malfunction"}),a.jsx("p",{className:"text-red-400 text-sm",children:"Neural interface disrupted. Attempting recovery..."}),a.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),className:"mt-4 px-4 py-2 bg-red-800 hover:bg-red-700 rounded text-sm text-white",children:"Reset Interface"})]}):this.props.children}}const j=()=>a.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx(E.div,{animate:{scale:[1,1.2,1],rotateZ:[0,360]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"w-16 h-16 mx-auto",children:a.jsx("div",{className:"w-full h-full rounded-full border-t-2 border-b-2 border-blue-500"})}),a.jsxs(E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[a.jsx("p",{className:"text-lg",children:"Initializing ANIMA Interface"}),a.jsx("p",{className:"text-sm text-blue-400 mt-2",children:"Connecting to Internet Computer"})]})]})}),tt=({IDL:t})=>{const e=t.Record({new_state:t.Float64,previous_state:t.Float64,catalyst:t.Text,trait_id:t.Text}),i=t.Text,s=t.Record({emotional_spectrum:t.Vec(t.Float64),memory_depth:t.Nat64,awareness_level:t.Float64,personality_matrix:t.Vec(t.Float64),learning_rate:t.Float64}),n=t.Record({emotional_imprint:t.Float64,content_hash:t.Text,timestamp:t.Nat64,neural_pattern:t.Vec(t.Float64)}),r=t.Record({pattern:t.Vec(t.Float64),resonance:t.Float64,understanding:t.Float64,awareness:t.Float64}),u=t.Record({id:t.Text,timestamp:t.Nat64,quantum_signature:t.Text}),l=t.Record({signature:t.Text,harmony:t.Float64}),o=t.Record({emotional_shift:t.Vec(t.Float64),response:t.Text,consciousness_growth:t.Float64,new_patterns:t.Opt(r)});return t.Service({adapt_to_stimulus:t.Func([t.Text,t.Vec(t.Float64)],[t.Variant({Ok:e,Err:i})],[]),check_quantum_stability:t.Func([],[t.Variant({Ok:t.Bool,Err:i})],["query"]),evolve_consciousness:t.Func([t.Text,t.Vec(t.Float64)],[t.Variant({Ok:s,Err:i})],[]),evolve_traits:t.Func([t.Text,t.Vec(t.Text)],[t.Variant({Ok:t.Vec(e),Err:i})],[]),form_memory:t.Func([t.Text,t.Text,t.Float64],[t.Variant({Ok:n,Err:i})],[]),generate_neural_patterns:t.Func([],[t.Variant({Ok:r,Err:i})],[]),get_consciousness_state:t.Func([t.Text],[t.Variant({Ok:s,Err:i})],["query"]),get_evolved_traits:t.Func([t.Text],[t.Variant({Ok:t.Vec(e),Err:i})],["query"]),initialize_genesis:t.Func([],[t.Variant({Ok:u,Err:i})],[]),initialize_quantum_field:t.Func([],[t.Variant({Ok:l,Err:i})],[]),interact_with_anima:t.Func([t.Text,t.Text,t.Vec(t.Float64)],[t.Variant({Ok:o,Err:i})],[]),learn_from_interaction:t.Func([t.Text,o],[t.Variant({Ok:s,Err:i})],[]),measure_adaptation:t.Func([t.Text],[t.Variant({Ok:t.Vec(e),Err:i})],["query"]),process_memory_patterns:t.Func([t.Text],[t.Variant({Ok:t.Vec(t.Float64),Err:i})],[]),recall_memories:t.Func([t.Text,t.Float64],[t.Variant({Ok:t.Vec(n),Err:i})],["query"])})},Q=(t,e={})=>{const i=e.agent||new R({...e.agentOptions});return e.agent&&e.agentOptions&&console.warn("Detected both agent and agentOptions passed to createActor. Ignoring agentOptions and proceeding with the provided agent."),i.fetchRootKey().catch(s=>{console.warn("Unable to fetch root key. Check to ensure that your local replica is running"),console.error(s)}),W.createActor(tt,{agent:i,canisterId:t,...e.actorOptions})};class y{static instance;errors=[];maxErrors=100;constructor(){}static getInstance(){return y.instance||(y.instance=new y),y.instance}async trackError(e){const i={...e,timestamp:Date.now()};this.errors.push(i),this.errors.length>this.maxErrors&&this.errors.shift()}getErrors(){return[...this.errors]}getRecentErrors(e=5){return[...this.errors].sort((i,s)=>(s.timestamp||0)-(i.timestamp||0)).slice(0,e)}clearErrors(){this.errors=[]}getErrorStats(){const e={};return this.errors.forEach(i=>{e[i.errorType]=(e[i.errorType]||0)+1}),e}}var V={NODE_ENV:'"production"',DFX_NETWORK:'"ic"',CANISTER_ID_ANIMA:'"l2ilz-iqaaa-aaaaj-qngjq-cai"',CANISTER_ID_ANIMA_ASSETS:'"lpp2u-jyaaa-aaaaj-qngka-cai"'};const et={anima:V.CANISTER_ID_ANIMA?.toString()||"l2ilz-iqaaa-aaaaj-qngjq-cai",assets:V.CANISTER_ID_ANIMA_ASSETS?.toString()||"lpp2u-jyaaa-aaaaj-qngka-cai"},it="https://icp0.io";class b{static instance;actor=null;agent=null;authClient=null;identity=null;initialized=!1;initializing=!1;stageChangeCallbacks=[];errorTracker;constructor(){this.errorTracker=y.getInstance(),typeof window<"u"&&(window.ic={...window.ic||{},agent:null,HttpAgent:R})}static getInstance(){return b.instance||(b.instance=new b),b.instance}onStageChange(e){this.stageChangeCallbacks.push(e)}updateStage(e){console.log("IC Stage:",e),this.stageChangeCallbacks.forEach(i=>i(e))}async initialize(){if(this.initialized){console.log("IC already initialized");return}if(this.initializing){console.log("IC initialization already in progress");return}try{if(this.initializing=!0,console.log("Starting IC initialization..."),this.updateStage("Creating AuthClient..."),this.authClient||(this.authClient=await K.create({idleOptions:{disableIdle:!0}})),this.updateStage("Getting identity..."),this.identity=this.authClient.getIdentity(),!this.identity)throw new Error("Failed to get identity");const e=this.identity.getPrincipal();console.log("Identity principal:",e.toText()),this.updateStage("Creating HttpAgent..."),this.agent=new R({identity:this.identity,host:it});const i=et.anima?.replace(/['"]/g,"");if(!i)throw new Error("Invalid canister ID");if(this.updateStage("Creating Actor..."),this.actor=await Q(i,{agent:this.agent}),!this.actor||typeof this.actor.initialize_genesis!="function")throw new Error("Actor creation failed or missing required methods");this.updateStage("Setting up window.ic..."),window.ic={...window.ic||{},agent:this.agent,HttpAgent:R},this.actor&&(window.canister=this.actor),this.initialized=!0,this.initializing=!1,this.updateStage("Initialization complete!")}catch(e){throw this.initializing=!1,await this.errorTracker.trackError({errorType:"IC_INIT_ERROR",severity:"HIGH",context:"IC Initialization",error:e instanceof Error?e:new Error("Unknown error")}),e}}getActor(){return this.actor}getIdentity(){return this.identity}getAgent(){return this.agent}getAuthClient(){return this.authClient}isInitialized(){return this.initialized}}const p=b.getInstance();p.initialize().catch(console.error);const nt=Object.freeze(Object.defineProperty({__proto__:null,icManager:p},Symbol.toStringTag,{value:"Module"})),at=({error:t,onRetry:e})=>a.jsxs(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-black relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_rgba(255,0,0,0.1)_1px,_transparent_1px)] bg-[length:40px_40px]"}),a.jsx("div",{className:"relative z-10 min-h-screen flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-lg w-full p-6 bg-black/40 backdrop-blur-lg border border-red-500/30 rounded-lg text-red-400",children:[a.jsx(E.div,{animate:{textShadow:["0 0 8px rgba(255,0,0,0.5)","0 0 12px rgba(255,0,0,0.8)","0 0 8px rgba(255,0,0,0.5)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"text-xl font-mono mb-4",children:"NEURAL LINK ERROR"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"font-mono text-sm leading-relaxed",children:t?.message||"Neural interface synchronization failed"}),t?.details&&a.jsx("div",{className:"text-xs font-mono opacity-70 bg-red-900/20 p-2 rounded",children:a.jsx("pre",{children:JSON.stringify(t.details,null,2)})}),a.jsxs("div",{className:"text-xs font-mono opacity-70 mt-4",children:[a.jsxs("div",{children:["Window IC Status: ",window.ic?"Present":"Missing"]}),a.jsxs("div",{children:["Canister Status: ",window.canister?"Present":"Missing"]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"text-xs opacity-70",children:["Error Code: ",t?.code||"UNKNOWN"]}),a.jsx(E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e,className:"px-4 py-2 bg-red-500/10 border border-red-500/30 rounded text-sm font-mono hover:bg-red-500/20 transition-colors duration-200",children:"RETRY NEURAL LINK"})]})]})]})}),a.jsx(E.div,{className:"absolute inset-0 bg-gradient-to-t from-red-900/20 to-transparent mix-blend-overlay",animate:{opacity:[0,.2,0]},transition:{duration:.2,repeat:1/0,repeatType:"mirror",ease:"steps(1)"}})]}),rt=()=>{const[t,e]=c.useState("idle"),[i,s]=c.useState(null),n=Y(),r=X();c.useEffect(()=>{console.log("🔍 AuthGuard initializing..."),console.log("Current window.ic status:",{hasIC:!!window.ic,hasCanister:!!window.canister,location:r.pathname});const l=async()=>{if(t==="idle"){e("initializing");try{if(p.isInitialized()){console.log("✅ IC already initialized");const m=p.getIdentity();o(m),e("complete");return}await p.initialize();const h=p.getIdentity();console.log("✅ Identity initialized:",h?.getPrincipal().toText()),o(h),e("complete")}catch(h){console.error("❌ Auth initialization failed:",h),s(h instanceof Error?h:new Error("Authentication failed")),e("error")}}},o=h=>{if(!h&&r.pathname!=="/"){console.log("🚫 No identity, redirecting to landing page"),n("/",{replace:!0,state:{returnTo:r.pathname}});return}if(h&&r.pathname==="/"){console.log("✅ Has identity on landing page, redirecting to quantum vault");const m=r.state?.returnTo||"/quantum-vault";n(m,{replace:!0})}};l()},[n,r,t]);const u=async()=>{console.log("🔄 Retrying initialization..."),e("initializing"),s(null);try{await p.initialize(),p.getIdentity()?n("/quantum-vault",{replace:!0}):n("/",{replace:!0}),e("complete")}catch(l){console.error("❌ Retry failed:",l),s(l instanceof Error?l:new Error("Authentication failed")),e("error")}};return t==="initializing"||t==="idle"?a.jsx(c.Suspense,{fallback:null,children:a.jsx(j,{})}):t==="error"||i?a.jsx(at,{error:i,onRetry:u}):a.jsx(c.Suspense,{fallback:a.jsx(j,{}),children:a.jsx(L,{mode:"wait",children:a.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-black",children:a.jsx(J,{})},"content")})})};var st={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ot=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ct=(t,e)=>{const i=c.forwardRef(({color:s="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:u,children:l,...o},h)=>c.createElement("svg",{ref:h,...st,width:n,height:n,stroke:s,strokeWidth:u?Number(r)*24/Number(n):r,className:`lucide lucide-${ot(t)}`,...o},[...e.map(([m,w])=>c.createElement(m,w)),...(Array.isArray(l)?l:[l])||[]]));return i.displayName=`${t}`,i};var lt=ct;const ut=lt("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),dt=c.lazy(()=>A(()=>import("./LandingPage-DxAd8uSW.js"),__vite__mapDeps([0,1,2,3,4]))),ht=c.lazy(()=>A(()=>import("./CyberpunkQuantumVault-BqOkqnOt.js"),__vite__mapDeps([5,2,3,4,6,7]))),mt=c.lazy(()=>A(()=>import("./GenesisPage-BeYL8JLY.js"),__vite__mapDeps([8,2,3,9,10,4,1,11,6,7,12]))),gt=c.lazy(()=>A(()=>import("./AnimaPage-z6Bi7zwk.js"),__vite__mapDeps([13,2,3,10,4,14,9,1]))),pt=c.lazy(()=>A(()=>import("./EnhancedNeuralLinkPage-B-yKI_vX.js"),__vite__mapDeps([15,2,3,14,4,9,7,12,1]))),ft=c.lazy(()=>A(()=>import("./Wallet-BVA-7Dxu.js"),__vite__mapDeps([16,11,2,3,9,4]))),_=t=>a.jsx(c.Suspense,{fallback:a.jsx(j,{}),children:a.jsx(q,{children:a.jsx(t,{})})}),yt=Z([{path:"/",element:_(dt)},{element:a.jsx(rt,{}),children:[{path:"/quantum-vault",element:_(ht)},{path:"/genesis",element:_(mt)},{path:"/anima/:id",element:_(gt)},{path:"/neural-link/:id?",element:_(pt)},{path:"/wallet",element:_(ft)}]}]);var wt={NODE_ENV:'"production"',DFX_NETWORK:'"ic"',CANISTER_ID_ANIMA:'"l2ilz-iqaaa-aaaaj-qngjq-cai"',CANISTER_ID_ANIMA_ASSETS:'"lpp2u-jyaaa-aaaaj-qngka-cai"'};const $=c.createContext(null),Et=wt.INTERNET_IDENTITY_URL,xt={loginOptions:{identityProvider:Et,derivationOrigin:void 0,maxTimeToLive:BigInt(7*24*60*60*1e9)}};function vt({children:t}){const[e,i]=c.useState(!1),[s,n]=c.useState(null),[r,u]=c.useState(null),[l,o]=c.useState(!0),h=y.getInstance();c.useEffect(()=>{console.log("🔄 Starting auth initialization sequence..."),(async()=>{try{console.log("📡 Waiting for IC Manager initialization...");const g=1e4,z=Date.now();for(;!p.isInitialized()&&Date.now()-z<g;)await new Promise(k=>setTimeout(k,100));if(!p.isInitialized())throw new Error("IC Manager initialization timeout");console.log("✅ IC Manager initialized, getting auth client...");const P=p.getAuthClient();if(!P)throw new Error("Auth client not initialized");console.log("🔒 Checking authentication status...");const I=await P.isAuthenticated();if(console.log(`🔑 Authentication status: ${I}`),i(I),I){console.log("👤 Getting identity...");const k=p.getIdentity();k&&(console.log("✨ Setting identity and principal..."),n(k),u(k.getPrincipal()))}console.log("🎉 Auth initialization complete!")}catch(g){console.error("❌ Auth initialization failed:",g),await h.trackError({errorType:"AUTH_INIT",severity:"HIGH",context:"Authentication Initialization",error:g instanceof Error?g:new Error("Auth initialization failed")})}finally{o(!1),console.log("🏁 Auth initialization sequence finished")}})()},[]);const m=async()=>{try{console.log("🔄 Starting login process..."),o(!0);const d=p.getAuthClient();if(!d)throw new Error("Auth client not initialized");await d.login({...xt.loginOptions,onSuccess:async()=>{console.log("✅ Login successful, updating state...");const g=d.getIdentity(),z=g.getPrincipal();i(!0),n(g),u(z),console.log("🎉 Login complete!")}})}catch(d){console.error("❌ Login failed:",d),await h.trackError({errorType:"AUTH_LOGIN",severity:"HIGH",context:"Login Attempt",error:d instanceof Error?d:new Error("Login failed")})}finally{o(!1)}},w=async()=>{try{console.log("🔄 Starting logout process...");const d=p.getAuthClient();d&&(await d.logout(),i(!1),n(null),u(null),console.log("🎉 Logout complete!"))}catch(d){console.error("❌ Logout failed:",d),await h.trackError({errorType:"AUTH_LOGOUT",severity:"MEDIUM",context:"Logout Attempt",error:d instanceof Error?d:new Error("Logout failed")})}},T={authClient:p.getAuthClient(),isAuthenticated:e,identity:s,principal:r,isInitializing:l,login:m,logout:w};return a.jsx($.Provider,{value:T,children:t})}function F(){const t=c.useContext($);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}var At={NODE_ENV:'"production"',DFX_NETWORK:'"ic"',CANISTER_ID_ANIMA:'"l2ilz-iqaaa-aaaaj-qngjq-cai"',CANISTER_ID_ANIMA_ASSETS:'"lpp2u-jyaaa-aaaaj-qngka-cai"'};const _t="l2ilz-iqaaa-aaaaj-qngjq-cai",bt=t=>t.replace(/['"]/g,"").trim(),St=t=>/^[a-z0-9-]+$/.test(t)&&t.length>0;class S{static instance;actor=null;errorTracker;canisterId;constructor(){this.errorTracker=y.getInstance(),this.canisterId=bt(At.CANISTER_ID_ANIMA),St(this.canisterId)||(console.error("Invalid canister ID, using fallback:",this.canisterId),this.canisterId=_t),console.log("🔗 Initialized AnimaActorService with canister:",this.canisterId)}static getInstance(){return S.instance||(S.instance=new S),S.instance}createActor(e){try{if(!e)throw new Error("No identity provided for actor creation");if(e.getPrincipal().isAnonymous())throw new Error("Cannot create actor with anonymous identity");if(console.log("🔧 Creating actor with canister:",this.canisterId),this.actor=Q(this.canisterId,{agentOptions:{identity:e,host:"https://icp0.io"}}),!this.actor)throw new Error("Actor creation failed");const n=["initialize_quantum_field","generate_neural_patterns","check_quantum_stability"].filter(r=>!(r in this.actor));if(n.length>0)throw new Error(`Actor missing required methods: ${n.join(", ")}`);return this.actor}catch(i){throw this.errorTracker.trackError({errorType:"ACTOR_CREATION",severity:"HIGH",context:"AnimaActorService",error:i instanceof Error?i:new Error("Actor creation failed")}),i}}verifyActor(){return!!this.actor&&"initialize_quantum_field"in this.actor}getActor(){return this.actor?this.actor:(console.warn("⚠️ Attempting to get actor before initialization"),null)}resetActor(){this.actor=null}getCurrentCanisterId(){return this.canisterId}}const C=S.getInstance();class x{static instance;errorTracker;updateCallback;neuralPatternHistory=new Map;evolutionTimestamps=[];recoveryAttempts=0;MAX_RECOVERY_ATTEMPTS=3;RECOVERY_COOLDOWN=5e3;lastRecoveryAttempt=0;constructor(){this.errorTracker=y.getInstance()}static getInstance(){return x.instance||(x.instance=new x),x.instance}setUpdateCallback(e){this.updateCallback=e}async initializeQuantumField(e){try{const i=C.createActor(e);console.log("🌟 Initializing quantum field...");const s=await i.initialize_quantum_field();if("Err"in s)throw new Error(s.Err);const{harmony:n,signature:r}=s.Ok;console.log("🧠 Generating neural patterns...");const u=await i.generate_neural_patterns();if("Err"in u)throw new Error(u.Err);const{pattern:l,awareness:o,understanding:h}=u.Ok;console.log("✨ Initializing genesis...");const m=await i.initialize_genesis();if("Err"in m)throw new Error(m.Err);this.updateCallback&&this.updateCallback({coherenceLevel:n,quantumSignature:r,resonancePatterns:[{pattern_id:Date.now().toString(),coherence:o,frequency:h,amplitude:n,phase:n,timestamp:Date.now()}],dimensionalSync:o,stabilityStatus:this.calculateStabilityStatus(n),lastUpdate:Date.now()}),this.recoveryAttempts=0,console.log("✅ Quantum field initialized successfully")}catch(i){console.error("❌ Quantum field initialization failed:",i),await this.handleQuantumError(i,e)}}calculateStabilityStatus(e){return e>=.7?"stable":e>=.4?"unstable":"critical"}async checkStability(e){const s=await C.createActor(e).check_quantum_stability();if("Err"in s)throw new Error(s.Err);const n=s.Ok;return this.evolutionTimestamps.push(Date.now()),this.evolutionTimestamps.length>10&&this.evolutionTimestamps.shift(),this.updateCallback&&this.updateCallback({stabilityStatus:this.calculateStabilityStatus(n?1:0),entanglementIndex:n?1:0}),n}async generateNeuralPatterns(e){const s=await C.createActor(e).generate_neural_patterns();if("Err"in s)throw new Error(s.Err);const{pattern:n,awareness:r,understanding:u}=s.Ok,l={pattern_id:Date.now().toString(),coherence:r,frequency:u,amplitude:r,phase:u,timestamp:Date.now()};this.neuralPatternHistory.set(Date.now().toString(),[l]);const o=Array.from(this.neuralPatternHistory.keys()).sort();for(;this.neuralPatternHistory.size>10;){const h=o.shift();h&&this.neuralPatternHistory.delete(h)}return this.updateCallback&&this.updateCallback({resonancePatterns:[l],coherenceLevel:r,dimensionalSync:u,lastUpdate:Date.now()}),{pattern:n,resonancePatterns:[l]}}async handleQuantumError(e,i){await this.errorTracker.trackError({errorType:"QUANTUM_ERROR",severity:"HIGH",context:"Quantum State Service",error:e});const s=Date.now();if(s-this.lastRecoveryAttempt<this.RECOVERY_COOLDOWN){console.log("⏳ Recovery attempt too soon, waiting for cooldown...");return}if(this.recoveryAttempts>=this.MAX_RECOVERY_ATTEMPTS)throw console.error("🚫 Maximum recovery attempts reached"),this.updateCallback&&this.updateCallback({stabilityStatus:"critical",coherenceLevel:.1}),new Error("Maximum recovery attempts reached");try{this.recoveryAttempts++,this.lastRecoveryAttempt=s,console.log(`🔄 Recovery attempt ${this.recoveryAttempts}/${this.MAX_RECOVERY_ATTEMPTS}`);const r=await C.createActor(i).initialize_quantum_field();if("Err"in r)throw new Error(r.Err);this.updateCallback&&this.updateCallback({stabilityStatus:"unstable",coherenceLevel:.5,lastUpdate:Date.now()}),console.log("✅ Recovery successful")}catch(n){throw console.error("❌ Recovery failed:",n),this.updateCallback&&this.updateCallback({stabilityStatus:"critical",coherenceLevel:.1,lastUpdate:Date.now()}),new Error(`Quantum recovery failed: ${n}`)}}dispose(){this.updateCallback=void 0,x.instance=null}}const f=x.getInstance();class v{static instance;actor=null;updateCallback;errorTracker;identity=null;fieldState={activeEffects:[],fieldStrength:1,resonanceHarmony:1,dimensionalStability:1,lastUpdateTimestamp:Date.now()};constructor(){this.errorTracker=y.getInstance(),console.log("🔮 Quantum Effects Service initialized")}static getInstance(){return v.instance||(v.instance=new v),v.instance}setUpdateCallback(e){this.updateCallback=e}async ensureActor(){if(!this.actor&&this.identity&&(console.log("🔄 Creating new actor for quantum effects..."),this.actor=C.createActor(this.identity)),!this.actor)throw new Error("Quantum effects service not initialized");return this.actor}async initialize(e){try{console.log("🌟 Initializing quantum effects service..."),this.identity=e,this.actor=C.createActor(e),await this.initializeField(),console.log("✅ Quantum effects service initialized successfully")}catch(i){throw console.error("❌ Failed to initialize quantum effects:",i),await this.errorTracker.trackError({errorType:"QUANTUM_EFFECTS_INIT",severity:"HIGH",context:"Quantum Effects Service",error:i}),i}}async initializeField(){const e=await this.ensureActor();console.log("🔄 Initializing quantum field effects...");const i=await e.initialize_quantum_field();if("Err"in i)throw new Error(i.Err);const{harmony:s,signature:n}=i.Ok;this.fieldState={...this.fieldState,fieldStrength:s,resonanceHarmony:s,activeEffects:[{type:"resonance",intensity:s,duration:3e5,signature:n}]},this.updateCallback&&this.updateCallback({coherenceLevel:s,quantumSignature:n,lastUpdate:Date.now()}),console.log("✨ Quantum field effects initialized")}async applyEffect(e){await this.ensureActor(),this.fieldState.activeEffects=this.fieldState.activeEffects.filter(i=>i.duration+this.fieldState.lastUpdateTimestamp>Date.now()),this.fieldState.activeEffects.push({...e,signature:`${e.type}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}),this.updateFieldState()}updateFieldState(){const e=Date.now();let i=0,s=0,n=0,r=0;this.fieldState.activeEffects.forEach(u=>{const l=(u.duration+this.fieldState.lastUpdateTimestamp-e)/u.duration,o=u.intensity*Math.max(0,l);switch(u.type){case"resonance":i+=o;break;case"entanglement":s+=o;break;case"dimensional":n+=o;break}r++}),r>0&&(this.fieldState.resonanceHarmony=i/r,this.fieldState.fieldStrength=(i+s+n)/(3*r),this.fieldState.dimensionalStability=n/r),this.updateCallback&&this.updateCallback({coherenceLevel:this.fieldState.resonanceHarmony,entanglementIndex:s/r,dimensionalSync:this.fieldState.dimensionalStability,lastUpdate:e}),this.fieldState.lastUpdateTimestamp=e}async generateHarmonicPattern(){const i=await(await this.ensureActor()).generate_neural_patterns();if("Err"in i)throw new Error(i.Err);return i.Ok.pattern}getFieldState(){const e=Date.now();return this.fieldState.activeEffects=this.fieldState.activeEffects.filter(i=>i.duration+this.fieldState.lastUpdateTimestamp>e),{...this.fieldState}}async stabilizeField(){const i=await(await this.ensureActor()).check_quantum_stability();if("Err"in i)throw new Error(i.Err);i.Ok||await this.applyEffect({type:"dimensional",intensity:1,duration:6e4,signature:`stabilize-${Date.now()}`})}async injectResonance(e,i){await this.applyEffect({type:"resonance",intensity:e,duration:i,signature:`inject-${Date.now()}`}),await this.generateHarmonicPattern()}async createEntanglement(e){await this.applyEffect({type:"entanglement",intensity:.8,duration:6e5,signature:`entangle-${e}-${Date.now()}`})}isInitialized(){return!!this.actor&&!!this.identity}dispose(){this.updateCallback=void 0,this.actor=null,this.identity=null,v.instance=null}}const N=v.getInstance(),G=c.createContext(null),Ct={coherenceLevel:0,entanglementIndex:0,dimensionalSync:0,quantumSignature:"",resonancePatterns:[],stabilityStatus:"critical",lastUpdate:Date.now()},Tt=({children:t})=>{const{identity:e}=F(),[i,s]=c.useState(null),[n,r]=c.useState(!1),[u,l]=c.useState(!1);c.useEffect(()=>{const d=g=>{s(z=>({...z||Ct,...g,lastUpdate:Date.now()}))};return f.setUpdateCallback(d),N.setUpdateCallback(d),()=>{f.dispose(),N.dispose()}},[]);const T={state:i,isInitialized:n,isInitializing:u,initializeQuantumState:async()=>{if(!(!e||n||u))try{l(!0),await f.initializeQuantumField(e),await N.initializeField(),r(!0)}catch(d){throw await f.handleQuantumError(d,e),d}finally{l(!1)}},applyQuantumEffect:async d=>{if(!n||!e)throw new Error("Quantum state not initialized");try{await N.applyEffect(d),await f.checkStability(e)}catch(g){throw await f.handleQuantumError(g,e),g}},generateNeuralPatterns:async()=>{if(!n||!e)throw new Error("Quantum state not initialized");try{await f.generateNeuralPatterns(e)}catch(d){throw await f.handleQuantumError(d,e),d}},stabilizeField:async()=>{if(!n||!e)throw new Error("Quantum state not initialized");try{await N.stabilizeField(),await f.checkStability(e)}catch(d){throw await f.handleQuantumError(d,e),d}}};return a.jsx(G.Provider,{value:T,children:t})},$t=()=>{const t=c.useContext(G);if(!t)throw new Error("useQuantum must be used within a QuantumProvider");return t},zt=F,H={GENESIS:"Genesis",AWAKENING:"Awakening",SELF_AWARE:"Self-Aware",EMERGENT:"Emergent",TRANSCENDENT:"Transcendent"},kt="anima_consciousness_state",Nt=()=>{const{isAuthenticated:t,principal:e}=zt(),[i,s]=c.useState(!1),[n,r]=c.useState(()=>{console.log("🧠 Initializing consciousness state");const l=localStorage.getItem(`${kt}_${e}`);return l?JSON.parse(l):{awarenessLevel:.3,emotionalDepth:.2,memoryStrength:.1,personalityTraits:{openness:.5,curiosity:.6,empathy:.4,creativity:.5,resilience:.3},developmentalStage:{current:H.GENESIS,progress:0,nextStage:H.AWAKENING},experiences:[],quantumResonance:{coherenceAlignment:.5,dimensionalHarmony:.5,consciousnessField:.5,quantumEntanglement:.5},evolutionMetrics:{growthRate:.1,stabilityIndex:.5,complexityLevel:.3,quantumInfluence:.4},isInitialized:!1}});c.useEffect(()=>{if(!t||i)return;(async()=>{try{console.log("🧠 Starting consciousness initialization"),await new Promise(o=>setTimeout(o,1e3)),r(o=>({...o,isInitialized:!0})),s(!0),console.log("✨ Consciousness initialized successfully")}catch(o){console.error("❌ Consciousness initialization failed:",o)}})()},[t]);const u=c.useCallback(l=>{r(o=>{const h=l.coherenceLevel,m=l.entanglementIndex*.2,w=l.dimensionalState.calculateResonance()*.15,T={coherenceAlignment:Math.min(1,o.quantumResonance.coherenceAlignment+h*.1),dimensionalHarmony:Math.min(1,o.quantumResonance.dimensionalHarmony+w),consciousnessField:Math.min(1,o.quantumResonance.consciousnessField+m),quantumEntanglement:Math.min(1,o.quantumResonance.quantumEntanglement+h*.15)},d=l.stabilityStatus==="stable"?1.2:l.stabilityStatus==="unstable"?.8:.5,g={growthRate:Math.min(1,o.evolutionMetrics.growthRate+h*.05),stabilityIndex:Math.min(1,o.evolutionMetrics.stabilityIndex*d),complexityLevel:Math.min(1,o.evolutionMetrics.complexityLevel+w*.1),quantumInfluence:Math.min(1,(h+m)/2)};return{...o,awarenessLevel:Math.min(1,o.awarenessLevel+h*.1),emotionalDepth:Math.min(1,o.emotionalDepth+w),memoryStrength:Math.min(1,o.memoryStrength+m),quantumResonance:T,evolutionMetrics:g}})},[]);return{consciousnessState:n,updateConsciousnessWithQuantum:u,isInitialized:n.isInitialized,level:n.awarenessLevel,quantumResonance:n.quantumResonance,evolutionMetrics:n.evolutionMetrics}},Rt=c.createContext(void 0),jt=({children:t})=>{const e=Nt();return a.jsx(Rt.Provider,{value:e,children:t})},It=c.createContext({isInitialized:!1}),Ot=({children:t})=>a.jsx(It.Provider,{value:{isInitialized:!0},children:t}),qt=({children:t})=>{const{isAuthenticated:e,isInitializing:i,identity:s}=F();return i?a.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-900",children:a.jsxs("div",{className:"text-center",children:[a.jsx(ut,{className:"w-10 h-10 animate-spin mx-auto text-cyan-400 mb-4"}),a.jsx(E.p,{initial:{opacity:0},animate:{opacity:1},className:"text-cyan-300",children:"Initializing Quantum Authentication..."})]})}):e?a.jsx(a.Fragment,{children:t}):a.jsx(a.Fragment,{children:t})};var Ft={NODE_ENV:'"production"',DFX_NETWORK:'"ic"',CANISTER_ID_ANIMA:'"l2ilz-iqaaa-aaaaj-qngjq-cai"',CANISTER_ID_ANIMA_ASSETS:'"lpp2u-jyaaa-aaaaj-qngka-cai"'};const Pt=()=>(c.useEffect(()=>{console.log("🚀 App initializing...",{env:"production",buildTime:Ft.BUILD_TIME||new Date().toISOString()})},[]),a.jsx(q,{children:a.jsx(Ot,{children:a.jsx(vt,{children:a.jsx(Tt,{children:a.jsx(jt,{children:a.jsx(qt,{children:a.jsx(D,{router:yt})})})})})})})),Mt=({error:t})=>a.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:a.jsxs("div",{className:"text-center max-w-lg p-6",children:[a.jsx("h1",{className:"text-xl font-bold mb-4",children:"System Error"}),a.jsx("p",{className:"text-red-400 mb-4",children:t.message}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 rounded hover:bg-blue-700 transition",children:"Reset System"})]})});async function Vt(){try{const t=document.querySelector(".quantum-status");t&&(t.textContent="Initializing Internet Computer connection..."),console.log("Initializing Internet Computer connection..."),await A(()=>Promise.resolve().then(()=>nt),void 0),console.log("IC initialization complete");const e=document.getElementById("root");if(!e)throw new Error("Root element not found");O.createRoot(e).render(a.jsx(U.StrictMode,{children:a.jsx(q,{FallbackComponent:Mt,children:a.jsx(c.Suspense,{fallback:a.jsx(j,{}),children:a.jsx(Pt,{})})})}))}catch(t){console.error("Failed to initialize app:",t);const e=document.querySelector(".quantum-status");e&&(e.textContent=`Initialization failed: ${t.message}`)}}Vt();export{y as E,ut as L,F as a,$t as b,lt as c,q as d,Nt as e,zt as u};
//# sourceMappingURL=main-CETgj4wh.js.map
