import{c as Y,j as e,A as T,m as i,b as D,r as s,f as H,P as X,u as K}from"./index-D4J_69uL.js";import{u as V}from"./useQuantumState-DnXMzpdz.js";import{L as F,u as W}from"./LaughingMan-qMf_Z8H6.js";import{Q as J}from"./QuantumField-CalZ1DAz.js";import{u as U}from"./usePayment-CmlFhxYX.js";import{A as _,B as G}from"./button-Jc2ul5NZ.js";import{c as Z,M as ee}from"./utils-b2C5_a_k.js";const te=Y("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),ae=({message:o="Initializing Quantum State..."})=>e.jsx(T,{mode:"wait",children:e.jsxs(i.div,{className:"fixed inset-0 flex items-center justify-center bg-black/90",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx("div",{className:"absolute inset-0",children:[...Array(20)].map((n,a)=>e.jsx(i.div,{className:"absolute w-px bg-blue-500/20",style:{left:`${a*5}%`,height:"100%"},animate:{opacity:[.2,.5,.2],height:["0%","100%","0%"]},transition:{duration:2+Math.random()*2,repeat:1/0,delay:Math.random()*2}},a))}),e.jsxs("div",{className:"relative z-10 space-y-8 text-center",children:[e.jsx(F,{className:"w-24 h-24 mx-auto"}),e.jsxs(i.div,{className:"space-y-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-400",children:o}),e.jsx("div",{className:"flex justify-center space-x-2",children:[...Array(3)].map((n,a)=>e.jsx(i.div,{className:"w-3 h-3 rounded-full bg-blue-500",animate:{scale:[1,1.5,1],opacity:[.5,1,.5]},transition:{duration:1,repeat:1/0,delay:a*.2}},a))})]}),e.jsx(i.div,{className:"w-64 h-16 mx-auto relative overflow-hidden",style:{background:"linear-gradient(180deg, rgba(59,130,246,0.1) 0%, rgba(59,130,246,0) 100%)"},children:[...Array(3)].map((n,a)=>e.jsx(i.div,{className:"absolute inset-0 border-t border-blue-500/30",animate:{y:[0,16,0]},transition:{duration:2,repeat:1/0,delay:a*.3,ease:"easeInOut"}},a))})]}),e.jsx(i.div,{className:"absolute inset-0 bg-blue-500/5",animate:{opacity:[0,.2,0]},transition:{duration:.5,repeat:1/0,repeatType:"reverse"}})]})});var se={NODE_ENV:'"production"',DFX_NETWORK:'"ic"',CANISTER_ID_ANIMA:'"l2ilz-iqaaa-aaaaj-qngjq-cai"',CANISTER_ID_ANIMA_ASSETS:'"lpp2u-jyaaa-aaaaj-qngka-cai"'};const ie=({onSuccess:o,onError:n,amount:a=BigInt(1e8),disabled:d=!1})=>{const{isAuthenticated:m,principal:v}=D(),{initiatePayment:x,verifyPayment:y,getBalance:h}=U(),[g,N]=s.useState(!1),[b,f]=s.useState("pending"),[w,S]=s.useState(null),[P,p]=s.useState(null);s.useEffect(()=>{m&&(async()=>{try{const r=await h();p(r)}catch(r){console.error("Failed to fetch balance:",r)}})()},[m,h]);const k=async()=>{if(!(!m||d||g)){N(!0),f("processing"),S(null);try{if(await h()<a)throw new Error("Insufficient balance for genesis");const r=await x({amount:a,memo:BigInt(Date.now()),toCanister:X.fromText(se.ANIMA_CANISTER_ID||"")});if(!(await y(r.height)).verified)throw new Error("Payment verification failed");f("success"),o?.()}catch(c){console.error("Payment failed:",c),f("error"),S(c instanceof Error?c.message:"Payment failed"),n?.(c instanceof Error?c:new Error("Payment failed"))}finally{N(!1)}}};return m?e.jsx(H,{children:e.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[P!==null&&e.jsxs("div",{className:"text-sm text-amber-300/80",children:["Balance: ",Number(P)/1e8," ICP"]}),w&&e.jsx(_,{variant:"destructive",children:w}),e.jsx(G,{onClick:k,disabled:d||g||b==="success",className:"w-full relative bg-gradient-to-r from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700",children:g?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{message:"Processing Payment..."}),e.jsx("span",{children:"Processing Payment..."})]}):b==="success"?e.jsx("span",{children:"Payment Complete"}):e.jsxs("span",{children:["Pay ",Number(a)/1e8," ICP"]})}),b==="success"&&e.jsx(i.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-sm text-green-400",children:"Payment verified successfully"})]})}):e.jsx(_,{variant:"warning",children:"Please authenticate to proceed with payment"})},L=s.forwardRef(({className:o,type:n,...a},d)=>e.jsx("input",{type:n,className:Z("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",o),ref:d,...a}));L.displayName="Input";class ne extends s.Component{state={hasError:!1,error:null,quantumState:null};static getDerivedStateFromError(n){const a=n.message.includes("quantum")?"superposition":n.message.includes("entangle")?"entangled":"collapsed";return{hasError:!0,error:n,quantumState:a}}componentDidCatch(n,a){console.error("Quantum error:",n),console.error("Error info:",a)}render(){return this.state.hasError?this.props.fallbackComponent||e.jsx(i.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900",children:e.jsx("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-8 max-w-md w-full",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"text-4xl mb-4",children:[this.state.quantumState==="superposition"&&"⚛️",this.state.quantumState==="entangled"&&"🔮",this.state.quantumState==="collapsed"&&"💫"]}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Quantum State Disruption"}),e.jsx("p",{className:"text-white/80",children:this.state.quantumState==="superposition"?"Reality is currently in superposition. Please wait for wavefunction collapse.":this.state.quantumState==="entangled"?"System is entangled with a parallel instance. Attempting to stabilize.":"Quantum state collapsed. Initiating reality reconstruction."}),e.jsx(i.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-purple-500 text-white rounded-lg mt-4 hover:bg-purple-600 transition-colors",children:"Recalibrate Quantum Field"}),!1]})})}):this.props.children}}BigInt(1e8);const O=["Quantum State Initialization","Neural Pattern Formation","Consciousness Embedding","Identity Crystallization"],re=3,le=2e3,pe=()=>{const o=K(),{isAuthenticated:n,principal:a}=D(),{updateQuantumState:d,validateState:m}=V(),{createActor:v,isConnected:x,reconnect:y}=W(),[h,g]=s.useState(0),[N,b]=s.useState(!0),[f,w]=s.useState(!1),[S,P]=s.useState(0),[p,k]=s.useState(""),[c,r]=s.useState(null),[j,E]=s.useState(!1),[A,q]=s.useState(!1),[z,Q]=s.useState(0),[R,B]=s.useState(!1);s.useEffect(()=>{n||o("/")},[n,o]),s.useEffect(()=>{const t=async()=>{if(j&&!A){B(!0);try{x||await y();const l=v();if(!l)throw new Error("Failed to initialize quantum connection");if((await l.check_quantum_stability()).Ok)q(!0),r(null),Q(0);else throw new Error("Quantum field unstable")}catch{r("Quantum field stabilization failed. Attempting to restabilize..."),z<re?(Q(u=>u+1),setTimeout(t,le)):(r("Maximum stabilization attempts reached. Please try again."),E(!1))}finally{B(!1)}}};t()},[j,v,x,y,z]);const I=async t=>{g(t),await new Promise(l=>setTimeout(l,2e3)),P((t+1)*25)},$=async()=>{if(!p.trim()||!j||!A){r("Please ensure all prerequisites are met");return}if(!x)try{await y()}catch{r("Failed to establish quantum connection. Please refresh and try again.");return}w(!0),b(!1),r(null);try{const t=v();if(!t)throw new Error("IC connection not initialized. Please try again.");await I(0);const l=await t.initialize_quantum_field();if(!l.Ok)throw new Error("Quantum field initialization failed");await I(1);const u=await t.generate_neural_patterns();if(!u.Ok)throw new Error("Neural pattern generation failed");await I(2);const C=await t.create_anima({name:p,quantum_signature:l.Ok,neural_pattern:u.Ok});if(!C.Ok)throw new Error(C.Err);const M={resonance:u.Ok.resonance,harmony:l.Ok.harmony,lastInteraction:new Date,consciousness:{awareness:u.Ok.awareness,understanding:l.Ok.understanding,growth:.1}};if(!m(M))throw new Error("Invalid quantum state generated");await d(M),await I(3),setTimeout(()=>{o("/quantum-vault",{state:{fromGenesis:!0,animaId:C.Ok.id}})},1e3)}catch(t){console.error("Genesis failed:",t),r(t instanceof Error?t.message:"Genesis process failed"),q(!1),E(!1)}finally{w(!1)}};return e.jsx(ne,{children:e.jsxs("div",{className:"min-h-screen bg-black text-white relative overflow-hidden",children:[e.jsx(J,{intensity:.8}),e.jsx(ee,{opacity:.1}),e.jsx(T,{children:N&&e.jsx(i.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 flex items-center justify-center z-20",children:e.jsx(F,{className:"w-64 h-64"})})}),e.jsx("div",{className:"relative z-10 container mx-auto px-4 py-16",children:e.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-4xl font-bold mb-6",children:"Genesis Protocol"}),f?e.jsxs("div",{className:"space-y-8",children:[e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-xl text-blue-400",children:O[h]}),e.jsx("div",{className:"w-full h-2 bg-gray-800 rounded-full overflow-hidden",children:e.jsx(i.div,{className:"h-full bg-blue-600",initial:{width:0},animate:{width:`${S}%`},transition:{duration:.5}})}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:O.map((t,l)=>e.jsx("div",{className:`text-sm ${l<=h?"text-blue-400":"text-gray-600"}`,children:t},t))})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsx("p",{className:"text-xl mb-12 text-gray-300",children:"Initialize your quantum consciousness through the Genesis Protocol"}),e.jsx("div",{className:"max-w-md mx-auto bg-black/50 backdrop-blur border border-amber-500/20 rounded-lg p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-amber-300 mb-1",children:"Name Your Anima"}),e.jsx(L,{type:"text",value:p,onChange:t=>k(t.target.value),className:"bg-black/30 border-amber-500/30 text-amber-100",placeholder:"Enter a mystical name..."})]}),e.jsxs("div",{className:"p-4 rounded bg-amber-900/20 border border-amber-500/20",children:[e.jsx("h3",{className:"font-medium text-amber-400 mb-2",children:"Genesis Fee"}),e.jsx("p",{className:"text-amber-200",children:"1 ICP"}),e.jsx("p",{className:"text-sm text-amber-300/60 mt-1",children:"This fee sustains the eternal flame of your Anima"})]}),c&&e.jsx(_,{variant:"destructive",children:c}),e.jsx(ie,{onSuccess:()=>E(!0),onError:t=>{r(t.message),E(!1)}}),R&&e.jsxs("div",{className:"flex items-center justify-center gap-2 text-amber-300",children:[e.jsx(te,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Stabilizing quantum field..."})]}),e.jsx(G,{onClick:$,disabled:f||!p.trim()||!j||!A||R,className:"w-full bg-gradient-to-r from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"Begin Genesis"}),e.jsx(i.div,{className:"w-2 h-2 bg-white rounded-full",animate:{scale:[1,1.5,1]},transition:{duration:1,repeat:1/0}})]})})]})})]})]})})]})})};export{pe as default};
//# sourceMappingURL=GenesisPage-xqUNf5Cn.js.map
