import{r as a,j as e}from"./vendor-react-C3EsOhZp.js";import{C as P,c as k,d as R,e as D}from"./ui-components-QvgOnaLu.js";import{S as g,U as j,u as I,T,P as x}from"./vendor-DOQoE6Qh.js";import{u as M}from"./quantum-features-SpmCtDM2.js";import{A as N,m as u}from"./vendor-motion-DEf53LVh.js";const z=()=>{const[l,p]=a.useState(""),[f,n]=a.useState(null),[h,i]=a.useState(null),[y,b]=a.useState([]),[v,c]=a.useState(null),{actor:t,identity:o}=M(),[m,A]=a.useState("");a.useEffect(()=>{o&&A(o.getPrincipal().toString())},[o]),a.useEffect(()=>{d()},[t]);const d=async()=>{try{const r=await(t==null?void 0:t.list_admins());"Ok"in r&&b(r.Ok.map(s=>({principal:s.toString(),addedAt:Date.now()})))}catch(r){console.error("Failed to fetch admins:",r)}},C=r=>{try{return x.fromText(r),!(r.length<10||!/^[a-z0-9-]+$/.test(r)||y.some(s=>s.principal===r))}catch{return!1}},w=async r=>{if(r.preventDefault(),n(null),i(null),!C(l)){n("Invalid or duplicate Principal ID");return}try{const s=await(t==null?void 0:t.add_admin(x.fromText(l)));"Ok"in s?(i("Admin added successfully"),p(""),d()):"Err"in s&&n(s.Err)}catch(s){n("Failed to add admin"),console.error("Add admin error:",s)}},E=async r=>{if(r===m){n("You can't remove yourself as admin");return}try{const s=await(t==null?void 0:t.remove_admin(x.fromText(r)));"Ok"in s?(i("Admin removed successfully"),d()):"Err"in s&&n(s.Err)}catch(s){n("Failed to remove admin"),console.error("Remove admin error:",s)}finally{c(null)}},S=r=>`${r.slice(0,5)}...${r.slice(-5)}`;return e.jsxs(P,{className:"bg-black border border-green-500",children:[e.jsx(k,{children:e.jsxs(R,{className:"text-green-400 flex items-center",children:[e.jsx(g,{className:"w-5 h-5 mr-2"}),">"," ADMIN MANAGEMENT"]})}),e.jsxs(D,{children:[e.jsxs("form",{onSubmit:w,className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:l,onChange:r=>{p(r.target.value),n(null),i(null)},placeholder:"Principal ID",className:`w-full bg-black border border-green-500/30 px-4 py-2 text-green-500 
                                     placeholder-green-500/30 focus:border-green-500 focus:outline-none
                                     transition-colors pr-10`}),e.jsx(j,{className:"absolute right-3 top-2.5 h-5 w-5 text-green-500/50"})]}),e.jsxs(N,{children:[f&&e.jsxs(u.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"text-red-500 text-sm border border-red-500/30 p-2 flex items-center",children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),">"," ERROR: ",f]}),h&&e.jsxs(u.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"text-green-500 text-sm border border-green-500/30 p-2",children:[">"," ",h]})]}),e.jsxs("button",{type:"submit",className:`w-full px-4 py-2 border border-green-500 hover:bg-green-500 
                                 hover:text-black transition-colors flex items-center justify-center`,children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"ADD ADMIN"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"text-green-400 text-sm mb-3",children:[">"," CURRENT ADMINS"]}),e.jsx("div",{className:"space-y-2",children:e.jsx(N,{children:y.map(r=>e.jsxs(u.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:`flex items-center justify-between p-2 border border-green-500/30 
                                             hover:border-green-500 transition-colors`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(g,{className:"w-4 h-4 mr-2 text-green-500/50"}),e.jsxs("span",{className:"font-mono",children:[S(r.principal),r.principal===m&&e.jsx("span",{className:"text-green-500/50 ml-2",children:"(you)"})]})]}),v===r.principal?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>E(r.principal),className:"text-red-500 hover:text-red-400",children:"Confirm"}),e.jsx("button",{onClick:()=>c(null),className:"text-green-500 hover:text-green-400",children:"Cancel"})]}):r.principal!==m&&e.jsx("button",{onClick:()=>c(r.principal),className:"text-green-500/50 hover:text-red-500 transition-colors",children:e.jsx(T,{className:"w-4 h-4"})})]},r.principal))})})]})]})]})};export{z as AdminManagement};
//# sourceMappingURL=AdminManagement-BlRGdjvB.js.map
