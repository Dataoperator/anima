{"version":3,"mappings":"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","names":["AuthContext","createContext","useAuth","context","useContext","Error","AuthProvider","children","authClient","setAuthClient","useState","isAuthenticated","setIsAuthenticated","isInitialized","setIsInitialized","useEffect","client","AuthClient","create","isAuthed","error","login","identityProvider","process","II_URL","onSuccess","onError","logout","_jsx","Provider","value","className","PaymentContext","undefined","PaymentProvider","balance","setBalance","BigInt","loading","setLoading","setError","processingPayment","setProcessingPayment","lastTransaction","setLastTransaction","updateBalance","err","message","processPayment","amount","recipient","success","timestamp","Date","now","Motion","m","quantum","initial","opacity","scale","filter","animate","transition","duration","ease","exit","LandingPage","React","lazy","__vitePreload","GenesisPage","AnimaPage","AdminPage","LoadingFallback","div","variants","RootLayout","ErrorBoundary","Suspense","fallback","Routes","Route","path","element","Navigate","to","replace","ErrorFallback","onClick","window","location","reload","App","isReady","setIsReady","all","then","catch","FallbackComponent","Router","LazyMotion","features","domAnimation","strict"],"ignoreList":[],"sources":["../../src/contexts/auth-context.tsx","../../src/contexts/PaymentContext.tsx","../../src/providers/MotionProvider.tsx","../../src/components/layout/RootLayout.tsx","../../src/components/App.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport { AuthClient } from '@dfinity/auth-client';\n\ninterface AuthContextType {\n  isAuthenticated: boolean;\n  isInitialized: boolean;\n  authClient: AuthClient | null;\n  login: () => Promise<void>;\n  logout: () => Promise<void>;\n}\n\nconst AuthContext = createContext<AuthContextType | null>(null);\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n\ninterface AuthProviderProps {\n  children: React.ReactNode;\n}\n\nexport const AuthProvider: React.FC<AuthProviderProps> = ({ children }) => {\n  const [authClient, setAuthClient] = useState<AuthClient | null>(null);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [isInitialized, setIsInitialized] = useState(false);\n\n  useEffect(() => {\n    const initAuth = async () => {\n      try {\n        // Create auth client\n        const client = await AuthClient.create();\n        setAuthClient(client);\n\n        // Check if already authenticated\n        const isAuthed = await client.isAuthenticated();\n        setIsAuthenticated(isAuthed);\n        \n        setIsInitialized(true);\n      } catch (error) {\n        console.error('Failed to initialize auth:', error);\n        // Still mark as initialized to prevent endless loading\n        setIsInitialized(true);\n      }\n    };\n\n    initAuth();\n  }, []);\n\n  const login = async () => {\n    if (!authClient) throw new Error('Auth client not initialized');\n\n    try {\n      await authClient.login({\n        identityProvider: process.env.II_URL || 'https://identity.ic0.app/#authorize',\n        onSuccess: () => {\n          setIsAuthenticated(true);\n        },\n        onError: (error) => {\n          console.error('Login failed:', error);\n          throw error;\n        },\n      });\n    } catch (error) {\n      console.error('Login error:', error);\n      throw error;\n    }\n  };\n\n  const logout = async () => {\n    if (!authClient) throw new Error('Auth client not initialized');\n\n    try {\n      await authClient.logout();\n      setIsAuthenticated(false);\n    } catch (error) {\n      console.error('Logout error:', error);\n      throw error;\n    }\n  };\n\n  // Don't render until initialized\n  if (!isInitialized) {\n    return (\n      <div className=\"min-h-screen bg-black text-white flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 border-t-2 border-blue-500 rounded-full animate-spin mx-auto mb-4\" />\n          <p>Initializing Authentication...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <AuthContext.Provider\n      value={{\n        isAuthenticated,\n        isInitialized,\n        authClient,\n        login,\n        logout,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n};","import React, { createContext, useContext, useState, useEffect } from 'react';\nimport { Principal } from '@dfinity/principal';\n\ninterface PaymentContextType {\n  balance: bigint;\n  loading: boolean;\n  error: string | null;\n  processingPayment: boolean;\n  lastTransaction: any | null;\n  updateBalance: () => Promise<void>;\n  processPayment: (amount: bigint, recipient: Principal) => Promise<boolean>;\n}\n\nconst PaymentContext = createContext<PaymentContextType | undefined>(undefined);\n\nexport function usePayment() {\n  const context = useContext(PaymentContext);\n  if (context === undefined) {\n    throw new Error('usePayment must be used within a PaymentProvider');\n  }\n  return context;\n}\n\nexport const PaymentProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const [balance, setBalance] = useState<bigint>(BigInt(0));\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [processingPayment, setProcessingPayment] = useState(false);\n  const [lastTransaction, setLastTransaction] = useState<any | null>(null);\n\n  const updateBalance = async () => {\n    try {\n      setLoading(true);\n      // TODO: Implement actual balance fetch from IC\n      // This is a placeholder\n      setBalance(BigInt(1000000));\n      setError(null);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to fetch balance');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const processPayment = async (amount: bigint, recipient: Principal): Promise<boolean> => {\n    try {\n      setProcessingPayment(true);\n      // TODO: Implement actual payment processing\n      // This is a placeholder\n      const success = true;\n      if (success) {\n        setLastTransaction({ amount, recipient, timestamp: Date.now() });\n        await updateBalance();\n      }\n      return success;\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Payment processing failed');\n      return false;\n    } finally {\n      setProcessingPayment(false);\n    }\n  };\n\n  useEffect(() => {\n    updateBalance();\n  }, []);\n\n  const value = {\n    balance,\n    loading,\n    error,\n    processingPayment,\n    lastTransaction,\n    updateBalance,\n    processPayment,\n  };\n\n  return (\n    <PaymentContext.Provider value={value}>\n      {children}\n    </PaymentContext.Provider>\n  );\n};\n\nexport default PaymentProvider;","import React from 'react';\nimport { m, AnimatePresence } from 'framer-motion';\nimport { AnimationSafeGuard } from '@/components/ui/AnimationSafeGuard';\n\nexport const MotionProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  return (\n    <AnimationSafeGuard>\n      <AnimatePresence mode=\"wait\" initial={false}>\n        {children}\n      </AnimatePresence>\n    </AnimationSafeGuard>\n  );\n};\n\n// Pre-configured motion components with initialization check\nexport const Motion = m;\n\n// Re-export AnimatePresence for convenience\nexport { AnimatePresence };\n\n// Common animation variants\nexport const fadeIn = {\n  initial: { opacity: 0 },\n  animate: { opacity: 1 },\n  exit: { opacity: 0 }\n};\n\nexport const slideIn = {\n  initial: { x: -20, opacity: 0 },\n  animate: { x: 0, opacity: 1 },\n  exit: { x: 20, opacity: 0 }\n};\n\nexport const scaleIn = {\n  initial: { scale: 0.8, opacity: 0 },\n  animate: { scale: 1, opacity: 1 },\n  exit: { scale: 0.8, opacity: 0 }\n};\n\nexport const quantum = {\n  initial: { \n    opacity: 0,\n    scale: 0.9,\n    filter: 'blur(10px)'\n  },\n  animate: { \n    opacity: 1,\n    scale: 1,\n    filter: 'blur(0px)',\n    transition: {\n      duration: 0.5,\n      ease: [0.43, 0.13, 0.23, 0.96]\n    }\n  },\n  exit: { \n    opacity: 0,\n    scale: 0.9,\n    filter: 'blur(10px)',\n    transition: {\n      duration: 0.3,\n      ease: [0.43, 0.13, 0.23, 0.96]\n    }\n  }\n};\n\n// Safe transition defaults\nexport const defaultTransition = {\n  type: \"tween\", // Changed from \"spring\" for more reliability\n  duration: 0.3,\n  ease: [0.43, 0.13, 0.23, 0.96]\n};","import React, { Suspense } from 'react';\nimport { Routes, Route, Navigate } from 'react-router-dom';\nimport { ErrorBoundary } from '../error-boundary/ErrorBoundary';\nimport { AuthProvider } from '@/contexts/auth-context';\nimport { PaymentProvider } from '@/contexts/PaymentContext';\nimport { Motion, quantum } from '@/providers/MotionProvider';\n\n// Lazy-loaded components\nconst LandingPage = React.lazy(() => import('@/components/pages/LandingPage'));\nconst GenesisPage = React.lazy(() => import('@/components/pages/GenesisPage'));\nconst AnimaPage = React.lazy(() => import('@/components/pages/AnimaPage'));\nconst AdminPage = React.lazy(() => import('@/components/admin/AdminManagement'));\n\nconst LoadingFallback = () => (\n  <Motion.div\n    className=\"flex items-center justify-center min-h-screen bg-black text-white\"\n    variants={quantum}\n    initial=\"initial\"\n    animate=\"animate\"\n    exit=\"exit\"\n  >\n    <div className=\"text-center\">\n      <div className=\"animate-pulse\">Initializing ANIMA...</div>\n    </div>\n  </Motion.div>\n);\n\nconst RootLayout: React.FC = () => {\n  return (\n    <ErrorBoundary>\n      <AuthProvider>\n        <PaymentProvider>\n          <Suspense fallback={<LoadingFallback />}>\n            <Motion.div\n              className=\"min-h-screen bg-black\"\n              initial=\"initial\"\n              animate=\"animate\"\n              exit=\"exit\"\n              variants={quantum}\n            >\n              <Routes>\n                <Route path=\"/\" element={<LandingPage />} />\n                <Route path=\"/genesis\" element={<GenesisPage />} />\n                <Route path=\"/anima/:id\" element={<AnimaPage />} />\n                <Route path=\"/admin\" element={<AdminPage />} />\n                <Route path=\"*\" element={<Navigate to=\"/\" replace />} />\n              </Routes>\n            </Motion.div>\n          </Suspense>\n        </PaymentProvider>\n      </AuthProvider>\n    </ErrorBoundary>\n  );\n};\n\nexport default RootLayout;","import React, { Suspense, useEffect, useState } from 'react';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { LazyMotion, domAnimation, m } from 'framer-motion';\nimport { ErrorBoundary } from './error-boundary/ErrorBoundary';\nimport { AuthProvider } from '@/contexts/auth-context';\nimport { LoadingFallback } from './ui/LoadingFallback';\nimport RootLayout from './layout/RootLayout';\n\n// ErrorFallback component\nconst ErrorFallback = ({ error }: { error: Error }) => (\n  <div className=\"min-h-screen bg-black text-white flex items-center justify-center\">\n    <div className=\"max-w-md text-center p-8\">\n      <h1 className=\"text-xl font-bold mb-4\">System Error</h1>\n      <p className=\"text-red-400 mb-6\">{error.message}</p>\n      <button\n        onClick={() => window.location.reload()}\n        className=\"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded\"\n      >\n        Retry\n      </button>\n    </div>\n  </div>\n);\n\nconst App = () => {\n  const [isReady, setIsReady] = useState(false);\n\n  useEffect(() => {\n    // Ensure all critical dependencies are loaded\n    Promise.all([\n      import('framer-motion'),\n      import('react-router-dom')\n    ]).then(() => {\n      setIsReady(true);\n    }).catch(error => {\n      console.error('Failed to load dependencies:', error);\n    });\n  }, []);\n\n  if (!isReady) {\n    return <LoadingFallback />;\n  }\n\n  return (\n    <ErrorBoundary FallbackComponent={ErrorFallback}>\n      <Router>\n        <LazyMotion features={domAnimation} strict={false}>\n          <m.div\n            initial={false}\n            className=\"min-h-screen bg-black text-white overflow-hidden\"\n          >\n            <AuthProvider>\n              <Suspense fallback={<LoadingFallback />}>\n                <RootLayout />\n              </Suspense>\n            </AuthProvider>\n          </m.div>\n        </LazyMotion>\n      </Router>\n    </ErrorBoundary>\n  );\n};\n\nexport default App;"],"file":"assets/App-DrnumHld.js"}