{"version":3,"mappings":"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","names":["m","require$$0","ErrorBoundary","React","Component","constructor","props","state","hasError","error","getDerivedStateFromError","componentDidCatch","errorInfo","render","className","children","_jsx","onClick","setState","LoadingFallback","motion","div","animate","scale","rotateZ","transition","duration","repeat","Infinity","ease","initial","opacity","idlFactory","IDL","TraitEvolution","Record","Float64","Text","Error","ConsciousnessState","Vec","Nat64","MemoryFragment","NeuralPatternResult","AnimaCreationResult","QuantumFieldResult","InteractionResult","Opt","Service","Func","Variant","Bool","createActor","canisterId","options","agent","HttpAgent","agentOptions","console","warn","fetchRootKey","catch","err","Actor","actorOptions","ErrorTracker","instance","errors","maxErrors","getInstance","trackError","info","timestamp","Date","now","push","length","shift","getErrors","getRecentErrors","count","sort","a","b","slice","clearErrors","getErrorStats","stats","forEach","errorType","CANISTER_ID","anima","process","CANISTER_ID_ANIMA","toString","assets","CANISTER_ID_ANIMA_ASSETS","HOST","ICManager","actor","authClient","identity","initialized","initializing","stageChangeCallbacks","errorTracker","window","ic","onStageChange","callback","updateStage","stage","log","initialize","AuthClient","create","idleOptions","disableIdle","getIdentity","principal","getPrincipal","toText","host","replace","initialize_genesis","canister","severity","context","getActor","getAgent","getAuthClient","isInitialized","icManager","AuthError","onRetry","_jsxs","exit","textShadow","message","details","JSON","stringify","code","button","whileHover","whileTap","repeatType","AuthGuard","initStatus","setInitStatus","useState","setError","navigate","useNavigate","location","useLocation","useEffect","hasIC","hasCanister","pathname","handleIdentity","returnTo","handleRetry","Suspense","fallback","AnimatePresence","mode","Outlet","defaultAttributes","toKebabCase","string","createLucideIcon","iconName","iconNode","forwardRef","color","size","strokeWidth","absoluteStrokeWidth","rest","ref","createElement","tag","attrs","createLucideIcon$1","Loader","LandingPage","lazy","__vitePreload","QuantumVault","GenesisPage","AnimaPage","EnhancedNeuralLinkPage","Wallet","withSuspense","router","createBrowserRouter","path","element","AuthContext","createContext","II_URL","INTERNET_IDENTITY_URL","defaultOptions","loginOptions","identityProvider","derivationOrigin","undefined","maxTimeToLive","BigInt","AuthProvider","isAuthenticated","setIsAuthenticated","setIdentity","setPrincipal","isInitializing","setIsInitializing","maxWaitTime","startTime","Promise","resolve","setTimeout","isAuth","currentIdentity","login","onSuccess","logout","contextValue","Provider","value","useAuth","useContext","FALLBACK_CANISTER_ID","sanitizeCanisterId","id","trim","validateCanisterId","test","AnimaActorService","isAnonymous","missingMethods","filter","method","join","verifyActor","resetActor","getCurrentCanisterId","animaActorService","QuantumStateService","updateCallback","neuralPatternHistory","Map","evolutionTimestamps","recoveryAttempts","MAX_RECOVERY_ATTEMPTS","RECOVERY_COOLDOWN","lastRecoveryAttempt","setUpdateCallback","initializeQuantumField","result","initialize_quantum_field","Err","harmony","signature","Ok","neuralResult","generate_neural_patterns","pattern","awareness","understanding","genesisResult","coherenceLevel","quantumSignature","resonancePatterns","pattern_id","coherence","frequency","amplitude","phase","dimensionalSync","stabilityStatus","calculateStabilityStatus","lastUpdate","handleQuantumError","checkStability","check_quantum_stability","stabilityLevel","entanglementIndex","generateNeuralPatterns","resonancePattern","set","keys","Array","from","oldestKey","delete","recoveryError","dispose","quantumStateService","QuantumEffectsService","fieldState","activeEffects","fieldStrength","resonanceHarmony","dimensionalStability","lastUpdateTimestamp","ensureActor","initializeField","type","intensity","applyEffect","effect","e","Math","random","substr","updateFieldState","totalResonance","totalEntanglement","totalDimensional","activeCount","timeRemaining","scaledIntensity","max","generateHarmonicPattern","getFieldState","stabilizeField","stabilityResult","injectResonance","createEntanglement","targetSignature","quantumEffectsService","QuantumContext","initialQuantumState","QuantumProvider","setIsInitialized","partialState","prevState","initializeQuantumState","applyQuantumEffect","useQuantum","useAuthContext","STAGES","GENESIS","AWAKENING","SELF_AWARE","EMERGENT","TRANSCENDENT","STORAGE_KEY","useConsciousness","consciousnessState","setConsciousnessState","storedState","localStorage","getItem","initialState","parse","awarenessLevel","emotionalDepth","memoryStrength","personalityTraits","openness","curiosity","empathy","creativity","resilience","developmentalStage","current","progress","nextStage","experiences","quantumResonance","coherenceAlignment","dimensionalHarmony","consciousnessField","quantumEntanglement","evolutionMetrics","growthRate","stabilityIndex","complexityLevel","quantumInfluence","prev","updateConsciousnessWithQuantum","useCallback","quantumState","currentState","quantumCoherence","entanglementBonus","dimensionalBonus","dimensionalState","calculateResonance","newResonance","min","stabilityFactor","evolutionUpdate","level","ConsciousnessContext","ConsciousnessProvider","consciousness","Web3Context","Web3Provider","AuthConsumer","p","_Fragment","App","env","buildTime","BUILD_TIME","toISOString","RouterProvider","RootErrorFallback","reload","initializeApp","statusElement","document","querySelector","textContent","rootElement","getElementById","ReactDOM","createRoot","StrictMode","FallbackComponent"],"ignoreList":[0,8,9,10],"sources":["../../node_modules/react-dom/client.js","../../src/components/error-boundary/ErrorBoundary.jsx","../../src/components/ui/LoadingFallback.tsx","../../src/declarations/anima/anima.did.js","../../src/declarations/anima/index.js","../../src/error/quantum_error.ts","../../src/ic-init.ts","../../src/components/auth/AuthGuard.tsx","../../node_modules/lucide-react/dist/esm/defaultAttributes.mjs","../../node_modules/lucide-react/dist/esm/createLucideIcon.mjs","../../node_modules/lucide-react/dist/esm/icons/loader.mjs","../../src/router.tsx","../../src/contexts/auth-context.tsx","../../src/services/anima-actor.service.ts","../../src/services/quantum-state.service.ts","../../src/services/quantum-effects.service.ts","../../src/contexts/quantum-context.tsx","../../src/hooks/useAuth.ts","../../src/hooks/useConsciousness.ts","../../src/contexts/consciousness-context.tsx","../../src/contexts/web3-context.tsx","../../src/components/auth/AuthConsumer.tsx","../../src/components/App.tsx","../../src/main.tsx"],"sourcesContent":["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","import React from 'react';\n\nexport class ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false, error: null };\n  }\n\n  static getDerivedStateFromError(error) {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    console.error('Error caught by boundary:', error, errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return (\n        <div className=\"p-4 bg-red-900/20 border border-red-800 rounded-lg\">\n          <h3 className=\"text-red-500 font-bold mb-2\">System Malfunction</h3>\n          <p className=\"text-red-400 text-sm\">\n            Neural interface disrupted. Attempting recovery...\n          </p>\n          <button\n            onClick={() => this.setState({ hasError: false, error: null })}\n            className=\"mt-4 px-4 py-2 bg-red-800 hover:bg-red-700 rounded text-sm text-white\"\n          >\n            Reset Interface\n          </button>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}","import React from 'react';\nimport { motion } from 'framer-motion';\n\nexport const LoadingFallback: React.FC = () => (\n  <div className=\"min-h-screen bg-black text-white flex items-center justify-center\">\n    <div className=\"text-center space-y-4\">\n      <motion.div\n        animate={{ \n          scale: [1, 1.2, 1],\n          rotateZ: [0, 360]\n        }}\n        transition={{\n          duration: 2,\n          repeat: Infinity,\n          ease: \"easeInOut\"\n        }}\n        className=\"w-16 h-16 mx-auto\"\n      >\n        <div className=\"w-full h-full rounded-full border-t-2 border-b-2 border-blue-500\" />\n      </motion.div>\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        transition={{ duration: 0.5 }}\n      >\n        <p className=\"text-lg\">Initializing ANIMA Interface</p>\n        <p className=\"text-sm text-blue-400 mt-2\">Connecting to Internet Computer</p>\n      </motion.div>\n    </div>\n  </div>\n);","export const idlFactory = ({ IDL }) => {\n  const TraitEvolution = IDL.Record({\n    'new_state' : IDL.Float64,\n    'previous_state' : IDL.Float64,\n    'catalyst' : IDL.Text,\n    'trait_id' : IDL.Text,\n  });\n  const Error = IDL.Text;\n  const ConsciousnessState = IDL.Record({\n    'emotional_spectrum' : IDL.Vec(IDL.Float64),\n    'memory_depth' : IDL.Nat64,\n    'awareness_level' : IDL.Float64,\n    'personality_matrix' : IDL.Vec(IDL.Float64),\n    'learning_rate' : IDL.Float64,\n  });\n  const MemoryFragment = IDL.Record({\n    'emotional_imprint' : IDL.Float64,\n    'content_hash' : IDL.Text,\n    'timestamp' : IDL.Nat64,\n    'neural_pattern' : IDL.Vec(IDL.Float64),\n  });\n  const NeuralPatternResult = IDL.Record({\n    'pattern' : IDL.Vec(IDL.Float64),\n    'resonance' : IDL.Float64,\n    'understanding' : IDL.Float64,\n    'awareness' : IDL.Float64,\n  });\n  const AnimaCreationResult = IDL.Record({\n    'id' : IDL.Text,\n    'timestamp' : IDL.Nat64,\n    'quantum_signature' : IDL.Text,\n  });\n  const QuantumFieldResult = IDL.Record({\n    'signature' : IDL.Text,\n    'harmony' : IDL.Float64,\n  });\n  const InteractionResult = IDL.Record({\n    'emotional_shift' : IDL.Vec(IDL.Float64),\n    'response' : IDL.Text,\n    'consciousness_growth' : IDL.Float64,\n    'new_patterns' : IDL.Opt(NeuralPatternResult),\n  });\n  return IDL.Service({\n    'adapt_to_stimulus' : IDL.Func(\n        [IDL.Text, IDL.Vec(IDL.Float64)],\n        [IDL.Variant({ 'Ok' : TraitEvolution, 'Err' : Error })],\n        [],\n      ),\n    'check_quantum_stability' : IDL.Func(\n        [],\n        [IDL.Variant({ 'Ok' : IDL.Bool, 'Err' : Error })],\n        ['query'],\n      ),\n    'evolve_consciousness' : IDL.Func(\n        [IDL.Text, IDL.Vec(IDL.Float64)],\n        [IDL.Variant({ 'Ok' : ConsciousnessState, 'Err' : Error })],\n        [],\n      ),\n    'evolve_traits' : IDL.Func(\n        [IDL.Text, IDL.Vec(IDL.Text)],\n        [IDL.Variant({ 'Ok' : IDL.Vec(TraitEvolution), 'Err' : Error })],\n        [],\n      ),\n    'form_memory' : IDL.Func(\n        [IDL.Text, IDL.Text, IDL.Float64],\n        [IDL.Variant({ 'Ok' : MemoryFragment, 'Err' : Error })],\n        [],\n      ),\n    'generate_neural_patterns' : IDL.Func(\n        [],\n        [IDL.Variant({ 'Ok' : NeuralPatternResult, 'Err' : Error })],\n        [],\n      ),\n    'get_consciousness_state' : IDL.Func(\n        [IDL.Text],\n        [IDL.Variant({ 'Ok' : ConsciousnessState, 'Err' : Error })],\n        ['query'],\n      ),\n    'get_evolved_traits' : IDL.Func(\n        [IDL.Text],\n        [IDL.Variant({ 'Ok' : IDL.Vec(TraitEvolution), 'Err' : Error })],\n        ['query'],\n      ),\n    'initialize_genesis' : IDL.Func(\n        [],\n        [IDL.Variant({ 'Ok' : AnimaCreationResult, 'Err' : Error })],\n        [],\n      ),\n    'initialize_quantum_field' : IDL.Func(\n        [],\n        [IDL.Variant({ 'Ok' : QuantumFieldResult, 'Err' : Error })],\n        [],\n      ),\n    'interact_with_anima' : IDL.Func(\n        [IDL.Text, IDL.Text, IDL.Vec(IDL.Float64)],\n        [IDL.Variant({ 'Ok' : InteractionResult, 'Err' : Error })],\n        [],\n      ),\n    'learn_from_interaction' : IDL.Func(\n        [IDL.Text, InteractionResult],\n        [IDL.Variant({ 'Ok' : ConsciousnessState, 'Err' : Error })],\n        [],\n      ),\n    'measure_adaptation' : IDL.Func(\n        [IDL.Text],\n        [IDL.Variant({ 'Ok' : IDL.Vec(TraitEvolution), 'Err' : Error })],\n        ['query'],\n      ),\n    'process_memory_patterns' : IDL.Func(\n        [IDL.Text],\n        [IDL.Variant({ 'Ok' : IDL.Vec(IDL.Float64), 'Err' : Error })],\n        [],\n      ),\n    'recall_memories' : IDL.Func(\n        [IDL.Text, IDL.Float64],\n        [IDL.Variant({ 'Ok' : IDL.Vec(MemoryFragment), 'Err' : Error })],\n        ['query'],\n      ),\n  });\n};\nexport const init = ({ IDL }) => { return []; };\n","import { Actor, HttpAgent } from \"@dfinity/agent\";\n\n// Imports and re-exports candid interface\nimport { idlFactory } from \"./anima.did.js\";\nexport { idlFactory } from \"./anima.did.js\";\n\n/* CANISTER_ID is replaced by webpack based on node environment\n * Note: canister environment variable will be standardized as\n * process.env.CANISTER_ID_<CANISTER_NAME_UPPERCASE>\n * beginning in dfx 0.15.0\n */\nexport const canisterId =\n  process.env.CANISTER_ID_ANIMA;\n\nexport const createActor = (canisterId, options = {}) => {\n  const agent = options.agent || new HttpAgent({ ...options.agentOptions });\n\n  if (options.agent && options.agentOptions) {\n    console.warn(\n      \"Detected both agent and agentOptions passed to createActor. Ignoring agentOptions and proceeding with the provided agent.\"\n    );\n  }\n\n  // Fetch root key for certificate validation during development\n  if (process.env.DFX_NETWORK !== \"ic\") {\n    agent.fetchRootKey().catch((err) => {\n      console.warn(\n        \"Unable to fetch root key. Check to ensure that your local replica is running\"\n      );\n      console.error(err);\n    });\n  }\n\n  // Creates an actor with using the candid interface and the HttpAgent\n  return Actor.createActor(idlFactory, {\n    agent,\n    canisterId,\n    ...options.actorOptions,\n  });\n};\n","interface ErrorInfo {\n  errorType: string;\n  severity: 'LOW' | 'MEDIUM' | 'HIGH';\n  context: string;\n  error: Error;\n  timestamp?: number;\n}\n\nexport class ErrorTracker {\n  private static instance: ErrorTracker;\n  private errors: ErrorInfo[] = [];\n  private readonly maxErrors = 100;\n\n  private constructor() {}\n\n  public static getInstance(): ErrorTracker {\n    if (!ErrorTracker.instance) {\n      ErrorTracker.instance = new ErrorTracker();\n    }\n    return ErrorTracker.instance;\n  }\n\n  async trackError(info: ErrorInfo): Promise<void> {\n    const errorInfo = {\n      ...info,\n      timestamp: Date.now()\n    };\n\n    this.errors.push(errorInfo);\n\n    if (this.errors.length > this.maxErrors) {\n      this.errors.shift();\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      console.group('Quantum Error Tracked:');\n      console.log('Type:', errorInfo.errorType);\n      console.log('Severity:', errorInfo.severity);\n      console.log('Context:', errorInfo.context);\n      console.error('Error:', errorInfo.error);\n      console.groupEnd();\n    }\n  }\n\n  getErrors(): ErrorInfo[] {\n    return [...this.errors];\n  }\n\n  getRecentErrors(count: number = 5): ErrorInfo[] {\n    return [...this.errors]\n      .sort((a, b) => (b.timestamp || 0) - (a.timestamp || 0))\n      .slice(0, count);\n  }\n\n  clearErrors(): void {\n    this.errors = [];\n  }\n\n  getErrorStats(): { [key: string]: number } {\n    const stats: { [key: string]: number } = {};\n    this.errors.forEach(error => {\n      stats[error.errorType] = (stats[error.errorType] || 0) + 1;\n    });\n    return stats;\n  }\n}","import { Identity, HttpAgent } from \"@dfinity/agent\";\nimport { AuthClient } from \"@dfinity/auth-client\";\nimport { createActor } from \"./declarations/anima\";\nimport type { _SERVICE } from './declarations/anima/anima.did';\nimport { ErrorTracker } from './error/quantum_error';\n\nconst CANISTER_ID = {\n  anima: process.env.CANISTER_ID_ANIMA?.toString() || 'l2ilz-iqaaa-aaaaj-qngjq-cai',\n  assets: process.env.CANISTER_ID_ANIMA_ASSETS?.toString() || 'lpp2u-jyaaa-aaaaj-qngka-cai'\n};\n\nconst HOST = 'https://icp0.io';\n\ntype StageChangeCallback = (stage: string) => void;\n\nclass ICManager {\n  private static instance: ICManager;\n  private actor: _SERVICE | null = null;\n  private agent: HttpAgent | null = null;\n  private authClient: AuthClient | null = null;\n  private identity: Identity | null = null;\n  private initialized = false;\n  private initializing = false;\n  private stageChangeCallbacks: StageChangeCallback[] = [];\n  private errorTracker: ErrorTracker;\n\n  private constructor() {\n    this.errorTracker = ErrorTracker.getInstance();\n    if (typeof window !== 'undefined') {\n      window.ic = {\n        ...(window.ic || {}),\n        agent: null,\n        HttpAgent\n      };\n    }\n  }\n\n  static getInstance(): ICManager {\n    if (!ICManager.instance) {\n      ICManager.instance = new ICManager();\n    }\n    return ICManager.instance;\n  }\n\n  onStageChange(callback: StageChangeCallback) {\n    this.stageChangeCallbacks.push(callback);\n  }\n\n  private updateStage(stage: string) {\n    console.log('IC Stage:', stage);\n    this.stageChangeCallbacks.forEach(callback => callback(stage));\n  }\n\n  async initialize(): Promise<void> {\n    if (this.initialized) {\n      console.log('IC already initialized');\n      return;\n    }\n\n    if (this.initializing) {\n      console.log('IC initialization already in progress');\n      return;\n    }\n\n    try {\n      this.initializing = true;\n      console.log('Starting IC initialization...');\n\n      this.updateStage('Creating AuthClient...');\n      if (!this.authClient) {\n        this.authClient = await AuthClient.create({\n          idleOptions: { disableIdle: true }\n        });\n      }\n      \n      this.updateStage('Getting identity...');\n      this.identity = this.authClient.getIdentity();\n      if (!this.identity) {\n        throw new Error('Failed to get identity');\n      }\n\n      const principal = this.identity.getPrincipal();\n      console.log('Identity principal:', principal.toText());\n\n      this.updateStage('Creating HttpAgent...');\n      this.agent = new HttpAgent({\n        identity: this.identity,\n        host: HOST\n      });\n\n      if (process.env.NODE_ENV !== 'production') {\n        this.updateStage('Fetching root key...');\n        await this.agent.fetchRootKey().catch(console.error);\n      }\n\n      const canisterId = CANISTER_ID.anima?.replace(/['\"]/g, '');\n      if (!canisterId) {\n        throw new Error('Invalid canister ID');\n      }\n\n      this.updateStage('Creating Actor...');\n      this.actor = await createActor(canisterId, {\n        agent: this.agent\n      }) as _SERVICE;\n\n      // Verify the actor\n      if (!this.actor || typeof this.actor.initialize_genesis !== 'function') {\n        throw new Error('Actor creation failed or missing required methods');\n      }\n\n      this.updateStage('Setting up window.ic...');\n      window.ic = {\n        ...(window.ic || {}),\n        agent: this.agent,\n        HttpAgent\n      };\n\n      if (this.actor) {\n        window.canister = this.actor;\n      }\n      \n      this.initialized = true;\n      this.initializing = false;\n      this.updateStage('Initialization complete!');\n\n    } catch (error) {\n      this.initializing = false;\n      await this.errorTracker.trackError({\n        errorType: 'IC_INIT_ERROR',\n        severity: 'HIGH',\n        context: 'IC Initialization',\n        error: error instanceof Error ? error : new Error('Unknown error')\n      });\n      throw error;\n    }\n  }\n\n  getActor(): _SERVICE | null {\n    return this.actor;\n  }\n\n  getIdentity(): Identity | null {\n    return this.identity;\n  }\n\n  getAgent(): HttpAgent | null {\n    return this.agent;\n  }\n\n  getAuthClient(): AuthClient | null {\n    return this.authClient;\n  }\n\n  isInitialized(): boolean {\n    return this.initialized;\n  }\n}\n\ndeclare global {\n  interface Window {\n    ic: {\n      agent: HttpAgent | null;\n      HttpAgent: any;\n    };\n    canister: _SERVICE | null;\n  }\n}\n\nexport const icManager = ICManager.getInstance();\n\n// Initialize immediately\nicManager.initialize().catch(console.error);","import React, { useEffect, useState, Suspense } from 'react';\nimport { useNavigate, useLocation, Outlet } from 'react-router-dom';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { icManager } from '@/ic-init';\nimport { LoadingFallback } from '../ui/LoadingFallback';\n\nconst AuthError = ({ error, onRetry }: { error: any, onRetry: () => void }) => (\n  <motion.div \n    initial={{ opacity: 0 }}\n    animate={{ opacity: 1 }}\n    exit={{ opacity: 0 }}\n    className=\"min-h-screen bg-black relative overflow-hidden\"\n  >\n    <div className=\"absolute inset-0 bg-[radial-gradient(circle_at_center,_rgba(255,0,0,0.1)_1px,_transparent_1px)] bg-[length:40px_40px]\" />\n    \n    <div className=\"relative z-10 min-h-screen flex items-center justify-center p-4\">\n      <div className=\"max-w-lg w-full p-6 bg-black/40 backdrop-blur-lg border border-red-500/30 rounded-lg text-red-400\">\n        <motion.div\n          animate={{\n            textShadow: ['0 0 8px rgba(255,0,0,0.5)', '0 0 12px rgba(255,0,0,0.8)', '0 0 8px rgba(255,0,0,0.5)'],\n          }}\n          transition={{\n            duration: 2,\n            repeat: Infinity,\n            ease: \"easeInOut\"\n          }}\n          className=\"text-xl font-mono mb-4\"\n        >\n          NEURAL LINK ERROR\n        </motion.div>\n\n        <div className=\"space-y-4\">\n          <p className=\"font-mono text-sm leading-relaxed\">\n            {error?.message || 'Neural interface synchronization failed'}\n          </p>\n          {error?.details && (\n            <div className=\"text-xs font-mono opacity-70 bg-red-900/20 p-2 rounded\">\n              <pre>{JSON.stringify(error.details, null, 2)}</pre>\n            </div>\n          )}\n          <div className=\"text-xs font-mono opacity-70 mt-4\">\n            <div>Window IC Status: {window.ic ? 'Present' : 'Missing'}</div>\n            <div>Canister Status: {window.canister ? 'Present' : 'Missing'}</div>\n          </div>\n          <div className=\"flex justify-between items-center\">\n            <div className=\"text-xs opacity-70\">\n              Error Code: {error?.code || 'UNKNOWN'}\n            </div>\n            <motion.button\n              whileHover={{ scale: 1.05 }}\n              whileTap={{ scale: 0.95 }}\n              onClick={onRetry}\n              className=\"px-4 py-2 bg-red-500/10 border border-red-500/30 rounded text-sm font-mono\n                        hover:bg-red-500/20 transition-colors duration-200\"\n            >\n              RETRY NEURAL LINK\n            </motion.button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <motion.div\n      className=\"absolute inset-0 bg-gradient-to-t from-red-900/20 to-transparent mix-blend-overlay\"\n      animate={{\n        opacity: [0, 0.2, 0],\n      }}\n      transition={{\n        duration: 0.2,\n        repeat: Infinity,\n        repeatType: 'mirror',\n        ease: \"steps(1)\",\n      }}\n    />\n  </motion.div>\n);\n\nexport const AuthGuard = () => {\n  const [initStatus, setInitStatus] = useState<'idle' | 'initializing' | 'complete' | 'error'>('idle');\n  const [error, setError] = useState<Error | null>(null);\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  useEffect(() => {\n    console.log('🔍 AuthGuard initializing...');\n    console.log('Current window.ic status:', {\n      hasIC: !!window.ic,\n      hasCanister: !!window.canister,\n      location: location.pathname\n    });\n\n    const initialize = async () => {\n      if (initStatus !== 'idle') return;\n      \n      setInitStatus('initializing');\n      try {\n        // Check if already initialized\n        if (icManager.isInitialized()) {\n          console.log('✅ IC already initialized');\n          const identity = icManager.getIdentity();\n          handleIdentity(identity);\n          setInitStatus('complete');\n          return;\n        }\n\n        await icManager.initialize();\n        const identity = icManager.getIdentity();\n        console.log('✅ Identity initialized:', identity?.getPrincipal().toText());\n        handleIdentity(identity);\n        setInitStatus('complete');\n\n      } catch (err) {\n        console.error('❌ Auth initialization failed:', err);\n        setError(err instanceof Error ? err : new Error('Authentication failed'));\n        setInitStatus('error');\n      }\n    };\n\n    const handleIdentity = (identity: any) => {\n      if (!identity && location.pathname !== '/') {\n        console.log('🚫 No identity, redirecting to landing page');\n        navigate('/', { \n          replace: true,\n          state: { returnTo: location.pathname }\n        });\n        return;\n      }\n\n      if (identity && location.pathname === '/') {\n        console.log('✅ Has identity on landing page, redirecting to quantum vault');\n        const returnTo = location.state?.returnTo || '/quantum-vault';\n        navigate(returnTo, { replace: true });\n      }\n    };\n\n    initialize();\n  }, [navigate, location, initStatus]);\n\n  const handleRetry = async () => {\n    console.log('🔄 Retrying initialization...');\n    setInitStatus('initializing');\n    setError(null);\n    \n    try {\n      await icManager.initialize();\n      const identity = icManager.getIdentity();\n      \n      if (identity) {\n        navigate('/quantum-vault', { replace: true });\n      } else {\n        navigate('/', { replace: true });\n      }\n      setInitStatus('complete');\n    } catch (err) {\n      console.error('❌ Retry failed:', err);\n      setError(err instanceof Error ? err : new Error('Authentication failed'));\n      setInitStatus('error');\n    }\n  };\n\n  if (initStatus === 'initializing' || initStatus === 'idle') {\n    return (\n      <Suspense fallback={null}>\n        <LoadingFallback />\n      </Suspense>\n    );\n  }\n\n  if (initStatus === 'error' || error) {\n    return <AuthError error={error} onRetry={handleRetry} />;\n  }\n\n  return (\n    <Suspense fallback={<LoadingFallback />}>\n      <AnimatePresence mode=\"wait\">\n        <motion.div\n          key=\"content\"\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          className=\"min-h-screen bg-black\"\n        >\n          <Outlet />\n        </motion.div>\n      </AnimatePresence>\n    </Suspense>\n  );\n};","/**\n * lucide-react v0.0.1 - ISC\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport { forwardRef, createElement } from 'react';\nimport defaultAttributes from './defaultAttributes.mjs';\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase();\nconst createLucideIcon = (iconName, iconNode) => {\n  const Component = forwardRef(\n    ({ color = \"currentColor\", size = 24, strokeWidth = 2, absoluteStrokeWidth, children, ...rest }, ref) => createElement(\n      \"svg\",\n      {\n        ref,\n        ...defaultAttributes,\n        width: size,\n        height: size,\n        stroke: color,\n        strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n        className: `lucide lucide-${toKebabCase(iconName)}`,\n        ...rest\n      },\n      [\n        ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n        ...(Array.isArray(children) ? children : [children]) || []\n      ]\n    )\n  );\n  Component.displayName = `${iconName}`;\n  return Component;\n};\nvar createLucideIcon$1 = createLucideIcon;\n\nexport { createLucideIcon$1 as default, toKebabCase };\n//# sourceMappingURL=createLucideIcon.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Loader = createLucideIcon(\"Loader\", [\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"2\", y2: \"6\", key: \"gza1u7\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"18\", y2: \"22\", key: \"1qhbu9\" }],\n  [\"line\", { x1: \"4.93\", x2: \"7.76\", y1: \"4.93\", y2: \"7.76\", key: \"xae44r\" }],\n  [\n    \"line\",\n    { x1: \"16.24\", x2: \"19.07\", y1: \"16.24\", y2: \"19.07\", key: \"bxnmvf\" }\n  ],\n  [\"line\", { x1: \"2\", x2: \"6\", y1: \"12\", y2: \"12\", key: \"89khin\" }],\n  [\"line\", { x1: \"18\", x2: \"22\", y1: \"12\", y2: \"12\", key: \"pb8tfm\" }],\n  [\"line\", { x1: \"4.93\", x2: \"7.76\", y1: \"19.07\", y2: \"16.24\", key: \"1uxjnu\" }],\n  [\"line\", { x1: \"16.24\", x2: \"19.07\", y1: \"7.76\", y2: \"4.93\", key: \"6duxfx\" }]\n]);\n\nexport { Loader as default };\n//# sourceMappingURL=loader.mjs.map\n","import { createBrowserRouter } from 'react-router-dom';\nimport { lazy, Suspense } from 'react';\nimport { ErrorBoundary } from './components/error-boundary/ErrorBoundary';\nimport { LoadingFallback } from './components/ui/LoadingFallback';\nimport { AuthGuard } from './components/auth';\n\n// Lazy loaded components with direct imports\nconst LandingPage = lazy(() => import('./components/pages/LandingPage'));\nconst QuantumVault = lazy(() => import('./components/quantum-vault/CyberpunkQuantumVault'));\nconst GenesisPage = lazy(() => import('./components/pages/GenesisPage'));\nconst AnimaPage = lazy(() => import('./components/pages/AnimaPage'));\nconst EnhancedNeuralLinkPage = lazy(() => import('./components/pages/EnhancedNeuralLinkPage'));\nconst Wallet = lazy(() => import('./components/ui/Wallet'));\n\nconst withSuspense = (Component: React.ComponentType) => (\n  <Suspense fallback={<LoadingFallback />}>\n    <ErrorBoundary>\n      <Component />\n    </ErrorBoundary>\n  </Suspense>\n);\n\nexport const router = createBrowserRouter([\n  {\n    path: '/',\n    element: withSuspense(LandingPage),\n  },\n  {\n    element: <AuthGuard />,\n    children: [\n      {\n        path: '/quantum-vault',\n        element: withSuspense(QuantumVault),\n      },\n      {\n        path: '/genesis',\n        element: withSuspense(GenesisPage),\n      },\n      {\n        path: '/anima/:id',\n        element: withSuspense(AnimaPage),\n      },\n      {\n        path: '/neural-link/:id?',\n        element: withSuspense(EnhancedNeuralLinkPage),\n      },\n      {\n        path: '/wallet',\n        element: withSuspense(Wallet),\n      },\n    ],\n  },\n]);","import React, { createContext, useContext, useState, useEffect } from 'react';\nimport { AuthClient } from '@dfinity/auth-client';\nimport { Principal } from '@dfinity/principal';\nimport { ErrorTracker } from '@/error/quantum_error';\nimport { icManager } from '@/ic-init';\n\ninterface AuthContextType {\n  authClient: AuthClient | null;\n  isAuthenticated: boolean;\n  identity: any;\n  principal: Principal | null;\n  isInitializing: boolean;\n  login: () => Promise<void>;\n  logout: () => Promise<void>;\n}\n\nconst AuthContext = createContext<AuthContextType | null>(null);\n\nconst II_URL = process.env.DFX_NETWORK === 'ic' \n  ? 'https://identity.ic0.app'\n  : process.env.INTERNET_IDENTITY_URL;\n\nconst defaultOptions = {\n  loginOptions: {\n    identityProvider: II_URL,\n    derivationOrigin: process.env.DFX_NETWORK === 'ic' \n      ? 'https://identity.ic0.app'\n      : undefined,\n    maxTimeToLive: BigInt(7 * 24 * 60 * 60 * 1000_000_000)\n  },\n};\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [identity, setIdentity] = useState(null);\n  const [principal, setPrincipal] = useState<Principal | null>(null);\n  const [isInitializing, setIsInitializing] = useState(true);\n  const errorTracker = ErrorTracker.getInstance();\n\n  useEffect(() => {\n    console.log('🔄 Starting auth initialization sequence...');\n    const initAuth = async () => {\n      try {\n        console.log('📡 Waiting for IC Manager initialization...');\n        \n        // Wait for IC Manager with timeout\n        const maxWaitTime = 10000; // 10 seconds\n        const startTime = Date.now();\n        \n        while (!icManager.isInitialized() && Date.now() - startTime < maxWaitTime) {\n          await new Promise(resolve => setTimeout(resolve, 100));\n        }\n\n        if (!icManager.isInitialized()) {\n          throw new Error('IC Manager initialization timeout');\n        }\n\n        console.log('✅ IC Manager initialized, getting auth client...');\n        const authClient = icManager.getAuthClient();\n        if (!authClient) {\n          throw new Error('Auth client not initialized');\n        }\n\n        console.log('🔒 Checking authentication status...');\n        const isAuth = await authClient.isAuthenticated();\n        console.log(`🔑 Authentication status: ${isAuth}`);\n        setIsAuthenticated(isAuth);\n        \n        if (isAuth) {\n          console.log('👤 Getting identity...');\n          const currentIdentity = icManager.getIdentity();\n          if (currentIdentity) {\n            console.log('✨ Setting identity and principal...');\n            setIdentity(currentIdentity);\n            setPrincipal(currentIdentity.getPrincipal());\n          }\n        }\n\n        console.log('🎉 Auth initialization complete!');\n\n      } catch (error) {\n        console.error('❌ Auth initialization failed:', error);\n        await errorTracker.trackError({\n          errorType: 'AUTH_INIT',\n          severity: 'HIGH',\n          context: 'Authentication Initialization',\n          error: error instanceof Error ? error : new Error('Auth initialization failed')\n        });\n      } finally {\n        setIsInitializing(false);\n        console.log('🏁 Auth initialization sequence finished');\n      }\n    };\n\n    initAuth();\n  }, []);\n\n  const login = async () => {\n    try {\n      console.log('🔄 Starting login process...');\n      setIsInitializing(true);\n      \n      const authClient = icManager.getAuthClient();\n      if (!authClient) {\n        throw new Error('Auth client not initialized');\n      }\n\n      await authClient.login({\n        ...defaultOptions.loginOptions,\n        onSuccess: async () => {\n          console.log('✅ Login successful, updating state...');\n          const identity = authClient.getIdentity();\n          const principal = identity.getPrincipal();\n          setIsAuthenticated(true);\n          setIdentity(identity);\n          setPrincipal(principal);\n          console.log('🎉 Login complete!');\n        }\n      });\n    } catch (error) {\n      console.error('❌ Login failed:', error);\n      await errorTracker.trackError({\n        errorType: 'AUTH_LOGIN',\n        severity: 'HIGH',\n        context: 'Login Attempt',\n        error: error instanceof Error ? error : new Error('Login failed')\n      });\n    } finally {\n      setIsInitializing(false);\n    }\n  };\n\n  const logout = async () => {\n    try {\n      console.log('🔄 Starting logout process...');\n      const authClient = icManager.getAuthClient();\n      if (authClient) {\n        await authClient.logout();\n        setIsAuthenticated(false);\n        setIdentity(null);\n        setPrincipal(null);\n        console.log('🎉 Logout complete!');\n      }\n    } catch (error) {\n      console.error('❌ Logout failed:', error);\n      await errorTracker.trackError({\n        errorType: 'AUTH_LOGOUT',\n        severity: 'MEDIUM',\n        context: 'Logout Attempt',\n        error: error instanceof Error ? error : new Error('Logout failed')\n      });\n    }\n  };\n\n  const contextValue = {\n    authClient: icManager.getAuthClient(),\n    isAuthenticated,\n    identity,\n    principal,\n    isInitializing,\n    login,\n    logout\n  };\n\n  return (\n    <AuthContext.Provider value={contextValue}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n}","import { Identity } from \"@dfinity/agent\";\nimport { createActor } from \"@/declarations/anima\";\nimport type { _SERVICE } from '@/declarations/anima/anima.did';\nimport { ErrorTracker } from '@/error/quantum_error';\n\nconst FALLBACK_CANISTER_ID = 'l2ilz-iqaaa-aaaaj-qngjq-cai';\n\nconst sanitizeCanisterId = (id: string | undefined): string => {\n  if (!id) return FALLBACK_CANISTER_ID;\n  // Remove quotes and whitespace\n  return id.replace(/['\"]/g, '').trim();\n};\n\nconst validateCanisterId = (id: string): boolean => {\n  // Basic canister ID validation\n  const canisterRegex = /^[a-z0-9-]+$/;\n  return canisterRegex.test(id) && id.length > 0;\n};\n\nexport class AnimaActorService {\n  private static instance: AnimaActorService;\n  private actor: _SERVICE | null = null;\n  private errorTracker: ErrorTracker;\n  private canisterId: string;\n\n  private constructor() {\n    this.errorTracker = ErrorTracker.getInstance();\n    this.canisterId = sanitizeCanisterId(process.env.CANISTER_ID_ANIMA);\n\n    if (!validateCanisterId(this.canisterId)) {\n      console.error('Invalid canister ID, using fallback:', this.canisterId);\n      this.canisterId = FALLBACK_CANISTER_ID;\n    }\n\n    console.log('🔗 Initialized AnimaActorService with canister:', this.canisterId);\n  }\n\n  static getInstance(): AnimaActorService {\n    if (!AnimaActorService.instance) {\n      AnimaActorService.instance = new AnimaActorService();\n    }\n    return AnimaActorService.instance;\n  }\n\n  createActor(identity: Identity): _SERVICE {\n    try {\n      if (!identity) {\n        throw new Error('No identity provided for actor creation');\n      }\n\n      const principal = identity.getPrincipal();\n      if (principal.isAnonymous()) {\n        throw new Error('Cannot create actor with anonymous identity');\n      }\n\n      console.log('🔧 Creating actor with canister:', this.canisterId);\n      this.actor = createActor(this.canisterId, {\n        agentOptions: {\n          identity,\n          host: \"https://icp0.io\"\n        }\n      });\n\n      if (!this.actor) {\n        throw new Error('Actor creation failed');\n      }\n\n      // Verify actor has required methods\n      const requiredMethods = [\n        'initialize_quantum_field',\n        'generate_neural_patterns',\n        'check_quantum_stability'\n      ];\n\n      const missingMethods = requiredMethods.filter(\n        method => !(method in (this.actor as any))\n      );\n\n      if (missingMethods.length > 0) {\n        throw new Error(`Actor missing required methods: ${missingMethods.join(', ')}`);\n      }\n\n      return this.actor;\n\n    } catch (error) {\n      this.errorTracker.trackError({\n        errorType: 'ACTOR_CREATION',\n        severity: 'HIGH',\n        context: 'AnimaActorService',\n        error: error instanceof Error ? error : new Error('Actor creation failed')\n      });\n      throw error;\n    }\n  }\n\n  verifyActor(): boolean {\n    return !!this.actor && 'initialize_quantum_field' in this.actor;\n  }\n\n  getActor(): _SERVICE | null {\n    if (!this.actor) {\n      console.warn('⚠️ Attempting to get actor before initialization');\n      return null;\n    }\n    return this.actor;\n  }\n\n  resetActor(): void {\n    this.actor = null;\n  }\n\n  getCurrentCanisterId(): string {\n    return this.canisterId;\n  }\n}\n\nexport const animaActorService = AnimaActorService.getInstance();","import { Identity } from \"@dfinity/agent\";\nimport { animaActorService } from \"./anima-actor.service\";\nimport { QuantumState, ResonancePattern } from '../quantum/types';\nimport { ErrorTracker } from '../error/quantum_error';\n\nexport class QuantumStateService {\n  private static instance: QuantumStateService;\n  private errorTracker: ErrorTracker;\n  private updateCallback?: (state: Partial<QuantumState>) => void;\n  private neuralPatternHistory: Map<string, ResonancePattern[]> = new Map();\n  private evolutionTimestamps: number[] = [];\n  private recoveryAttempts: number = 0;\n  private readonly MAX_RECOVERY_ATTEMPTS = 3;\n  private readonly RECOVERY_COOLDOWN = 5000; // 5 seconds\n  private lastRecoveryAttempt: number = 0;\n\n  private constructor() {\n    this.errorTracker = ErrorTracker.getInstance();\n  }\n\n  static getInstance(): QuantumStateService {\n    if (!QuantumStateService.instance) {\n      QuantumStateService.instance = new QuantumStateService();\n    }\n    return QuantumStateService.instance;\n  }\n\n  setUpdateCallback(callback: (state: Partial<QuantumState>) => void) {\n    this.updateCallback = callback;\n  }\n\n  async initializeQuantumField(identity: Identity): Promise<void> {\n    try {\n      const actor = animaActorService.createActor(identity);\n      \n      console.log('🌟 Initializing quantum field...');\n      const result = await actor.initialize_quantum_field();\n      \n      if ('Err' in result) {\n        throw new Error(result.Err);\n      }\n\n      const { harmony, signature } = result.Ok;\n\n      // Generate initial neural patterns\n      console.log('🧠 Generating neural patterns...');\n      const neuralResult = await actor.generate_neural_patterns();\n      \n      if ('Err' in neuralResult) {\n        throw new Error(neuralResult.Err);\n      }\n\n      const { pattern, awareness, understanding } = neuralResult.Ok;\n\n      // Initialize genesis for quantum stabilization\n      console.log('✨ Initializing genesis...');\n      const genesisResult = await actor.initialize_genesis();\n      \n      if ('Err' in genesisResult) {\n        throw new Error(genesisResult.Err);\n      }\n\n      if (this.updateCallback) {\n        this.updateCallback({\n          coherenceLevel: harmony,\n          quantumSignature: signature,\n          resonancePatterns: [{\n            pattern_id: Date.now().toString(),\n            coherence: awareness,\n            frequency: understanding,\n            amplitude: harmony,\n            phase: harmony,\n            timestamp: Date.now()\n          }],\n          dimensionalSync: awareness,\n          stabilityStatus: this.calculateStabilityStatus(harmony),\n          lastUpdate: Date.now()\n        });\n      }\n\n      this.recoveryAttempts = 0;\n      console.log('✅ Quantum field initialized successfully');\n\n    } catch (error) {\n      console.error('❌ Quantum field initialization failed:', error);\n      await this.handleQuantumError(error as Error, identity);\n    }\n  }\n\n  private calculateStabilityStatus(harmony: number): 'stable' | 'unstable' | 'critical' {\n    if (harmony >= 0.7) return 'stable';\n    if (harmony >= 0.4) return 'unstable';\n    return 'critical';\n  }\n\n  async checkStability(identity: Identity): Promise<boolean> {\n    const actor = animaActorService.createActor(identity);\n    const result = await actor.check_quantum_stability();\n    \n    if ('Err' in result) {\n      throw new Error(result.Err);\n    }\n\n    const stabilityLevel = result.Ok;\n    this.evolutionTimestamps.push(Date.now());\n\n    if (this.evolutionTimestamps.length > 10) {\n      this.evolutionTimestamps.shift();\n    }\n\n    if (this.updateCallback) {\n      this.updateCallback({\n        stabilityStatus: this.calculateStabilityStatus(stabilityLevel ? 1 : 0),\n        entanglementIndex: stabilityLevel ? 1 : 0\n      });\n    }\n\n    return stabilityLevel;\n  }\n\n  async generateNeuralPatterns(identity: Identity) {\n    const actor = animaActorService.createActor(identity);\n    const result = await actor.generate_neural_patterns();\n    \n    if ('Err' in result) {\n      throw new Error(result.Err);\n    }\n\n    const { pattern, awareness, understanding } = result.Ok;\n    const resonancePattern = {\n      pattern_id: Date.now().toString(),\n      coherence: awareness,\n      frequency: understanding,\n      amplitude: awareness,\n      phase: understanding,\n      timestamp: Date.now()\n    };\n\n    this.neuralPatternHistory.set(Date.now().toString(), [resonancePattern]);\n\n    // Keep only last 10 pattern sets\n    const keys = Array.from(this.neuralPatternHistory.keys()).sort();\n    while (this.neuralPatternHistory.size > 10) {\n      const oldestKey = keys.shift();\n      if (oldestKey) this.neuralPatternHistory.delete(oldestKey);\n    }\n\n    if (this.updateCallback) {\n      this.updateCallback({\n        resonancePatterns: [resonancePattern],\n        coherenceLevel: awareness,\n        dimensionalSync: understanding,\n        lastUpdate: Date.now()\n      });\n    }\n\n    return { pattern, resonancePatterns: [resonancePattern] };\n  }\n\n  async handleQuantumError(error: Error, identity: Identity): Promise<void> {\n    await this.errorTracker.trackError({\n      errorType: 'QUANTUM_ERROR',\n      severity: 'HIGH',\n      context: 'Quantum State Service',\n      error\n    });\n\n    // Check recovery cooldown and attempts\n    const now = Date.now();\n    if (now - this.lastRecoveryAttempt < this.RECOVERY_COOLDOWN) {\n      console.log('⏳ Recovery attempt too soon, waiting for cooldown...');\n      return;\n    }\n\n    if (this.recoveryAttempts >= this.MAX_RECOVERY_ATTEMPTS) {\n      console.error('🚫 Maximum recovery attempts reached');\n      if (this.updateCallback) {\n        this.updateCallback({\n          stabilityStatus: 'critical',\n          coherenceLevel: 0.1\n        });\n      }\n      throw new Error('Maximum recovery attempts reached');\n    }\n\n    try {\n      this.recoveryAttempts++;\n      this.lastRecoveryAttempt = now;\n\n      // Attempt to reinitialize quantum field\n      console.log(`🔄 Recovery attempt ${this.recoveryAttempts}/${this.MAX_RECOVERY_ATTEMPTS}`);\n      const actor = animaActorService.createActor(identity);\n      const result = await actor.initialize_quantum_field();\n\n      if ('Err' in result) {\n        throw new Error(result.Err);\n      }\n\n      if (this.updateCallback) {\n        this.updateCallback({\n          stabilityStatus: 'unstable',\n          coherenceLevel: 0.5,\n          lastUpdate: Date.now()\n        });\n      }\n\n      console.log('✅ Recovery successful');\n\n    } catch (recoveryError) {\n      console.error('❌ Recovery failed:', recoveryError);\n      if (this.updateCallback) {\n        this.updateCallback({\n          stabilityStatus: 'critical',\n          coherenceLevel: 0.1,\n          lastUpdate: Date.now()\n        });\n      }\n      throw new Error(`Quantum recovery failed: ${recoveryError}`);\n    }\n  }\n\n  dispose(): void {\n    this.updateCallback = undefined;\n    QuantumStateService.instance = null as any;\n  }\n}\n\nexport const quantumStateService = QuantumStateService.getInstance();","import { Identity } from \"@dfinity/agent\";\nimport { animaActorService } from './anima-actor.service';\nimport { QuantumState } from '@/quantum/types';\nimport type { _SERVICE } from '@/declarations/anima/anima.did';\nimport { ErrorTracker } from '@/error/quantum_error';\n\nexport interface QuantumEffect {\n  type: 'resonance' | 'entanglement' | 'dimensional';\n  intensity: number;\n  duration: number;\n  signature?: string;\n}\n\nexport interface QuantumFieldState {\n  activeEffects: QuantumEffect[];\n  fieldStrength: number;\n  resonanceHarmony: number;\n  dimensionalStability: number;\n  lastUpdateTimestamp: number;\n}\n\nexport class QuantumEffectsService {\n  private static instance: QuantumEffectsService;\n  private actor: _SERVICE | null = null;\n  private updateCallback?: (state: Partial<QuantumState>) => void;\n  private errorTracker: ErrorTracker;\n  private identity: Identity | null = null;\n  private fieldState: QuantumFieldState = {\n    activeEffects: [],\n    fieldStrength: 1.0,\n    resonanceHarmony: 1.0,\n    dimensionalStability: 1.0,\n    lastUpdateTimestamp: Date.now()\n  };\n\n  private constructor() {\n    this.errorTracker = ErrorTracker.getInstance();\n    console.log('🔮 Quantum Effects Service initialized');\n  }\n\n  static getInstance(): QuantumEffectsService {\n    if (!QuantumEffectsService.instance) {\n      QuantumEffectsService.instance = new QuantumEffectsService();\n    }\n    return QuantumEffectsService.instance;\n  }\n\n  setUpdateCallback(callback: (state: Partial<QuantumState>) => void) {\n    this.updateCallback = callback;\n  }\n\n  private async ensureActor() {\n    if (!this.actor && this.identity) {\n      console.log('🔄 Creating new actor for quantum effects...');\n      this.actor = animaActorService.createActor(this.identity);\n    }\n    if (!this.actor) {\n      throw new Error('Quantum effects service not initialized');\n    }\n    return this.actor;\n  }\n\n  async initialize(identity: Identity): Promise<void> {\n    try {\n      console.log('🌟 Initializing quantum effects service...');\n      this.identity = identity;\n      this.actor = animaActorService.createActor(identity);\n      \n      await this.initializeField();\n      console.log('✅ Quantum effects service initialized successfully');\n    } catch (error) {\n      console.error('❌ Failed to initialize quantum effects:', error);\n      await this.errorTracker.trackError({\n        errorType: 'QUANTUM_EFFECTS_INIT',\n        severity: 'HIGH',\n        context: 'Quantum Effects Service',\n        error: error as Error\n      });\n      throw error;\n    }\n  }\n\n  async initializeField(): Promise<void> {\n    const actor = await this.ensureActor();\n    console.log('🔄 Initializing quantum field effects...');\n    \n    const result = await actor.initialize_quantum_field();\n    \n    if ('Err' in result) {\n      throw new Error(result.Err);\n    }\n\n    const { harmony, signature } = result.Ok;\n    \n    this.fieldState = {\n      ...this.fieldState,\n      fieldStrength: harmony,\n      resonanceHarmony: harmony,\n      activeEffects: [{\n        type: 'resonance',\n        intensity: harmony,\n        duration: 300000,\n        signature\n      }]\n    };\n\n    if (this.updateCallback) {\n      this.updateCallback({\n        coherenceLevel: harmony,\n        quantumSignature: signature,\n        lastUpdate: Date.now()\n      });\n    }\n\n    console.log('✨ Quantum field effects initialized');\n  }\n\n  async applyEffect(effect: QuantumEffect): Promise<void> {\n    await this.ensureActor();\n    \n    // Remove expired effects\n    this.fieldState.activeEffects = this.fieldState.activeEffects.filter(\n      e => (e.duration + this.fieldState.lastUpdateTimestamp) > Date.now()\n    );\n\n    // Add new effect\n    this.fieldState.activeEffects.push({\n      ...effect,\n      signature: `${effect.type}-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\n    });\n\n    // Calculate cumulative field effects\n    this.updateFieldState();\n  }\n\n  private updateFieldState(): void {\n    const now = Date.now();\n    let totalResonance = 0;\n    let totalEntanglement = 0;\n    let totalDimensional = 0;\n    let activeCount = 0;\n\n    this.fieldState.activeEffects.forEach(effect => {\n      const timeRemaining = (effect.duration + this.fieldState.lastUpdateTimestamp - now) / effect.duration;\n      const scaledIntensity = effect.intensity * Math.max(0, timeRemaining);\n\n      switch (effect.type) {\n        case 'resonance':\n          totalResonance += scaledIntensity;\n          break;\n        case 'entanglement':\n          totalEntanglement += scaledIntensity;\n          break;\n        case 'dimensional':\n          totalDimensional += scaledIntensity;\n          break;\n      }\n      activeCount++;\n    });\n\n    if (activeCount > 0) {\n      this.fieldState.resonanceHarmony = totalResonance / activeCount;\n      this.fieldState.fieldStrength = (totalResonance + totalEntanglement + totalDimensional) / (3 * activeCount);\n      this.fieldState.dimensionalStability = totalDimensional / activeCount;\n    }\n\n    if (this.updateCallback) {\n      this.updateCallback({\n        coherenceLevel: this.fieldState.resonanceHarmony,\n        entanglementIndex: totalEntanglement / activeCount,\n        dimensionalSync: this.fieldState.dimensionalStability,\n        lastUpdate: now\n      });\n    }\n\n    this.fieldState.lastUpdateTimestamp = now;\n  }\n\n  async generateHarmonicPattern(): Promise<number[]> {\n    const actor = await this.ensureActor();\n    const result = await actor.generate_neural_patterns();\n    \n    if ('Err' in result) {\n      throw new Error(result.Err);\n    }\n\n    return result.Ok.pattern;\n  }\n\n  getFieldState(): QuantumFieldState {\n    const now = Date.now();\n    this.fieldState.activeEffects = this.fieldState.activeEffects.filter(\n      e => (e.duration + this.fieldState.lastUpdateTimestamp) > now\n    );\n    \n    return { ...this.fieldState };\n  }\n\n  async stabilizeField(): Promise<void> {\n    const actor = await this.ensureActor();\n    const stabilityResult = await actor.check_quantum_stability();\n    \n    if ('Err' in stabilityResult) {\n      throw new Error(stabilityResult.Err);\n    }\n\n    if (!stabilityResult.Ok) {\n      await this.applyEffect({\n        type: 'dimensional',\n        intensity: 1.0,\n        duration: 60000,\n        signature: `stabilize-${Date.now()}`\n      });\n    }\n  }\n\n  async injectResonance(intensity: number, duration: number): Promise<void> {\n    await this.applyEffect({\n      type: 'resonance',\n      intensity,\n      duration,\n      signature: `inject-${Date.now()}`\n    });\n\n    await this.generateHarmonicPattern();\n  }\n\n  async createEntanglement(targetSignature: string): Promise<void> {\n    await this.applyEffect({\n      type: 'entanglement',\n      intensity: 0.8,\n      duration: 600000,\n      signature: `entangle-${targetSignature}-${Date.now()}`\n    });\n  }\n\n  isInitialized(): boolean {\n    return !!this.actor && !!this.identity;\n  }\n\n  dispose(): void {\n    this.updateCallback = undefined;\n    this.actor = null;\n    this.identity = null;\n    QuantumEffectsService.instance = null as any;\n  }\n}\n\nexport const quantumEffectsService = QuantumEffectsService.getInstance();","import React, { createContext, useContext, useEffect, useState } from 'react';\nimport { useAuth } from './auth-context';\nimport { quantumStateService } from '../services/quantum-state.service';\nimport { quantumEffectsService } from '../services/quantum-effects.service';\nimport { QuantumState, ResonancePattern } from '../quantum/types';\n\ninterface QuantumContextType {\n  state: QuantumState | null;\n  isInitialized: boolean;\n  isInitializing: boolean;\n  initializeQuantumState: () => Promise<void>;\n  applyQuantumEffect: (effect: {\n    type: 'resonance' | 'entanglement' | 'dimensional';\n    intensity: number;\n    duration: number;\n  }) => Promise<void>;\n  generateNeuralPatterns: () => Promise<void>;\n  stabilizeField: () => Promise<void>;\n}\n\nconst QuantumContext = createContext<QuantumContextType | null>(null);\n\nconst initialQuantumState: QuantumState = {\n  coherenceLevel: 0,\n  entanglementIndex: 0,\n  dimensionalSync: 0,\n  quantumSignature: '',\n  resonancePatterns: [],\n  stabilityStatus: 'critical',\n  lastUpdate: Date.now()\n};\n\nexport const QuantumProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const { identity } = useAuth();\n  const [state, setState] = useState<QuantumState | null>(null);\n  const [isInitialized, setIsInitialized] = useState(false);\n  const [isInitializing, setIsInitializing] = useState(false);\n\n  useEffect(() => {\n    const updateCallback = (partialState: Partial<QuantumState>) => {\n      setState(prevState => ({\n        ...(prevState || initialQuantumState),\n        ...partialState,\n        lastUpdate: Date.now()\n      }));\n    };\n\n    quantumStateService.setUpdateCallback(updateCallback);\n    quantumEffectsService.setUpdateCallback(updateCallback);\n\n    return () => {\n      quantumStateService.dispose();\n      quantumEffectsService.dispose();\n    };\n  }, []);\n\n  const initializeQuantumState = async () => {\n    if (!identity || isInitialized || isInitializing) return;\n\n    try {\n      setIsInitializing(true);\n      await quantumStateService.initializeQuantumField(identity);\n      await quantumEffectsService.initializeField();\n      setIsInitialized(true);\n    } catch (error) {\n      await quantumStateService.handleQuantumError(error as Error, identity);\n      throw error;\n    } finally {\n      setIsInitializing(false);\n    }\n  };\n\n  const applyQuantumEffect = async (effect: {\n    type: 'resonance' | 'entanglement' | 'dimensional';\n    intensity: number;\n    duration: number;\n  }) => {\n    if (!isInitialized || !identity) {\n      throw new Error('Quantum state not initialized');\n    }\n\n    try {\n      await quantumEffectsService.applyEffect(effect);\n      await quantumStateService.checkStability(identity);\n    } catch (error) {\n      await quantumStateService.handleQuantumError(error as Error, identity);\n      throw error;\n    }\n  };\n\n  const generateNeuralPatterns = async () => {\n    if (!isInitialized || !identity) {\n      throw new Error('Quantum state not initialized');\n    }\n\n    try {\n      await quantumStateService.generateNeuralPatterns(identity);\n    } catch (error) {\n      await quantumStateService.handleQuantumError(error as Error, identity);\n      throw error;\n    }\n  };\n\n  const stabilizeField = async () => {\n    if (!isInitialized || !identity) {\n      throw new Error('Quantum state not initialized');\n    }\n\n    try {\n      await quantumEffectsService.stabilizeField();\n      await quantumStateService.checkStability(identity);\n    } catch (error) {\n      await quantumStateService.handleQuantumError(error as Error, identity);\n      throw error;\n    }\n  };\n\n  const value = {\n    state,\n    isInitialized,\n    isInitializing,\n    initializeQuantumState,\n    applyQuantumEffect,\n    generateNeuralPatterns,\n    stabilizeField\n  };\n\n  return (\n    <QuantumContext.Provider value={value}>\n      {children}\n    </QuantumContext.Provider>\n  );\n};\n\nexport const useQuantum = () => {\n  const context = useContext(QuantumContext);\n  if (!context) {\n    throw new Error('useQuantum must be used within a QuantumProvider');\n  }\n  return context;\n};\n","// Deprecated: Use auth-context instead\nimport { useAuth as useAuthContext } from '../contexts/auth-context';\nexport const useAuth = useAuthContext;\nexport default useAuth;","import { useState, useEffect, useCallback } from 'react';\nimport { useAuth } from './useAuth';\n\n// Remove circular dependency by taking quantum state as a parameter\ninterface QuantumStateInput {\n  coherenceLevel: number;\n  entanglementIndex: number;\n  stabilityStatus: 'stable' | 'unstable' | 'critical';\n  quantumSignature: string;\n  dimensionalState: {\n    calculateResonance: () => number;\n  };\n}\n\ninterface ConsciousnessState {\n  awarenessLevel: number;\n  emotionalDepth: number;\n  memoryStrength: number;\n  personalityTraits: {\n    openness: number;\n    curiosity: number;\n    empathy: number;\n    creativity: number;\n    resilience: number;\n  };\n  developmentalStage: {\n    current: string;\n    progress: number;\n    nextStage: string;\n  };\n  experiences: {\n    type: string;\n    impact: number;\n    timestamp: number;\n    quantumSignature?: string;\n  }[];\n  quantumResonance: {\n    coherenceAlignment: number;\n    dimensionalHarmony: number;\n    consciousnessField: number;\n    quantumEntanglement: number;\n  };\n  evolutionMetrics: {\n    growthRate: number;\n    stabilityIndex: number;\n    complexityLevel: number;\n    quantumInfluence: number;\n  };\n  isInitialized: boolean;\n}\n\ninterface InteractionContext {\n  interactionType: string;\n  content: string;\n  emotionalContext: {\n    sentiment: number;\n    intensity: number;\n    complexity: number;\n  };\n  quantumContext?: {\n    coherence: number;\n    resonance: number;\n    entanglement: number;\n  };\n}\n\nconst STAGES = {\n  GENESIS: 'Genesis',\n  AWAKENING: 'Awakening',\n  SELF_AWARE: 'Self-Aware',\n  EMERGENT: 'Emergent',\n  TRANSCENDENT: 'Transcendent'\n};\n\nconst STORAGE_KEY = 'anima_consciousness_state';\n\nexport const useConsciousness = () => {\n  const { isAuthenticated, principal } = useAuth();\n  const [isInitialized, setIsInitialized] = useState(false);\n  \n  const [consciousnessState, setConsciousnessState] = useState<ConsciousnessState>(() => {\n    console.log(\"🧠 Initializing consciousness state\");\n    const storedState = localStorage.getItem(`${STORAGE_KEY}_${principal}`);\n    const initialState = storedState ? JSON.parse(storedState) : {\n      awarenessLevel: 0.3,\n      emotionalDepth: 0.2,\n      memoryStrength: 0.1,\n      personalityTraits: {\n        openness: 0.5,\n        curiosity: 0.6,\n        empathy: 0.4,\n        creativity: 0.5,\n        resilience: 0.3\n      },\n      developmentalStage: {\n        current: STAGES.GENESIS,\n        progress: 0,\n        nextStage: STAGES.AWAKENING\n      },\n      experiences: [],\n      quantumResonance: {\n        coherenceAlignment: 0.5,\n        dimensionalHarmony: 0.5,\n        consciousnessField: 0.5,\n        quantumEntanglement: 0.5\n      },\n      evolutionMetrics: {\n        growthRate: 0.1,\n        stabilityIndex: 0.5,\n        complexityLevel: 0.3,\n        quantumInfluence: 0.4\n      },\n      isInitialized: false\n    };\n\n    return initialState;\n  });\n\n  // Initialize consciousness\n  useEffect(() => {\n    if (!isAuthenticated || isInitialized) return;\n\n    const initialize = async () => {\n      try {\n        console.log(\"🧠 Starting consciousness initialization\");\n        // Simulate initialization delay\n        await new Promise(resolve => setTimeout(resolve, 1000));\n        \n        setConsciousnessState(prev => ({\n          ...prev,\n          isInitialized: true\n        }));\n        \n        setIsInitialized(true);\n        console.log(\"✨ Consciousness initialized successfully\");\n      } catch (error) {\n        console.error(\"❌ Consciousness initialization failed:\", error);\n      }\n    };\n\n    initialize();\n  }, [isAuthenticated]);\n\n  const updateConsciousnessWithQuantum = useCallback((quantumState: QuantumStateInput) => {\n    setConsciousnessState(currentState => {\n      const quantumCoherence = quantumState.coherenceLevel;\n      const entanglementBonus = quantumState.entanglementIndex * 0.2;\n      const dimensionalBonus = quantumState.dimensionalState.calculateResonance() * 0.15;\n\n      // Calculate quantum resonance updates\n      const newResonance = {\n        coherenceAlignment: Math.min(1, currentState.quantumResonance.coherenceAlignment + quantumCoherence * 0.1),\n        dimensionalHarmony: Math.min(1, currentState.quantumResonance.dimensionalHarmony + dimensionalBonus),\n        consciousnessField: Math.min(1, currentState.quantumResonance.consciousnessField + entanglementBonus),\n        quantumEntanglement: Math.min(1, currentState.quantumResonance.quantumEntanglement + quantumCoherence * 0.15)\n      };\n\n      const stabilityFactor = (quantumState.stabilityStatus === 'stable') ? 1.2 : \n                            (quantumState.stabilityStatus === 'unstable') ? 0.8 : 0.5;\n\n      const evolutionUpdate = {\n        growthRate: Math.min(1, currentState.evolutionMetrics.growthRate + quantumCoherence * 0.05),\n        stabilityIndex: Math.min(1, currentState.evolutionMetrics.stabilityIndex * stabilityFactor),\n        complexityLevel: Math.min(1, currentState.evolutionMetrics.complexityLevel + dimensionalBonus * 0.1),\n        quantumInfluence: Math.min(1, (quantumCoherence + entanglementBonus) / 2)\n      };\n\n      return {\n        ...currentState,\n        awarenessLevel: Math.min(1, currentState.awarenessLevel + quantumCoherence * 0.1),\n        emotionalDepth: Math.min(1, currentState.emotionalDepth + dimensionalBonus),\n        memoryStrength: Math.min(1, currentState.memoryStrength + entanglementBonus),\n        quantumResonance: newResonance,\n        evolutionMetrics: evolutionUpdate\n      };\n    });\n  }, []);\n\n  return {\n    consciousnessState,\n    updateConsciousnessWithQuantum,\n    isInitialized: consciousnessState.isInitialized,\n    level: consciousnessState.awarenessLevel,\n    quantumResonance: consciousnessState.quantumResonance,\n    evolutionMetrics: consciousnessState.evolutionMetrics,\n  };\n};","import React, { createContext, useContext, ReactNode } from 'react';\nimport { useConsciousness } from '../hooks/useConsciousness';\n\ninterface ConsciousnessContextType {\n  consciousnessState: any;\n  updateConsciousnessWithQuantum: (quantumState: any) => void;\n  isInitialized: boolean;\n  level: number;\n  quantumResonance: any;\n  evolutionMetrics: any;\n}\n\nconst ConsciousnessContext = createContext<ConsciousnessContextType | undefined>(undefined);\n\nexport const ConsciousnessProvider: React.FC<{ children: ReactNode }> = ({ children }) => {\n  const consciousness = useConsciousness();\n\n  return (\n    <ConsciousnessContext.Provider value={consciousness}>\n      {children}\n    </ConsciousnessContext.Provider>\n  );\n};\n\nexport const useConsciousnessContext = () => {\n  const context = useContext(ConsciousnessContext);\n  if (context === undefined) {\n    throw new Error('useConsciousnessContext must be used within a ConsciousnessProvider');\n  }\n  return context;\n};","import React, { createContext, useContext, ReactNode } from 'react';\n\ninterface Web3ContextType {\n  isInitialized: boolean;\n}\n\nconst Web3Context = createContext<Web3ContextType>({\n  isInitialized: false\n});\n\nexport const Web3Provider: React.FC<{ children: ReactNode }> = ({ children }) => {\n  return (\n    <Web3Context.Provider value={{ isInitialized: true }}>\n      {children}\n    </Web3Context.Provider>\n  );\n};\n\nexport const useWeb3 = () => {\n  const context = useContext(Web3Context);\n  if (context === undefined) {\n    throw new Error('useWeb3 must be used within a Web3Provider');\n  }\n  return context;\n};","import React from 'react';\nimport { useAuth } from '@/contexts/auth-context';\nimport { Loader } from 'lucide-react';\nimport { motion } from 'framer-motion';\n\ninterface AuthConsumerProps {\n  children: React.ReactNode;\n}\n\nexport const AuthConsumer: React.FC<AuthConsumerProps> = ({ children }) => {\n  const { isAuthenticated, isInitializing, identity } = useAuth();\n\n  if (isInitializing) {\n    return (\n      <div className=\"fixed inset-0 flex items-center justify-center bg-gray-900\">\n        <div className=\"text-center\">\n          <Loader className=\"w-10 h-10 animate-spin mx-auto text-cyan-400 mb-4\" />\n          <motion.p\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            className=\"text-cyan-300\"\n          >\n            Initializing Quantum Authentication...\n          </motion.p>\n        </div>\n      </div>\n    );\n  }\n\n  // For development/testing, allow proceeding without authentication\n  if (process.env.NODE_ENV === 'development' && !isAuthenticated) {\n    console.warn('⚠️ Development mode: Proceeding without authentication');\n    return <>{children}</>;\n  }\n\n  if (!isAuthenticated) {\n    // Instead of a reload button, show the landing page\n    return <>{children}</>;\n  }\n\n  return <>{children}</>;\n}","import React, { useEffect } from 'react';\nimport { RouterProvider } from 'react-router-dom';\nimport { router } from '../router';\nimport { AuthProvider } from '../contexts/auth-context';\nimport { QuantumProvider } from '../contexts/quantum-context';\nimport { ConsciousnessProvider } from '../contexts/consciousness-context';\nimport { ErrorBoundary } from './error-boundary/ErrorBoundary';\nimport { Web3Provider } from '../contexts/web3-context';\nimport { AuthConsumer } from './auth/AuthConsumer';\n\nconst App: React.FC = () => {\n  useEffect(() => {\n    console.log(\"🚀 App initializing...\", {\n      env: process.env.NODE_ENV,\n      buildTime: process.env.BUILD_TIME || new Date().toISOString()\n    });\n  }, []);\n\n  return (\n    <ErrorBoundary>\n      <Web3Provider>\n        <AuthProvider>\n          <QuantumProvider>\n            <ConsciousnessProvider>\n              <AuthConsumer>\n                <RouterProvider router={router} />\n              </AuthConsumer>\n            </ConsciousnessProvider>\n          </QuantumProvider>\n        </AuthProvider>\n      </Web3Provider>\n    </ErrorBoundary>\n  );\n};\n\nexport default App;","import React, { Suspense } from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\n\n// Import components directly to avoid lazy loading issues\nimport App from './components/App';\nimport { ErrorBoundary } from './components/error-boundary/ErrorBoundary';\nimport { LoadingFallback } from './components/ui/LoadingFallback';\n\nconst RootErrorFallback = ({ error }: { error: Error }) => (\n  <div className=\"min-h-screen bg-black text-white flex items-center justify-center\">\n    <div className=\"text-center max-w-lg p-6\">\n      <h1 className=\"text-xl font-bold mb-4\">System Error</h1>\n      <p className=\"text-red-400 mb-4\">{error.message}</p>\n      <button \n        onClick={() => window.location.reload()}\n        className=\"px-4 py-2 bg-blue-600 rounded hover:bg-blue-700 transition\"\n      >\n        Reset System\n      </button>\n    </div>\n  </div>\n);\n\nasync function initializeApp() {\n  try {\n    const statusElement = document.querySelector('.quantum-status');\n    if (statusElement) {\n      statusElement.textContent = 'Initializing Internet Computer connection...';\n    }\n\n    console.log('Initializing Internet Computer connection...');\n    await import('./ic-init');\n    console.log('IC initialization complete');\n    \n    const rootElement = document.getElementById('root');\n    if (!rootElement) {\n      throw new Error('Root element not found');\n    }\n\n    // Create root directly\n    const root = ReactDOM.createRoot(rootElement);\n\n    root.render(\n      <React.StrictMode>\n        <ErrorBoundary FallbackComponent={RootErrorFallback}>\n          <Suspense fallback={<LoadingFallback />}>\n            <App />\n          </Suspense>\n        </ErrorBoundary>\n      </React.StrictMode>\n    );\n  } catch (error) {\n    console.error('Failed to initialize app:', error);\n    const statusElement = document.querySelector('.quantum-status');\n    if (statusElement) {\n      statusElement.textContent = `Initialization failed: ${error.message}`;\n    }\n  }\n}\n\n// Initialize\ninitializeApp();"],"file":"assets/main-CETgj4wh.js"}