{"version":3,"file":"WaveformGenerator-vm3I3tDX.js","sources":["../../src/hooks/useActor.ts","../../src/hooks/useQuantumState.js","../../src/components/personality/WaveformGenerator.tsx"],"sourcesContent":["import { useCallback } from 'react';\nimport { Actor, HttpAgent } from '@dfinity/agent';\nimport { useAuth } from './useAuth';\nimport { canisterId, createActor } from '../declarations/anima';\n\nexport const useActor = () => {\n  const { identity } = useAuth();\n\n  const getActor = useCallback(async () => {\n    if (!identity) {\n      throw new Error('No identity available');\n    }\n\n    const agent = new HttpAgent({ identity });\n\n    // Only fetch root key in development\n    if (process.env.NODE_ENV !== 'production') {\n      await agent.fetchRootKey();\n    }\n\n    return createActor(canisterId, {\n      agent,\n    });\n  }, [identity]);\n\n  return {\n    getActor,\n  };\n};\n\nexport default useActor;","import { useState, useCallback, useContext } from 'react';\nimport { useActor } from './useActor';\nimport { toast } from '@/components/ui/use-toast';\n\nexport const useQuantumState = (animaId) => {\n  const [isObserving, setIsObserving] = useState(false);\n  const [isEntangling, setIsEntangling] = useState(false);\n  const actor = useActor();\n\n  const observeState = useCallback(async () => {\n    if (!actor || !animaId) return null;\n    setIsObserving(true);\n    \n    try {\n      const state = await actor.observe_quantum_state(animaId);\n      return state;\n    } catch (error) {\n      toast({\n        title: \"Quantum Observation Failed\",\n        description: \"The quantum state collapsed during observation.\",\n        variant: \"destructive\",\n      });\n      return null;\n    } finally {\n      setIsObserving(false);\n    }\n  }, [actor, animaId]);\n\n  const initiateEntanglement = useCallback(async (targetId) => {\n    if (!actor || !animaId) return false;\n    setIsEntangling(true);\n    \n    try {\n      const result = await actor.attempt_quantum_entanglement(animaId, targetId);\n      \n      if ('Ok' in result) {\n        toast({\n          title: \"Quantum Entanglement Successful\",\n          description: \"A new quantum connection has been established.\",\n        });\n        return true;\n      } else {\n        toast({\n          title: \"Entanglement Failed\",\n          description: \"Unable to establish quantum connection.\",\n          variant: \"destructive\",\n        });\n        return false;\n      }\n    } catch (error) {\n      toast({\n        title: \"Entanglement Error\",\n        description: \"An unexpected error occurred during entanglement.\",\n        variant: \"destructive\",\n      });\n      return false;\n    } finally {\n      setIsEntangling(false);\n    }\n  }, [actor, animaId]);\n\n  const getMetrics = useCallback(async () => {\n    if (!actor || !animaId) return null;\n    \n    try {\n      const metrics = await actor.get_quantum_metrics(animaId);\n      return metrics;\n    } catch (error) {\n      console.error('Failed to fetch quantum metrics:', error);\n      return null;\n    }\n  }, [actor, animaId]);\n\n  return {\n    observeState,\n    initiateEntanglement,\n    getMetrics,\n    isObserving,\n    isEntangling,\n  };\n};\n","import React, { useRef, useEffect } from 'react';\n\ntype WaveformProps = {\n  type: 'Stable' | 'Fluctuating' | 'Entangled';\n  amplitude: number;\n  frequency: number;\n  className?: string;\n};\n\nexport const WaveformGenerator: React.FC<WaveformProps> = ({\n  type,\n  amplitude,\n  frequency,\n  className = ''\n}) => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  useEffect(() => {\n    if (!canvasRef.current) return;\n\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n\n    // Set up animation\n    let animationFrameId: number;\n    let time = 0;\n\n    const render = () => {\n      if (!canvas || !ctx) return;\n\n      // Clear canvas\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n      // Set line style\n      ctx.lineWidth = 2;\n      ctx.strokeStyle = type === 'Entangled' \n        ? '#FF61DC' // quantum-pink\n        : '#7B61FF'; // quantum-purple\n\n      // Start drawing path\n      ctx.beginPath();\n      ctx.moveTo(0, canvas.height / 2);\n\n      // Generate waveform based on type\n      for (let x = 0; x < canvas.width; x++) {\n        let y = canvas.height / 2;\n\n        switch (type) {\n          case 'Stable':\n            // Straight line with slight noise\n            y += Math.random() * 2 - 1;\n            break;\n\n          case 'Fluctuating':\n            // Sine wave with varying amplitude\n            y += Math.sin(x * frequency + time) * \n                 amplitude * (canvas.height / 4);\n            break;\n\n          case 'Entangled':\n            // Double sine wave with phase relationship\n            const wave1 = Math.sin(x * frequency + time) * \n                         amplitude * (canvas.height / 6);\n            const wave2 = Math.sin(x * frequency + time + Math.PI) * \n                         amplitude * (canvas.height / 6);\n            y += (wave1 + wave2) / 2;\n            break;\n        }\n\n        ctx.lineTo(x, y);\n      }\n\n      // Stroke the path\n      ctx.stroke();\n\n      // Update time for animation\n      time += 0.05;\n\n      // Request next frame\n      animationFrameId = requestAnimationFrame(render);\n    };\n\n    render();\n\n    return () => {\n      cancelAnimationFrame(animationFrameId);\n    };\n  }, [type, amplitude, frequency]);\n\n  return (\n    <canvas\n      ref={canvasRef}\n      className={`w-full h-full ${className}`}\n      style={{\n        filter: type === 'Entangled' \n          ? 'drop-shadow(0 0 8px rgba(255, 97, 220, 0.3))' \n          : 'drop-shadow(0 0 8px rgba(123, 97, 255, 0.3))'\n      }}\n    />\n  );\n};"],"names":["useActor","identity","useAuth","getActor","useCallback","Error","agent","HttpAgent","createActor","canisterId","useQuantumState","animaId","isObserving","setIsObserving","useState","isEntangling","setIsEntangling","actor","observeState","initiateEntanglement","targetId","getMetrics","WaveformGenerator","type","amplitude","frequency","className","canvasRef","useRef","useEffect","current","canvas","ctx","getContext","animationFrameId","time","render","clearRect","width","height","lineWidth","strokeStyle","beginPath","moveTo","x","y","Math","random","sin","wave1","wave2","PI","lineTo","stroke","requestAnimationFrame","cancelAnimationFrame","ref","style","filter"],"mappings":"sLAKO,MAAMA,EAAWA,IAAM,CACtB,KAAA,CAAEC,SAAAA,GAAaC,EAAQ,EAmBtB,MAAA,CACLC,SAlBeC,EAAAA,YAAY,SAAY,CACvC,GAAI,CAACH,EACG,MAAA,IAAII,MAAM,uBAAuB,EAGnCC,MAAAA,EAAQ,IAAIC,EAAU,CAAEN,SAAAA,CAAAA,CAAU,EAOxC,OAAOO,EAAYC,EAAY,CAC7BH,MAAAA,CAAAA,CACD,CAAA,EACA,CAACL,CAAQ,CAAC,CAIb,CACF,ECxBaS,EAAmBC,GAAY,CAC1C,KAAM,CAACC,EAAaC,CAAc,EAAIC,EAAAA,SAAS,EAAK,EAC9C,CAACC,EAAcC,CAAe,EAAIF,EAAAA,SAAS,EAAK,EAChDG,EAAQjB,EAAU,EAElBkB,EAAed,EAAAA,YAAY,SACA,KAgB9B,CAACa,EAAON,CAAO,CAAC,EAEbQ,EAAuBf,cAAY,MAAOgB,GACf,GA8B9B,CAACH,EAAON,CAAO,CAAC,EAEbU,EAAajB,EAAAA,YAAY,SACE,KAS9B,CAACa,EAAON,CAAO,CAAC,EAEnB,MAAO,CACLO,aAAAA,EACAC,qBAAAA,EACAE,WAAAA,EACAT,YAAAA,EACAG,aAAAA,CACD,CACH,ECvEaO,EAA6CA,CAAC,CACzDC,KAAAA,EACAC,UAAAA,EACAC,UAAAA,EACAC,UAAAA,EAAY,EACd,IAAM,CACEC,MAAAA,EAAYC,SAA0B,IAAI,EAEhDC,OAAAA,EAAAA,UAAU,IAAM,CACV,GAAA,CAACF,EAAUG,QAAS,OAExB,MAAMC,EAASJ,EAAUG,QACnBE,EAAMD,EAAOE,WAAW,IAAI,EAClC,GAAI,CAACD,EAAK,OAGNE,IAAAA,EACAC,EAAO,EAEX,MAAMC,EAASA,IAAM,CACf,GAAA,GAACL,GAAU,CAACC,GAGhBA,CAAAA,EAAIK,UAAU,EAAG,EAAGN,EAAOO,MAAOP,EAAOQ,MAAM,EAG/CP,EAAIQ,UAAY,EACZC,EAAAA,YAAclB,IAAS,YACvB,UACA,UAGJS,EAAIU,UAAU,EACdV,EAAIW,OAAO,EAAGZ,EAAOQ,OAAS,CAAC,EAG/B,QAASK,EAAI,EAAGA,EAAIb,EAAOO,MAAOM,IAAK,CACjCC,IAAAA,EAAId,EAAOQ,OAAS,EAExB,OAAQhB,EAAI,CACV,IAAK,SAEEuB,GAAAA,KAAKC,OAAO,EAAI,EAAI,EACzB,MAEF,IAAK,cAEED,GAAAA,KAAKE,IAAIJ,EAAInB,EAAYU,CAAI,EAC7BX,GAAaO,EAAOQ,OAAS,GAClC,MAEF,IAAK,YAEGU,MAAAA,EAAQH,KAAKE,IAAIJ,EAAInB,EAAYU,CAAI,EAC9BX,GAAaO,EAAOQ,OAAS,GACpCW,EAAQJ,KAAKE,IAAIJ,EAAInB,EAAYU,EAAOW,KAAKK,EAAE,EACxC3B,GAAaO,EAAOQ,OAAS,GAC1CM,IAAMI,EAAQC,GAAS,EACvB,KAAA,CAGAE,EAAAA,OAAOR,EAAGC,CAAC,CAAA,CAIjBb,EAAIqB,OAAO,EAGHlB,GAAA,IAGRD,EAAmBoB,sBAAsBlB,CAAM,EACjD,EAEO,OAAAA,EAAA,EAEA,IAAM,CACXmB,qBAAqBrB,CAAgB,CACvC,CACC,EAAA,CAACX,EAAMC,EAAWC,CAAS,CAAC,QAG7B,SAAA,CACE+B,IAAK7B,EACLD,UAAW,iBAAiBA,CAAS,GACrC+B,MAAO,CACLC,OAAQnC,IAAS,YACb,+CACA,8CAAA,CACN,CACD,CAEL"}