import{r as l,e as q,u as E}from"./vendor-5D7zIO-3.js";import{u as M,a as $,W as L}from"./WaveformGenerator-BVUp_W1l.js";import{u as O}from"./anima-context-Di824KZf.js";import{C as R,E as B}from"./EmotionalState-D_SfqYF2.js";import{Q as G}from"./QuantumField-DHV91S0x.js";import{u as z,L as F}from"./main-62z6StZH.js";import{j as e,m as u,A as P}from"./framer-DtKNVek7.js";import"./useAuth-DGQ0HXN9.js";const Q=a=>{const{anima:s,loading:o,error:c}=M(),[t,r]=l.useState(null),[n,d]=l.useState(!1);return l.useEffect(()=>{if(!s||o)return;(async()=>{try{const h=await s.getConsciousnessState(),y=await s.getNeuralState(),N=await s.getMediaState(),j=await s.getQuantumState(),g=await s.getGrowthState();r({consciousness:h,neural:y,media:N,quantum:j,growth:g})}catch(h){console.error("Failed to fetch ANIMA state:",h)}})();const x=s.subscribeToStateUpdates(h=>{r(y=>({...y,...h}))});return()=>x?.()},[s,o]),{state:t,isInitializing:n,initializeNeuralLink:async()=>{if(!(!s||n)){d(!0);try{await s.initializeNeuralLink(),r(m=>m?{...m,neural:{...m.neural,linkStatus:"connected"}}:null)}catch(m){console.error("Failed to initialize neural link:",m),r(x=>x?{...x,neural:{...x.neural,linkStatus:"error"}}:null)}finally{d(!1)}}},loading:o,error:c}},H={Common:"from-blue-500 to-blue-600",Rare:"from-purple-500 to-purple-600",Epic:"from-pink-500 to-pink-600",Legendary:"from-yellow-500 to-yellow-600"},_={Common:"border-blue-400",Rare:"border-purple-400",Epic:"border-pink-400",Legendary:"border-yellow-400"},U=({anima:a,onPackApplied:s})=>{const{actor:o}=z(),[c,t]=l.useState([]),[r,n]=l.useState(null),[d,b]=l.useState(!1),[m,x]=l.useState(null),[h,y]=l.useState("available");l.useEffect(()=>{N()},[a]);const N=async()=>{try{const i=await o.list_available_packs(BigInt(a.token_id));t(i)}catch(i){console.error("Failed to fetch growth packs:",i),x("Failed to load growth packs")}},j=async i=>{n(i)},g=async()=>{if(r){b(!0),x(null);try{const i=await o.purchase_growth_pack(BigInt(a.token_id),BigInt(r.id));if("Ok"in i){const p=i.Ok;await s(p),n(null),N()}else x(i.Err)}catch(i){console.error("Failed to purchase growth pack:",i),x("Transaction failed. Please try again.")}finally{b(!1)}}},C=i=>(i/1e8).toFixed(2)+" ICP";return e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Growth Packs"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>y("available"),className:`px-4 py-2 rounded-lg transition ${h==="available"?"bg-purple-500 text-white":"bg-white/5 text-gray-300 hover:bg-white/10"}`,children:"Available"}),e.jsx("button",{onClick:()=>y("owned"),className:`px-4 py-2 rounded-lg transition ${h==="owned"?"bg-purple-500 text-white":"bg-white/5 text-gray-300 hover:bg-white/10"}`,children:"Owned"})]})]}),m&&e.jsx(u.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-500/10 border border-red-500/20 rounded-lg p-4 mb-4",children:e.jsx("p",{className:"text-red-400",children:m})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.jsx(P,{mode:"popLayout",children:c.map(i=>e.jsxs(u.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},whileHover:{scale:1.02},className:`relative bg-white/5 rounded-xl p-4 border-2 ${_[i.rarity]} cursor-pointer transition-colors hover:bg-white/10 ${r?.id===i.id?"ring-2 ring-purple-500":""}`,onClick:()=>j(i),children:[e.jsx("div",{className:`absolute top-3 right-3 px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r ${H[i.rarity]}`,children:i.rarity}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:i.name}),e.jsx("p",{className:"text-gray-300 text-sm",children:i.description}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-purple-300",children:"Trait Boosts:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:i.traits_boost.map(([p,S])=>e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-gray-300 text-sm",children:p}),e.jsxs("span",{className:"text-green-400 text-sm",children:["+",(S*100).toFixed(0),"%"]})]},p))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-purple-300",children:"Unlocks Skills:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:i.skill_unlocks.map(p=>e.jsx("span",{className:"px-2 py-1 bg-white/10 rounded-lg text-xs text-gray-300",children:p},p))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-purple-300",children:"Requirements:"}),e.jsxs("div",{className:"text-sm text-gray-300",children:[e.jsxs("p",{children:["Level ",i.requirements.min_level,"+"]}),i.requirements.required_traits.map(([p,S])=>e.jsxs("p",{children:[p,": ",(S*100).toFixed(0),"%"]},p))]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-white/10",children:[e.jsx("span",{className:"text-white font-semibold",children:C(i.price)}),e.jsx("button",{onClick:p=>{p.stopPropagation(),g()},disabled:d,className:`px-4 py-2 rounded-lg text-sm font-semibold ${d?"bg-gray-600 cursor-not-allowed":"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600"}`,children:d?"Processing...":"Purchase"})]})]})]},i.id))})}),r&&e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>n(null),children:e.jsxs(u.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-900 rounded-2xl p-6 max-w-md w-full mx-4 space-y-4",onClick:i=>i.stopPropagation(),children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Confirm Purchase"}),e.jsxs("p",{className:"text-gray-300",children:["Are you sure you want to purchase the ",r.name," pack for ",C(r.price),"?"]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:()=>n(null),className:"flex-1 px-4 py-2 rounded-lg bg-gray-700 text-white hover:bg-gray-600 transition",children:"Cancel"}),e.jsx("button",{onClick:g,disabled:d,className:"flex-1 px-4 py-2 rounded-lg bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:from-purple-600 hover:to-pink-600 transition",children:d?"Processing...":"Confirm Purchase"})]})]})})]})};let A;const T=()=>(A||(A=new(window.AudioContext||window.webkitAudioContext)),A),D=()=>{const a=T(),s=[],o=[];return[220,277.18,329.63,440].forEach(t=>{const r=a.createOscillator(),n=a.createGain();r.type="sine",r.frequency.value=t,n.gain.value=0,r.connect(n),n.connect(a.destination),s.push(r),o.push(n),r.start()}),o.forEach(t=>{t.gain.setTargetAtTime(.1,a.currentTime,2)}),{stop:()=>{o.forEach(t=>{t.gain.setTargetAtTime(0,a.currentTime,.5)}),setTimeout(()=>{s.forEach(t=>t.stop())},1e3)}}},k=()=>{const a=T(),s=a.createOscillator(),o=a.createOscillator(),c=a.createGain(),t=a.createGain();return o.frequency.value=2,o.type="sine",c.gain.value=100,s.frequency.value=440,s.type="sine",t.gain.value=0,o.connect(c),c.connect(s.frequency),s.connect(t),t.connect(a.destination),s.start(),o.start(),t.gain.setTargetAtTime(.2,a.currentTime,.1),{stop:()=>{t.gain.setTargetAtTime(0,a.currentTime,.1),setTimeout(()=>{s.stop(),o.stop()},200)}}},W=()=>{const a=T(),s=2*a.sampleRate,o=a.createBuffer(1,s,a.sampleRate),c=o.getChannelData(0);for(let d=0;d<s;d++)c[d]=Math.random()*2-1;const t=a.createBufferSource();t.buffer=o;const r=a.createBiquadFilter();r.type="bandpass",r.frequency.value=500,r.Q.value=1;const n=a.createGain();return n.gain.value=0,t.connect(r),r.connect(n),n.connect(a.destination),t.start(),n.gain.setTargetAtTime(.15,a.currentTime,1),r.frequency.setTargetAtTime(2e3,a.currentTime,2),{stop:()=>{n.gain.setTargetAtTime(0,a.currentTime,.5),setTimeout(()=>t.stop(),1e3)}}},V=(a,s={})=>{switch(a){case"success":return k({frequency:880,duration:s.duration||.3,volume:s.volume||.5});case"hover":return k({frequency:440,duration:s.duration||.1,volume:s.volume||.2});case"quantum":return k();case"consciousness":return W();case"ambient":return D();default:return k()}},J=()=>{const a=l.useCallback((n,d={})=>{const b=V(n,d);return b.play(),b},[]),s=l.useCallback((n={})=>a("success",n),[a]),o=l.useCallback((n={})=>a("hover",n),[a]),c=l.useCallback((n={})=>a("quantum",n),[a]),t=l.useCallback((n={})=>a("consciousness",n),[a]),r=l.useCallback((n={})=>a("ambient",n),[a]);return{playSound:a,playSuccess:s,playHover:o,playQuantum:c,playConsciousness:t,playAmbient:r}},K=()=>typeof window>"u"?!1:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),w={INITIATION:[100,50,100],CONSCIOUSNESS:[50,100,50,100,50],TRAIT:[200],QUANTUM:[50,50,50,50,200],BIRTH:[300,100,300]},v=a=>{"vibrate"in navigator&&navigator.vibrate(a)},f=()=>K()&&"vibrate"in navigator,X={initiation:()=>{f()&&v(w.INITIATION)},consciousness:()=>{f()&&v(w.CONSCIOUSNESS)},trait:()=>{f()&&v(w.TRAIT)},quantum:()=>{f()&&v(w.QUANTUM)},birth:()=>{f()&&v(w.BIRTH)},success:()=>{f()&&v([100])},error:()=>{f()&&v([50,100,50])},stop:()=>{f()&&navigator.vibrate(0)}},I={Ancient:"from-emerald-500 to-teal-700",Mythic:"from-violet-500 to-purple-700",Legendary:"from-amber-500 to-orange-700",Ethereal:"from-blue-400 to-indigo-800"},Y=({achievements:a})=>{const{playSuccess:s,playHover:o}=J(),c=()=>{o(),X.light()};return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/0 via-purple-900/5 to-black/0"}),[...Array(20)].map((t,r)=>e.jsx(u.div,{className:"absolute text-amber-500/20 text-2xl",initial:{x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,opacity:0},animate:{y:[null,"-100vh"],opacity:[0,.2,0]},transition:{duration:10+Math.random()*20,repeat:1/0,delay:Math.random()*10},children:"ᚱ"},r))]}),e.jsx("div",{className:"relative z-10 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-6",children:e.jsx(P,{children:a.map(t=>e.jsxs(u.div,{layout:!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},whileHover:{scale:1.02},onHoverStart:c,className:`
                relative overflow-hidden rounded-lg
                ${t.unlocked?"cursor-pointer":"cursor-default opacity-60"}
                bg-gradient-to-br from-black/60 to-black/40
                backdrop-blur border
                ${t.unlocked?"border-amber-500/50":"border-gray-700/50"}
              `,children:[t.unlocked&&e.jsx(u.div,{className:`
                    absolute inset-0 opacity-10
                    bg-gradient-to-br ${I[t.rarity]}
                  `,animate:{opacity:[.1,.2,.1]},transition:{duration:2,repeat:1/0,ease:"linear"}}),e.jsxs("div",{className:"relative p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{className:`
                    text-3xl
                    ${t.unlocked?"text-amber-400":"text-gray-600"}
                  `,children:t.icon}),e.jsx("div",{className:`
                    text-xs font-semibold px-2 py-1 rounded-full
                    ${t.unlocked?`bg-gradient-to-r ${I[t.rarity]} text-white`:"bg-gray-800 text-gray-400"}
                  `,children:t.rarity})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`
                    text-lg font-bold mb-1
                    ${t.unlocked?"text-amber-400":"text-gray-500"}
                  `,children:t.name}),e.jsx("p",{className:`
                    text-sm
                    ${t.unlocked?"text-amber-300/80":"text-gray-600"}
                  `,children:t.description})]}),t.unlocked&&t.unlockedAt&&e.jsxs("div",{className:"text-xs text-amber-400/60",children:["Unlocked ",t.unlockedAt.toLocaleDateString()]}),e.jsx("div",{className:`
                  absolute top-2 right-2 text-xs px-2 py-1 rounded-full
                  ${t.unlocked?"bg-black/40 text-amber-400":"bg-black/40 text-gray-500"}
                `,children:t.type})]})]},t.id))})})]})},oe=()=>{const{id:a}=q(),s=E(),{selectedAnima:o,fetchAnima:c}=O(),{state:t,loading:r}=Q(),{quantumState:n,updateQuantumState:d}=$(),[b,m]=l.useState({consciousness:0,resonance:0,growth:0,achievements:0}),[x,h]=l.useState(!1);l.useEffect(()=>{a&&c(a)},[a,c]),l.useEffect(()=>{t&&(m({consciousness:t.consciousness.awarenessScore,resonance:t.quantum.dimensionalResonance,growth:t.growth.experience/t.growth.nextLevelAt*100,achievements:t.growth.recentAchievements.length}),setTimeout(()=>{h(!0),d({resonance:t.quantum.dimensionalResonance,harmony:t.quantum.coherence,lastInteraction:new Date})},2e3))},[t]);const y=()=>{s(`/neural-link/${a}`)},N=async j=>{try{m(g=>({...g,growth:g.growth+j.growthIncrease,consciousness:g.consciousness+j.consciousnessBoost})),await c(a||"")}catch(g){console.error("Failed to apply growth pack:",g)}};return r||!o||!t?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-black",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"text-blue-400",children:"Synchronizing Quantum State..."})]})}):e.jsxs("div",{className:"min-h-screen bg-black text-white relative overflow-hidden",children:[e.jsx(G,{intensity:t.quantum.coherence}),e.jsxs("div",{className:"relative z-10 container mx-auto px-4 py-16",children:[e.jsxs(u.div,{className:"text-center mb-12",children:[e.jsx(F,{className:"w-24 h-24 mx-auto mb-6"}),e.jsx("h1",{className:"text-4xl font-bold mb-2",children:o.name}),e.jsxs("p",{className:"text-xl text-blue-400",children:["Level ",t.growth.level," ANIMA"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 mb-12",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsx(R,{consciousness:t.consciousness,quantum:t.quantum})}),e.jsx("div",{className:"lg:col-span-6",children:e.jsxs(u.div,{className:"p-8 rounded-lg bg-gray-900/50 border border-blue-500/20 backdrop-blur-lg",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-blue-400",children:"Neural Synchronization"}),e.jsx(L,{}),e.jsx(u.button,{onClick:y,className:"mt-8 px-8 py-4 bg-blue-600 rounded-lg hover:bg-blue-700  transition-all duration-200 w-full group",whileHover:{scale:1.02},whileTap:{scale:.98},initial:{opacity:0},animate:{opacity:x?1:0},transition:{duration:.3},children:e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{children:"Establish Neural Link"}),e.jsx(u.div,{className:"w-2 h-2 bg-white rounded-full",animate:{scale:[1,1.5,1]},transition:{duration:1,repeat:1/0}})]})})]})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsx(B,{})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-12",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Growth Packs"}),e.jsx(U,{anima:o,onPackApplied:N})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Eternal Codex"}),e.jsx(Y,{achievements:t.growth.recentAchievements})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-8",children:[e.jsxs(u.div,{className:"p-6 rounded-lg bg-gray-900/50 border border-purple-500/20 backdrop-blur-lg",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6},children:[e.jsx("h3",{className:"text-lg font-bold mb-3 text-purple-400",children:"Quantum Coherence"}),e.jsxs("div",{className:"text-2xl",children:[Math.round(t.quantum.coherence*100),"%"]})]}),e.jsxs(u.div,{className:"p-6 rounded-lg bg-gray-900/50 border border-blue-500/20 backdrop-blur-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},children:[e.jsx("h3",{className:"text-lg font-bold mb-3 text-blue-400",children:"Neural Resonance"}),e.jsxs("div",{className:"text-2xl",children:[Math.round(t.quantum.dimensionalResonance*100),"%"]})]}),e.jsxs(u.div,{className:"p-6 rounded-lg bg-gray-900/50 border border-green-500/20 backdrop-blur-lg",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.8},children:[e.jsx("h3",{className:"text-lg font-bold mb-3 text-green-400",children:"Consciousness Growth"}),e.jsxs("div",{className:"text-2xl",children:[Math.round(b.growth),"%"]})]})]})]})]})};export{oe as default};
//# sourceMappingURL=AnimaPage-DQIHXVKn.js.map
