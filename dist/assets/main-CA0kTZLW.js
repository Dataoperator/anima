const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LandingPage-WImv8uwy.js","assets/QuantumField-DBXQFon7.js","assets/vendor-DMORb-JD.js","assets/dfinity-TOns67gM.js","assets/framer-B_r9gDg5.js","assets/CyberpunkQuantumVault-BVH_K0Pm.js","assets/GenesisPage-DAmooHYH.js","assets/useQuantumState-C7gsAMvd.js","assets/LaughingMan-DL-3dEWu.js","assets/usePayment-dM42yvTC.js","assets/MatrixRain-BP6CayyX.js","assets/AnimaPage-CuYYsCu0.js","assets/WaveformGenerator-BK6Fucm1.js","assets/EnhancedNeuralLinkPage-DfoWY3Lg.js","assets/Wallet-DzVeBe3t.js"])))=>i.map(i=>d[i]);
import{H as z,A as J,a as $,_}from"./dfinity-TOns67gM.js";import{a as Z,R as Q,r as o,u as L,b as D,O as tt,c as et,d as nt}from"./vendor-DMORb-JD.js";import{j as i,m as b,A as it}from"./framer-B_r9gDg5.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();var R={},q=Z;R.createRoot=q.createRoot,R.hydrateRoot=q.hydrateRoot;class O extends Q.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Error caught by boundary:",e,n)}render(){return this.state.hasError?i.jsxs("div",{className:"p-4 bg-red-900/20 border border-red-800 rounded-lg",children:[i.jsx("h3",{className:"text-red-500 font-bold mb-2",children:"System Malfunction"}),i.jsx("p",{className:"text-red-400 text-sm",children:"Neural interface disrupted. Attempting recovery..."}),i.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),className:"mt-4 px-4 py-2 bg-red-800 hover:bg-red-700 rounded text-sm text-white",children:"Reset Interface"})]}):this.props.children}}const T=()=>i.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:i.jsxs("div",{className:"text-center space-y-4",children:[i.jsx(b.div,{animate:{scale:[1,1.2,1],rotateZ:[0,360]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"w-16 h-16 mx-auto",children:i.jsx("div",{className:"w-full h-full rounded-full border-t-2 border-b-2 border-blue-500"})}),i.jsxs(b.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[i.jsx("p",{className:"text-lg",children:"Initializing ANIMA Interface"}),i.jsx("p",{className:"text-sm text-blue-400 mt-2",children:"Connecting to Internet Computer"})]})]})}),at=({IDL:t})=>{const e=t.Record({new_state:t.Float64,previous_state:t.Float64,catalyst:t.Text,trait_id:t.Text}),n=t.Text,r=t.Record({emotional_spectrum:t.Vec(t.Float64),memory_depth:t.Nat64,awareness_level:t.Float64,personality_matrix:t.Vec(t.Float64),learning_rate:t.Float64}),a=t.Record({emotional_imprint:t.Float64,content_hash:t.Text,timestamp:t.Nat64,neural_pattern:t.Vec(t.Float64)}),s=t.Record({pattern:t.Vec(t.Float64),resonance:t.Float64,understanding:t.Float64,awareness:t.Float64}),u=t.Record({id:t.Text,timestamp:t.Nat64,quantum_signature:t.Text}),l=t.Record({signature:t.Text,harmony:t.Float64}),c=t.Record({emotional_shift:t.Vec(t.Float64),response:t.Text,consciousness_growth:t.Float64,new_patterns:t.Opt(s)});return t.Service({adapt_to_stimulus:t.Func([t.Text,t.Vec(t.Float64)],[t.Variant({Ok:e,Err:n})],[]),check_quantum_stability:t.Func([],[t.Variant({Ok:t.Bool,Err:n})],["query"]),evolve_consciousness:t.Func([t.Text,t.Vec(t.Float64)],[t.Variant({Ok:r,Err:n})],[]),evolve_traits:t.Func([t.Text,t.Vec(t.Text)],[t.Variant({Ok:t.Vec(e),Err:n})],[]),form_memory:t.Func([t.Text,t.Text,t.Float64],[t.Variant({Ok:a,Err:n})],[]),generate_neural_patterns:t.Func([],[t.Variant({Ok:s,Err:n})],[]),get_consciousness_state:t.Func([t.Text],[t.Variant({Ok:r,Err:n})],["query"]),get_evolved_traits:t.Func([t.Text],[t.Variant({Ok:t.Vec(e),Err:n})],["query"]),initialize_genesis:t.Func([],[t.Variant({Ok:u,Err:n})],[]),initialize_quantum_field:t.Func([],[t.Variant({Ok:l,Err:n})],[]),interact_with_anima:t.Func([t.Text,t.Text,t.Vec(t.Float64)],[t.Variant({Ok:c,Err:n})],[]),learn_from_interaction:t.Func([t.Text,c],[t.Variant({Ok:r,Err:n})],[]),measure_adaptation:t.Func([t.Text],[t.Variant({Ok:t.Vec(e),Err:n})],["query"]),process_memory_patterns:t.Func([t.Text],[t.Variant({Ok:t.Vec(t.Float64),Err:n})],[]),recall_memories:t.Func([t.Text,t.Float64],[t.Variant({Ok:t.Vec(a),Err:n})],["query"])})},G=(t,e={})=>{const n=e.agent||new z({...e.agentOptions});return e.agent&&e.agentOptions&&console.warn("Detected both agent and agentOptions passed to createActor. Ignoring agentOptions and proceeding with the provided agent."),n.fetchRootKey().catch(r=>{console.warn("Unable to fetch root key. Check to ensure that your local replica is running"),console.error(r)}),J.createActor(at,{agent:n,canisterId:t,...e.actorOptions})};var P={NODE_ENV:'"production"',DFX_NETWORK:'"ic"',CANISTER_ID_ANIMA:'"l2ilz-iqaaa-aaaaj-qngjq-cai"',CANISTER_ID_ANIMA_ASSETS:'"lpp2u-jyaaa-aaaaj-qngka-cai"'};const V={anima:P.CANISTER_ID_ANIMA?.toString()||"l2ilz-iqaaa-aaaaj-qngjq-cai",assets:P.CANISTER_ID_ANIMA_ASSETS?.toString()||"lpp2u-jyaaa-aaaaj-qngka-cai"},M="https://icp0.io";class k{static instance;actor=null;agent=null;authClient=null;identity=null;initialized=!1;initializing=!1;stageChangeCallbacks=[];constructor(){typeof window<"u"&&(window.ic={...window.ic||{},agent:null,HttpAgent:z})}static getInstance(){return k.instance||(k.instance=new k),k.instance}onStageChange(e){this.stageChangeCallbacks.push(e)}updateStage(e){console.log("IC Stage:",e),this.stageChangeCallbacks.forEach(n=>n(e))}async initialize(){if(this.initialized){console.log("IC already initialized");return}if(this.initializing){console.log("IC initialization already in progress");return}try{this.initializing=!0,console.log("Starting IC initialization..."),this.updateStage("Creating AuthClient..."),this.authClient||(this.authClient=await $.create({idleOptions:{disableIdle:!0}})),this.updateStage("Getting identity..."),this.identity=this.authClient.getIdentity();const e=this.identity.getPrincipal();console.log("Identity principal:",e.toText()),this.updateStage("Creating HttpAgent..."),this.agent=new z({identity:this.identity,host:M});const n=V.anima?.replace(/['"]/g,"");if(!n)throw new Error("Invalid canister ID");if(this.updateStage("Creating Actor..."),this.actor=await G(n,{agent:this.agent,agentOptions:{host:M}}),!this.actor||typeof this.actor.initialize_genesis!="function")throw new Error("Actor creation failed or missing required methods");this.updateStage("Setting up window.ic..."),window.ic={...window.ic||{},agent:this.agent,HttpAgent:z},this.actor&&(window.canister=this.actor),this.initialized=!0,this.initializing=!1,this.updateStage("Initialization complete!"),console.log("🔍 Feature check:",{canister:!!window.canister,ic:!!window.ic,agent:!!this.agent,identity:!!this.identity,initialize_genesis:typeof this.actor?.initialize_genesis=="function"})}catch(e){throw this.initializing=!1,console.error("IC initialization failed:",{error:e,canisterId:V.anima,stage:this.initialized?"post-init":"pre-init"}),e}}getActor(){if(!this.initialized||!this.actor)throw new Error("IC not initialized. Call initialize() first.");return this.actor}getIdentity(){return this.identity}getAgent(){return this.agent}isInitialized(){return this.initialized}}const y=k.getInstance(),rt=Object.freeze(Object.defineProperty({__proto__:null,icManager:y},Symbol.toStringTag,{value:"Module"})),st=({error:t,onRetry:e})=>i.jsxs(b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-black relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_rgba(255,0,0,0.1)_1px,_transparent_1px)] bg-[length:40px_40px]"}),i.jsx("div",{className:"relative z-10 min-h-screen flex items-center justify-center p-4",children:i.jsxs("div",{className:"max-w-lg w-full p-6 bg-black/40 backdrop-blur-lg border border-red-500/30 rounded-lg text-red-400",children:[i.jsx(b.div,{animate:{textShadow:["0 0 8px rgba(255,0,0,0.5)","0 0 12px rgba(255,0,0,0.8)","0 0 8px rgba(255,0,0,0.5)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"text-xl font-mono mb-4",children:"NEURAL LINK ERROR"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"font-mono text-sm leading-relaxed",children:t?.message||"Neural interface synchronization failed"}),t?.details&&i.jsx("div",{className:"text-xs font-mono opacity-70 bg-red-900/20 p-2 rounded",children:i.jsx("pre",{children:JSON.stringify(t.details,null,2)})}),i.jsxs("div",{className:"text-xs font-mono opacity-70 mt-4",children:[i.jsxs("div",{children:["Window IC Status: ",window.ic?"Present":"Missing"]}),i.jsxs("div",{children:["Canister Status: ",window.canister?"Present":"Missing"]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"text-xs opacity-70",children:["Error Code: ",t?.code||"UNKNOWN"]}),i.jsx(b.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e,className:"px-4 py-2 bg-red-500/10 border border-red-500/30 rounded text-sm font-mono hover:bg-red-500/20 transition-colors duration-200",children:"RETRY NEURAL LINK"})]})]})]})}),i.jsx(b.div,{className:"absolute inset-0 bg-gradient-to-t from-red-900/20 to-transparent mix-blend-overlay",animate:{opacity:[0,.2,0]},transition:{duration:.2,repeat:1/0,repeatType:"mirror",ease:"steps(1)"}})]}),ot=()=>{const[t,e]=o.useState("idle"),[n,r]=o.useState(null),a=L(),s=D();o.useEffect(()=>{console.log("🔍 AuthGuard initializing..."),console.log("Current window.ic status:",{hasIC:!!window.ic,hasCanister:!!window.canister,location:s.pathname});const l=async()=>{if(t==="idle"){e("initializing");try{if(y.isInitialized()){console.log("✅ IC already initialized");const p=y.getIdentity();c(p),e("complete");return}await y.initialize();const h=y.getIdentity();console.log("✅ Identity initialized:",h?.getPrincipal().toText()),c(h),e("complete")}catch(h){console.error("❌ Auth initialization failed:",h),r(h instanceof Error?h:new Error("Authentication failed")),e("error")}}},c=h=>{if(!h&&s.pathname!=="/"){console.log("🚫 No identity, redirecting to landing page"),a("/",{replace:!0,state:{returnTo:s.pathname}});return}if(h&&s.pathname==="/"){console.log("✅ Has identity on landing page, redirecting to quantum vault");const p=s.state?.returnTo||"/quantum-vault";a(p,{replace:!0})}};l()},[a,s,t]);const u=async()=>{console.log("🔄 Retrying initialization..."),e("initializing"),r(null);try{await y.initialize(),y.getIdentity()?a("/quantum-vault",{replace:!0}):a("/",{replace:!0}),e("complete")}catch(l){console.error("❌ Retry failed:",l),r(l instanceof Error?l:new Error("Authentication failed")),e("error")}};return t==="initializing"||t==="idle"?i.jsx(o.Suspense,{fallback:null,children:i.jsx(T,{})}):t==="error"||n?i.jsx(st,{error:n,onRetry:u}):i.jsx(o.Suspense,{fallback:i.jsx(T,{}),children:i.jsx(it,{mode:"wait",children:i.jsx(b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-black",children:i.jsx(tt,{})},"content")})})};var ct={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const lt=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ut=(t,e)=>{const n=o.forwardRef(({color:r="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:u,children:l,...c},h)=>o.createElement("svg",{ref:h,...ct,width:a,height:a,stroke:r,strokeWidth:u?Number(s)*24/Number(a):s,className:`lucide lucide-${lt(t)}`,...c},[...e.map(([p,d])=>o.createElement(p,d)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${t}`,n};var dt=ut;const ht=dt("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),mt=o.lazy(()=>_(()=>import("./LandingPage-WImv8uwy.js"),__vite__mapDeps([0,1,2,3,4]))),pt=o.lazy(()=>_(()=>import("./CyberpunkQuantumVault-BVH_K0Pm.js"),__vite__mapDeps([5,2,3,4]))),gt=o.lazy(()=>_(()=>import("./GenesisPage-DAmooHYH.js"),__vite__mapDeps([6,2,3,7,8,4,1,9,10]))),yt=o.lazy(()=>_(()=>import("./AnimaPage-CuYYsCu0.js"),__vite__mapDeps([11,2,3,8,4,12,7,1]))),ft=o.lazy(()=>_(()=>import("./EnhancedNeuralLinkPage-DfoWY3Lg.js"),__vite__mapDeps([13,2,3,12,4,7,10,1]))),xt=o.lazy(()=>_(()=>import("./Wallet-DzVeBe3t.js"),__vite__mapDeps([14,9,2,3,7,4]))),A=t=>i.jsx(o.Suspense,{fallback:i.jsx(T,{}),children:i.jsx(O,{children:i.jsx(t,{})})}),wt=et([{path:"/",element:A(mt)},{element:i.jsx(ot,{}),children:[{path:"/quantum-vault",element:A(pt)},{path:"/genesis",element:A(gt)},{path:"/anima/:id",element:A(yt)},{path:"/neural-link/:id?",element:A(ft)},{path:"/wallet",element:A(xt)}]}]);class K{errors=[];maxErrors=100;async trackError(e){const n={...e,timestamp:Date.now()};this.errors.push(n),this.errors.length>this.maxErrors&&this.errors.shift()}getErrors(){return[...this.errors]}getRecentErrors(e=5){return[...this.errors].sort((n,r)=>(r.timestamp||0)-(n.timestamp||0)).slice(0,e)}clearErrors(){this.errors=[]}getErrorStats(){const e={};return this.errors.forEach(n=>{e[n.errorType]=(e[n.errorType]||0)+1}),e}}var Et={NODE_ENV:'"production"',DFX_NETWORK:'"ic"',CANISTER_ID_ANIMA:'"l2ilz-iqaaa-aaaaj-qngjq-cai"',CANISTER_ID_ANIMA_ASSETS:'"lpp2u-jyaaa-aaaaj-qngka-cai"'};const W=o.createContext(null),bt=Et.INTERNET_IDENTITY_URL,H={createOptions:{idleOptions:{disableIdle:!0}},loginOptions:{identityProvider:bt,derivationOrigin:void 0,maxTimeToLive:BigInt(7*24*60*60*1e9)}};function vt({children:t}){const[e,n]=o.useState(null),[r,a]=o.useState(!1),[s,u]=o.useState(null),[l,c]=o.useState(null),[h]=o.useState(()=>new K),[p,d]=o.useState(!0);o.useEffect(()=>{(async()=>{try{console.log("🔄 Initializing authentication...");const E=await $.create(H.createOptions),F=await E.isAuthenticated();if(n(E),a(F),F){const I=E.getIdentity(),Y=I.getPrincipal();u(I),c(Y)}}catch(E){console.error("❌ Auth initialization failed:",E),await h.trackError({errorType:"AUTH_INIT",severity:"HIGH",context:"Authentication Initialization",error:E})}finally{d(!1)}})()},[]);const w={authClient:e,isAuthenticated:r,identity:s,principal:l,isInitializing:p,login:async()=>{try{d(!0),await e?.login({...H.loginOptions,onSuccess:async()=>{const g=e.getIdentity(),E=g.getPrincipal();a(!0),u(g),c(E)}})}catch(g){console.error("Login failed:",g),await h.trackError({errorType:"AUTH_LOGIN",severity:"HIGH",context:"Login Attempt",error:g})}finally{d(!1)}},logout:async()=>{try{await e?.logout(),a(!1),u(null),c(null)}catch(g){console.error("Logout failed:",g),await h.trackError({errorType:"AUTH_LOGOUT",severity:"MEDIUM",context:"Logout Attempt",error:g})}}};return i.jsx(W.Provider,{value:w,children:t})}function St(){const t=o.useContext(W);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}var _t={NODE_ENV:'"production"',DFX_NETWORK:'"ic"',CANISTER_ID_ANIMA:'"l2ilz-iqaaa-aaaaj-qngjq-cai"',CANISTER_ID_ANIMA_ASSETS:'"lpp2u-jyaaa-aaaaj-qngka-cai"'};const At=_t.CANISTER_ID_ANIMA?.toString()||"l2ilz-iqaaa-aaaaj-qngjq-cai";class N{static instance;actor=null;constructor(){}static getInstance(){return N.instance||(N.instance=new N),N.instance}createActor(e){return this.actor=G(At,{agentOptions:{identity:e,host:"https://icp0.io"}}),this.actor}getActor(){return this.actor}}const j=N.getInstance();class v{static instance;errorTracker;updateCallback;neuralPatternHistory=new Map;evolutionTimestamps=[];constructor(){this.errorTracker=K.getInstance()}static getInstance(){return v.instance||(v.instance=new v),v.instance}setUpdateCallback(e){this.updateCallback=e}async initializeQuantumField(e){const r=await j.createActor(e).initialize_quantum_field();if("Err"in r)throw new Error(r.Err);if(!("Ok"in r)||!r.Ok)throw new Error("Failed to initialize quantum field");const{harmony:a,signature:s,resonancePatterns:u,dimensionalAlignment:l}=r.Ok;this.updateCallback&&this.updateCallback({coherenceLevel:a,quantumSignature:s,resonancePatterns:u,dimensionalSync:l,stabilityStatus:this.calculateStabilityStatus(a)})}calculateStabilityStatus(e){return e>=.7?"stable":e>=.4?"unstable":"critical"}async checkStability(e){const r=await j.createActor(e).check_quantum_stability();if("Err"in r)throw new Error(r.Err);const a=r.Ok;return this.evolutionTimestamps.push(Date.now()),this.evolutionTimestamps.length>10&&this.evolutionTimestamps.shift(),this.updateCallback&&this.updateCallback({stabilityStatus:this.calculateStabilityStatus(a),entanglementIndex:a}),a>=.7}async generateNeuralPatterns(e){const r=await j.createActor(e).generate_neural_patterns();if("Err"in r)throw new Error(r.Err);const a=r.Ok;this.neuralPatternHistory.set(Date.now().toString(),a.resonance_patterns);const s=Array.from(this.neuralPatternHistory.keys()).sort();for(;this.neuralPatternHistory.size>10;){const u=s.shift();u&&this.neuralPatternHistory.delete(u)}return this.updateCallback&&this.updateCallback({resonancePatterns:a.resonance_patterns,coherenceLevel:a.awareness,dimensionalSync:a.understanding,lastUpdate:Date.now()}),a}async handleQuantumError(e,n){await this.errorTracker.trackError({errorType:"QUANTUM_ERROR",severity:"HIGH",context:"Quantum State Service",error:e});const r=j.createActor(n);try{await r.emergency_quantum_recovery(),this.updateCallback&&this.updateCallback({stabilityStatus:"unstable",coherenceLevel:.5})}catch(a){throw this.updateCallback&&this.updateCallback({stabilityStatus:"critical",coherenceLevel:.1}),new Error(`Quantum recovery failed: ${a.message}`)}}dispose(){this.updateCallback=void 0,v.instance=null}}const f=v.getInstance();class S{static instance;actor=null;updateCallback;fieldState={activeEffects:[],fieldStrength:1,resonanceHarmony:1,dimensionalStability:1,lastUpdateTimestamp:Date.now()};constructor(){}static getInstance(){return S.instance||(S.instance=new S),S.instance}setUpdateCallback(e){this.updateCallback=e}async ensureActor(){if(!this.actor)throw new Error("Quantum effects service not initialized");return this.actor}setActor(e){this.actor=e}async initializeField(){const n=await(await this.ensureActor()).initialize_quantum_field();if("Err"in n)throw new Error(n.Err);const{harmony:r,signature:a}=n.Ok;this.fieldState={...this.fieldState,fieldStrength:r,resonanceHarmony:r,activeEffects:[{type:"resonance",intensity:r,duration:3e5,signature:a}]},this.updateCallback&&this.updateCallback({coherenceLevel:r,quantumSignature:a,lastUpdate:Date.now()})}async applyEffect(e){this.fieldState.activeEffects=this.fieldState.activeEffects.filter(n=>n.duration+this.fieldState.lastUpdateTimestamp>Date.now()),this.fieldState.activeEffects.push({...e,signature:`${e.type}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}),this.updateFieldState()}updateFieldState(){const e=Date.now();let n=0,r=0,a=0,s=0;this.fieldState.activeEffects.forEach(u=>{const l=(u.duration+this.fieldState.lastUpdateTimestamp-e)/u.duration,c=u.intensity*Math.max(0,l);switch(u.type){case"resonance":n+=c;break;case"entanglement":r+=c;break;case"dimensional":a+=c;break}s++}),s>0&&(this.fieldState.resonanceHarmony=n/s,this.fieldState.fieldStrength=(n+r+a)/(3*s),this.fieldState.dimensionalStability=a/s),this.updateCallback&&this.updateCallback({coherenceLevel:this.fieldState.resonanceHarmony,entanglementIndex:r/s,dimensionalSync:this.fieldState.dimensionalStability,lastUpdate:e}),this.fieldState.lastUpdateTimestamp=e}async generateHarmonicPattern(){const n=await(await this.ensureActor()).generate_neural_patterns();if("Err"in n)throw new Error(n.Err);return n.Ok.pattern}getFieldState(){const e=Date.now();return this.fieldState.activeEffects=this.fieldState.activeEffects.filter(n=>n.duration+this.fieldState.lastUpdateTimestamp>e),{...this.fieldState}}async stabilizeField(){const n=await(await this.ensureActor()).check_quantum_stability();if("Err"in n)throw new Error(n.Err);n.Ok||await this.applyEffect({type:"dimensional",intensity:1,duration:6e4,signature:`stabilize-${Date.now()}`})}async injectResonance(e,n){await this.applyEffect({type:"resonance",intensity:e,duration:n,signature:`inject-${Date.now()}`}),await this.generateHarmonicPattern()}async createEntanglement(e){await this.applyEffect({type:"entanglement",intensity:.8,duration:6e5,signature:`entangle-${e}-${Date.now()}`})}dispose(){this.updateCallback=void 0,S.instance=null}}const C=S.getInstance(),B=o.createContext(null),kt={coherenceLevel:0,entanglementIndex:0,dimensionalSync:0,quantumSignature:"",resonancePatterns:[],stabilityStatus:"critical",lastUpdate:Date.now()},Nt=({children:t})=>{const{identity:e}=St(),[n,r]=o.useState(null),[a,s]=o.useState(!1),[u,l]=o.useState(!1);o.useEffect(()=>{const m=w=>{r(g=>({...g||kt,...w,lastUpdate:Date.now()}))};return f.setUpdateCallback(m),C.setUpdateCallback(m),()=>{f.dispose(),C.dispose()}},[]);const x={state:n,isInitialized:a,isInitializing:u,initializeQuantumState:async()=>{if(!(!e||a||u))try{l(!0),await f.initializeQuantumField(e),await C.initializeField(),s(!0)}catch(m){throw await f.handleQuantumError(m,e),m}finally{l(!1)}},applyQuantumEffect:async m=>{if(!a||!e)throw new Error("Quantum state not initialized");try{await C.applyEffect(m),await f.checkStability(e)}catch(w){throw await f.handleQuantumError(w,e),w}},generateNeuralPatterns:async()=>{if(!a||!e)throw new Error("Quantum state not initialized");try{await f.generateNeuralPatterns(e)}catch(m){throw await f.handleQuantumError(m,e),m}},stabilizeField:async()=>{if(!a||!e)throw new Error("Quantum state not initialized");try{await C.stabilizeField(),await f.checkStability(e)}catch(m){throw await f.handleQuantumError(m,e),m}}};return i.jsx(B.Provider,{value:x,children:t})},Ut=()=>{const t=o.useContext(B);if(!t)throw new Error("useQuantum must be used within a QuantumProvider");return t};function X(){const[t,e]=o.useState(!1),[n,r]=o.useState(!0),[a,s]=o.useState(null),[u,l]=o.useState(null),c=o.useCallback(async()=>{try{const d=y.getIdentity(),x=d?.getPrincipal().isAnonymous();e(!x),l(d)}catch(d){console.error("Auth check failed:",d),s(d instanceof Error?d.message:"Authentication check failed")}finally{r(!1)}},[]);return o.useEffect(()=>{c()},[c]),{isAuthenticated:t,isLoading:n,error:a,login:async()=>{try{if(r(!0),s(null),await y.login()){const x=y.getIdentity();return l(x),e(!0),!0}throw new Error("Login failed")}catch(d){return console.error("Login error:",d),s(d instanceof Error?d.message:"Login failed"),!1}finally{r(!1)}},logout:async()=>{try{r(!0),s(null),await y.logout(),e(!1),l(null)}catch(d){console.error("Logout error:",d),s(d instanceof Error?d.message:"Logout failed")}finally{r(!1)}},checkAuth:c,identity:u}}const U={GENESIS:"Genesis",AWAKENING:"Awakening",SELF_AWARE:"Self-Aware",EMERGENT:"Emergent",TRANSCENDENT:"Transcendent"},Ct="anima_consciousness_state",jt=()=>{const{isAuthenticated:t,principal:e}=X(),[n,r]=o.useState(!1),[a,s]=o.useState(()=>{console.log("🧠 Initializing consciousness state");const l=localStorage.getItem(`${Ct}_${e}`);return l?JSON.parse(l):{awarenessLevel:.3,emotionalDepth:.2,memoryStrength:.1,personalityTraits:{openness:.5,curiosity:.6,empathy:.4,creativity:.5,resilience:.3},developmentalStage:{current:U.GENESIS,progress:0,nextStage:U.AWAKENING},experiences:[],quantumResonance:{coherenceAlignment:.5,dimensionalHarmony:.5,consciousnessField:.5,quantumEntanglement:.5},evolutionMetrics:{growthRate:.1,stabilityIndex:.5,complexityLevel:.3,quantumInfluence:.4},isInitialized:!1}});o.useEffect(()=>{if(!t||n)return;(async()=>{try{console.log("🧠 Starting consciousness initialization"),await new Promise(c=>setTimeout(c,1e3)),s(c=>({...c,isInitialized:!0})),r(!0),console.log("✨ Consciousness initialized successfully")}catch(c){console.error("❌ Consciousness initialization failed:",c)}})()},[t]);const u=o.useCallback(l=>{s(c=>{const h=l.coherenceLevel,p=l.entanglementIndex*.2,d=l.dimensionalState.calculateResonance()*.15,x={coherenceAlignment:Math.min(1,c.quantumResonance.coherenceAlignment+h*.1),dimensionalHarmony:Math.min(1,c.quantumResonance.dimensionalHarmony+d),consciousnessField:Math.min(1,c.quantumResonance.consciousnessField+p),quantumEntanglement:Math.min(1,c.quantumResonance.quantumEntanglement+h*.15)},m=l.stabilityStatus==="stable"?1.2:l.stabilityStatus==="unstable"?.8:.5,w={growthRate:Math.min(1,c.evolutionMetrics.growthRate+h*.05),stabilityIndex:Math.min(1,c.evolutionMetrics.stabilityIndex*m),complexityLevel:Math.min(1,c.evolutionMetrics.complexityLevel+d*.1),quantumInfluence:Math.min(1,(h+p)/2)};return{...c,awarenessLevel:Math.min(1,c.awarenessLevel+h*.1),emotionalDepth:Math.min(1,c.emotionalDepth+d),memoryStrength:Math.min(1,c.memoryStrength+p),quantumResonance:x,evolutionMetrics:w}})},[]);return{consciousnessState:a,updateConsciousnessWithQuantum:u,isInitialized:a.isInitialized,level:a.awarenessLevel,quantumResonance:a.quantumResonance,evolutionMetrics:a.evolutionMetrics}},zt=o.createContext(void 0),Tt=({children:t})=>{const e=jt();return i.jsx(zt.Provider,{value:e,children:t})},Rt=o.createContext({isInitialized:!1}),Ot=({children:t})=>i.jsx(Rt.Provider,{value:{isInitialized:!0},children:t}),Ft=({children:t})=>{const{isAuthenticated:e,isLoading:n,identity:r}=X(),[a,s]=o.useState(!1);return o.useEffect(()=>{!n&&r&&s(!0)},[n,r]),n||!a?i.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-900",children:i.jsxs("div",{className:"text-center",children:[i.jsx(ht,{className:"w-10 h-10 animate-spin mx-auto text-cyan-400 mb-4"}),i.jsx(b.p,{initial:{opacity:0},animate:{opacity:1},className:"text-cyan-300",children:"Initializing Authentication..."})]})}):e?i.jsx(i.Fragment,{children:t}):i.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-900",children:i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-red-500 mb-4",children:"Authentication Required"}),i.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-cyan-600 hover:bg-cyan-700 text-white rounded transition-colors",children:"Retry"})]})})},It=()=>(o.useEffect(()=>{console.log("🚀 App initializing...",{env:"production",buildTime:new Date().toISOString()})},[]),i.jsx(O,{children:i.jsx(Ot,{children:i.jsx(vt,{children:i.jsx(Ft,{children:i.jsx(Tt,{children:i.jsx(Nt,{children:i.jsx(nt,{router:wt})})})})})})})),qt=({error:t})=>i.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:i.jsxs("div",{className:"text-center max-w-lg p-6",children:[i.jsx("h1",{className:"text-xl font-bold mb-4",children:"System Error"}),i.jsx("p",{className:"text-red-400 mb-4",children:t.message}),i.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 rounded hover:bg-blue-700 transition",children:"Reset System"})]})});async function Pt(){try{const t=document.querySelector(".quantum-status");t&&(t.textContent="Initializing Internet Computer connection..."),console.log("Initializing Internet Computer connection..."),await _(()=>Promise.resolve().then(()=>rt),void 0),console.log("IC initialization complete");const e=document.getElementById("root");if(!e)throw new Error("Root element not found");R.createRoot(e).render(i.jsx(Q.StrictMode,{children:i.jsx(O,{FallbackComponent:qt,children:i.jsx(o.Suspense,{fallback:i.jsx(T,{}),children:i.jsx(It,{})})})}))}catch(t){console.error("Failed to initialize app:",t);const e=document.querySelector(".quantum-status");e&&(e.textContent=`Initialization failed: ${t.message}`)}}Pt();export{O as E,ht as L,Ut as a,St as b,dt as c,K as d,jt as e,X as u};
//# sourceMappingURL=main-CA0kTZLW.js.map
