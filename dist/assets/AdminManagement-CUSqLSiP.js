import{r as a}from"./vendor-DAG3_51J.js";import{C as S,a as P,b as I,c as R}from"./card-DKqYdLTm.js";import{u as T,P as p}from"./main-BLtP7dC-.js";import{j as e,A as v,m as u}from"./framer-CgXRyNIB.js";import{c as l}from"./createLucideIcon-BXQ_RuTh.js";const D=l("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),j=l("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),O=l("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),b=l("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),V=()=>{const[c,h]=a.useState(""),[y,s]=a.useState(null),[f,n]=a.useState(null),[g,N]=a.useState([]),[k,o]=a.useState(null),{actor:i,identity:d}=T(),[m,A]=a.useState("");a.useEffect(()=>{d&&A(d.getPrincipal().toString())},[d]),a.useEffect(()=>{x()},[i]);const x=async()=>{try{const r=await i?.list_admins();"Ok"in r&&N(r.Ok.map(t=>({principal:t.toString(),addedAt:Date.now()})))}catch(r){console.error("Failed to fetch admins:",r)}},w=r=>{try{return p.fromText(r),!(r.length<10||!/^[a-z0-9-]+$/.test(r)||g.some(t=>t.principal===r))}catch{return!1}},C=async r=>{if(r.preventDefault(),s(null),n(null),!w(c)){s("Invalid or duplicate Principal ID");return}try{const t=await i?.add_admin(p.fromText(c));"Ok"in t?(n("Admin added successfully"),h(""),x()):"Err"in t&&s(t.Err)}catch(t){s("Failed to add admin"),console.error("Add admin error:",t)}},M=async r=>{if(r===m){s("You can't remove yourself as admin");return}try{const t=await i?.remove_admin(p.fromText(r));"Ok"in t?(n("Admin removed successfully"),x()):"Err"in t&&s(t.Err)}catch(t){s("Failed to remove admin"),console.error("Remove admin error:",t)}finally{o(null)}},E=r=>`${r.slice(0,5)}...${r.slice(-5)}`;return e.jsxs(S,{className:"bg-black border border-green-500",children:[e.jsx(P,{children:e.jsxs(I,{className:"text-green-400 flex items-center",children:[e.jsx(j,{className:"w-5 h-5 mr-2"}),">"," ADMIN MANAGEMENT"]})}),e.jsxs(R,{children:[e.jsxs("form",{onSubmit:C,className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:c,onChange:r=>{h(r.target.value),s(null),n(null)},placeholder:"Principal ID",className:"w-full bg-black border border-green-500/30 px-4 py-2 text-green-500  placeholder-green-500/30 focus:border-green-500 focus:outline-none transition-colors pr-10"}),e.jsx(b,{className:"absolute right-3 top-2.5 h-5 w-5 text-green-500/50"})]}),e.jsxs(v,{children:[y&&e.jsxs(u.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"text-red-500 text-sm border border-red-500/30 p-2 flex items-center",children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),">"," ERROR: ",y]}),f&&e.jsxs(u.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"text-green-500 text-sm border border-green-500/30 p-2",children:[">"," ",f]})]}),e.jsxs("button",{type:"submit",className:"w-full px-4 py-2 border border-green-500 hover:bg-green-500  hover:text-black transition-colors flex items-center justify-center",children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"ADD ADMIN"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"text-green-400 text-sm mb-3",children:[">"," CURRENT ADMINS"]}),e.jsx("div",{className:"space-y-2",children:e.jsx(v,{children:g.map(r=>e.jsxs(u.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"flex items-center justify-between p-2 border border-green-500/30  hover:border-green-500 transition-colors",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(j,{className:"w-4 h-4 mr-2 text-green-500/50"}),e.jsxs("span",{className:"font-mono",children:[E(r.principal),r.principal===m&&e.jsx("span",{className:"text-green-500/50 ml-2",children:"(you)"})]})]}),k===r.principal?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>M(r.principal),className:"text-red-500 hover:text-red-400",children:"Confirm"}),e.jsx("button",{onClick:()=>o(null),className:"text-green-500 hover:text-green-400",children:"Cancel"})]}):r.principal!==m&&e.jsx("button",{onClick:()=>o(r.principal),className:"text-green-500/50 hover:text-red-500 transition-colors",children:e.jsx(O,{className:"w-4 h-4"})})]},r.principal))})})]})]})]})};export{V as AdminManagement};
//# sourceMappingURL=AdminManagement-CUSqLSiP.js.map
