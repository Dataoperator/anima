{"version":3,"file":"WaveformGenerator-CUiqk8y6.js","sources":["../../src/hooks/useAnima.js","../../src/components/personality/WaveformGenerator.tsx"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nimport { useAuth } from './useAuth';\n\nexport const useAnima = () => {\n  const { identity, actor } = useAuth();\n  const [animas, setAnimas] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [activeAnima, setActiveAnima] = useState(null);\n\n  const fetchUserAnimas = useCallback(async () => {\n    if (!actor || !identity) return;\n    \n    try {\n      setLoading(true);\n      const principal = identity.getPrincipal();\n      const userAnimas = await actor.get_user_animas(principal);\n      setAnimas(userAnimas);\n      return userAnimas;\n    } catch (err) {\n      console.error('Error fetching animas:', err);\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  }, [actor, identity]);\n\n  const getAnima = useCallback(async (id) => {\n    if (!actor) return null;\n    \n    try {\n      const anima = await actor.get_anima(id);\n      setActiveAnima(anima);\n      return anima;\n    } catch (err) {\n      console.error('Error fetching anima:', err);\n      setError(err.message);\n      return null;\n    }\n  }, [actor]);\n\n  const createAnima = useCallback(async () => {\n    if (!actor || !identity) return null;\n    \n    try {\n      setLoading(true);\n      const anima = await actor.create_anima();\n      await fetchUserAnimas(); // Refresh list\n      return anima;\n    } catch (err) {\n      console.error('Error creating anima:', err);\n      setError(err.message);\n      return null;\n    } finally {\n      setLoading(false);\n    }\n  }, [actor, identity, fetchUserAnimas]);\n\n  useEffect(() => {\n    fetchUserAnimas();\n  }, [fetchUserAnimas]);\n\n  return {\n    animas,\n    activeAnima,\n    loading,\n    error,\n    fetchUserAnimas,\n    getAnima,\n    createAnima,\n    actor\n  };\n};","import React, { useRef, useEffect } from 'react';\n\ntype WaveformProps = {\n  type: 'Stable' | 'Fluctuating' | 'Entangled';\n  amplitude: number;\n  frequency: number;\n  className?: string;\n};\n\nexport const WaveformGenerator: React.FC<WaveformProps> = ({\n  type,\n  amplitude,\n  frequency,\n  className = ''\n}) => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  useEffect(() => {\n    if (!canvasRef.current) return;\n\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n\n    // Set up animation\n    let animationFrameId: number;\n    let time = 0;\n\n    const render = () => {\n      if (!canvas || !ctx) return;\n\n      // Clear canvas\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n      // Set line style\n      ctx.lineWidth = 2;\n      ctx.strokeStyle = type === 'Entangled' \n        ? '#FF61DC' // quantum-pink\n        : '#7B61FF'; // quantum-purple\n\n      // Start drawing path\n      ctx.beginPath();\n      ctx.moveTo(0, canvas.height / 2);\n\n      // Generate waveform based on type\n      for (let x = 0; x < canvas.width; x++) {\n        let y = canvas.height / 2;\n\n        switch (type) {\n          case 'Stable':\n            // Straight line with slight noise\n            y += Math.random() * 2 - 1;\n            break;\n\n          case 'Fluctuating':\n            // Sine wave with varying amplitude\n            y += Math.sin(x * frequency + time) * \n                 amplitude * (canvas.height / 4);\n            break;\n\n          case 'Entangled':\n            // Double sine wave with phase relationship\n            const wave1 = Math.sin(x * frequency + time) * \n                         amplitude * (canvas.height / 6);\n            const wave2 = Math.sin(x * frequency + time + Math.PI) * \n                         amplitude * (canvas.height / 6);\n            y += (wave1 + wave2) / 2;\n            break;\n        }\n\n        ctx.lineTo(x, y);\n      }\n\n      // Stroke the path\n      ctx.stroke();\n\n      // Update time for animation\n      time += 0.05;\n\n      // Request next frame\n      animationFrameId = requestAnimationFrame(render);\n    };\n\n    render();\n\n    return () => {\n      cancelAnimationFrame(animationFrameId);\n    };\n  }, [type, amplitude, frequency]);\n\n  return (\n    <canvas\n      ref={canvasRef}\n      className={`w-full h-full ${className}`}\n      style={{\n        filter: type === 'Entangled' \n          ? 'drop-shadow(0 0 8px rgba(255, 97, 220, 0.3))' \n          : 'drop-shadow(0 0 8px rgba(123, 97, 255, 0.3))'\n      }}\n    />\n  );\n};"],"names":["useAnima","identity","actor","useAuth","animas","setAnimas","useState","loading","setLoading","error","setError","activeAnima","setActiveAnima","fetchUserAnimas","useCallback","principal","userAnimas","err","getAnima","id","anima","createAnima","useEffect","WaveformGenerator","type","amplitude","frequency","className","canvasRef","useRef","canvas","ctx","animationFrameId","time","render","x","y","wave1","wave2","jsx"],"mappings":"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"}