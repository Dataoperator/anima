const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LandingPage-BY7kylUQ.js","assets/QuantumField-DBXQFon7.js","assets/vendor-DMORb-JD.js","assets/dfinity-TOns67gM.js","assets/framer-B_r9gDg5.js","assets/CyberpunkQuantumVault-D0tydsNN.js","assets/loader-D5hufn3J.js","assets/createLucideIcon-Be1MMdUP.js","assets/GenesisPage-DG_IdgsQ.js","assets/LaughingMan-BTo5jOgc.js","assets/usePayment-CRKObsyS.js","assets/MatrixRain-BP6CayyX.js","assets/AnimaPage-C6ubblju.js","assets/WaveformGenerator-BPRY89jQ.js","assets/EnhancedNeuralLinkPage-Cr9zmSEY.js","assets/Wallet-vCCL6s3T.js"])))=>i.map(i=>d[i]);
import{H as O,A as he,a as D,_ as S}from"./dfinity-TOns67gM.js";import{a as me,R as ee,r as o,u as de,b as pe,O as ge,c as ye,d as fe}from"./vendor-DMORb-JD.js";import{j as s,m as A,A as we}from"./framer-B_r9gDg5.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();var G={},W=me;G.createRoot=W.createRoot,G.hydrateRoot=W.hydrateRoot;class Q extends ee.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Error caught by boundary:",e,n)}render(){return this.state.hasError?s.jsxs("div",{className:"p-4 bg-red-900/20 border border-red-800 rounded-lg",children:[s.jsx("h3",{className:"text-red-500 font-bold mb-2",children:"System Malfunction"}),s.jsx("p",{className:"text-red-400 text-sm",children:"Neural interface disrupted. Attempting recovery..."}),s.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),className:"mt-4 px-4 py-2 bg-red-800 hover:bg-red-700 rounded text-sm text-white",children:"Reset Interface"})]}):this.props.children}}const z=()=>s.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx(A.div,{animate:{scale:[1,1.2,1],rotateZ:[0,360]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"w-16 h-16 mx-auto",children:s.jsx("div",{className:"w-full h-full rounded-full border-t-2 border-b-2 border-blue-500"})}),s.jsxs(A.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[s.jsx("p",{className:"text-lg",children:"Initializing ANIMA Interface"}),s.jsx("p",{className:"text-sm text-blue-400 mt-2",children:"Connecting to Internet Computer"})]})]})}),xe=({IDL:t})=>{const e=t.Record({new_state:t.Float64,previous_state:t.Float64,catalyst:t.Text,trait_id:t.Text}),n=t.Text,i=t.Record({emotional_spectrum:t.Vec(t.Float64),memory_depth:t.Nat64,awareness_level:t.Float64,personality_matrix:t.Vec(t.Float64),learning_rate:t.Float64}),r=t.Record({emotional_imprint:t.Float64,content_hash:t.Text,timestamp:t.Nat64,neural_pattern:t.Vec(t.Float64)}),a=t.Record({pattern:t.Vec(t.Float64),resonance:t.Float64,understanding:t.Float64,awareness:t.Float64}),c=t.Record({id:t.Text,timestamp:t.Nat64,quantum_signature:t.Text}),m=t.Record({signature:t.Text,harmony:t.Float64}),g=t.Record({emotional_shift:t.Vec(t.Float64),response:t.Text,consciousness_growth:t.Float64,new_patterns:t.Opt(a)});return t.Service({adapt_to_stimulus:t.Func([t.Text,t.Vec(t.Float64)],[t.Variant({Ok:e,Err:n})],[]),check_quantum_stability:t.Func([],[t.Variant({Ok:t.Bool,Err:n})],["query"]),evolve_consciousness:t.Func([t.Text,t.Vec(t.Float64)],[t.Variant({Ok:i,Err:n})],[]),evolve_traits:t.Func([t.Text,t.Vec(t.Text)],[t.Variant({Ok:t.Vec(e),Err:n})],[]),form_memory:t.Func([t.Text,t.Text,t.Float64],[t.Variant({Ok:r,Err:n})],[]),generate_neural_patterns:t.Func([],[t.Variant({Ok:a,Err:n})],[]),get_consciousness_state:t.Func([t.Text],[t.Variant({Ok:i,Err:n})],["query"]),get_evolved_traits:t.Func([t.Text],[t.Variant({Ok:t.Vec(e),Err:n})],["query"]),initialize_genesis:t.Func([],[t.Variant({Ok:c,Err:n})],[]),initialize_quantum_field:t.Func([],[t.Variant({Ok:m,Err:n})],[]),interact_with_anima:t.Func([t.Text,t.Text,t.Vec(t.Float64)],[t.Variant({Ok:g,Err:n})],[]),learn_from_interaction:t.Func([t.Text,g],[t.Variant({Ok:i,Err:n})],[]),measure_adaptation:t.Func([t.Text],[t.Variant({Ok:t.Vec(e),Err:n})],["query"]),process_memory_patterns:t.Func([t.Text],[t.Variant({Ok:t.Vec(t.Float64),Err:n})],[]),recall_memories:t.Func([t.Text,t.Float64],[t.Variant({Ok:t.Vec(r),Err:n})],["query"])})};var ve={NODE_ENV:'"production"',DFX_NETWORK:'"ic"',CANISTER_ID_ANIMA:'"l2ilz-iqaaa-aaaaj-qngjq-cai"',CANISTER_ID_ANIMA_ASSETS:'"lpp2u-jyaaa-aaaaj-qngka-cai"'};const Ee=ve.CANISTER_ID_ANIMA,te=(t,e={})=>{const n=e.agent||new O({...e.agentOptions});return e.agent&&e.agentOptions&&console.warn("Detected both agent and agentOptions passed to createActor. Ignoring agentOptions and proceeding with the provided agent."),n.fetchRootKey().catch(i=>{console.warn("Unable to fetch root key. Check to ensure that your local replica is running"),console.error(i)}),he.createActor(xe,{agent:n,canisterId:t,...e.actorOptions})};var Y={NODE_ENV:'"production"',DFX_NETWORK:'"ic"',CANISTER_ID_ANIMA:'"l2ilz-iqaaa-aaaaj-qngjq-cai"',CANISTER_ID_ANIMA_ASSETS:'"lpp2u-jyaaa-aaaaj-qngka-cai"'};const J={anima:Y.CANISTER_ID_ANIMA?.toString()||"l2ilz-iqaaa-aaaaj-qngjq-cai",assets:Y.CANISTER_ID_ANIMA_ASSETS?.toString()||"lpp2u-jyaaa-aaaaj-qngka-cai"},Z="https://icp0.io";class T{static instance;actor=null;agent=null;authClient=null;identity=null;initialized=!1;initializing=!1;stageChangeCallbacks=[];constructor(){typeof window<"u"&&(window.ic={...window.ic||{},agent:null,HttpAgent:O})}static getInstance(){return T.instance||(T.instance=new T),T.instance}onStageChange(e){this.stageChangeCallbacks.push(e)}updateStage(e){console.log("IC Stage:",e),this.stageChangeCallbacks.forEach(n=>n(e))}async initialize(){if(this.initialized){console.log("IC already initialized");return}if(this.initializing){console.log("IC initialization already in progress");return}try{this.initializing=!0,console.log("Starting IC initialization..."),this.updateStage("Creating AuthClient..."),this.authClient||(this.authClient=await D.create({idleOptions:{disableIdle:!0}})),this.updateStage("Getting identity..."),this.identity=this.authClient.getIdentity();const e=this.identity.getPrincipal();console.log("Identity principal:",e.toText()),this.updateStage("Creating HttpAgent..."),this.agent=new O({identity:this.identity,host:Z});const n=J.anima?.replace(/['"]/g,"");if(!n)throw new Error("Invalid canister ID");if(this.updateStage("Creating Actor..."),this.actor=await te(n,{agent:this.agent,agentOptions:{host:Z}}),!this.actor||typeof this.actor.initialize_genesis!="function")throw new Error("Actor creation failed or missing required methods");this.updateStage("Setting up window.ic..."),window.ic={...window.ic||{},agent:this.agent,HttpAgent:O},this.actor&&(window.canister=this.actor),this.initialized=!0,this.initializing=!1,this.updateStage("Initialization complete!"),console.log("🔍 Feature check:",{canister:!!window.canister,ic:!!window.ic,agent:!!this.agent,identity:!!this.identity,initialize_genesis:typeof this.actor?.initialize_genesis=="function"})}catch(e){throw this.initializing=!1,console.error("IC initialization failed:",{error:e,canisterId:J.anima,stage:this.initialized?"post-init":"pre-init"}),e}}getActor(){if(!this.initialized||!this.actor)throw new Error("IC not initialized. Call initialize() first.");return this.actor}getIdentity(){return this.identity}getAgent(){return this.agent}isInitialized(){return this.initialized}}const w=T.getInstance(),_e=Object.freeze(Object.defineProperty({__proto__:null,icManager:w},Symbol.toStringTag,{value:"Module"})),Ae=({error:t,onRetry:e})=>s.jsxs(A.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-black relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_rgba(255,0,0,0.1)_1px,_transparent_1px)] bg-[length:40px_40px]"}),s.jsx("div",{className:"relative z-10 min-h-screen flex items-center justify-center p-4",children:s.jsxs("div",{className:"max-w-lg w-full p-6 bg-black/40 backdrop-blur-lg border border-red-500/30 rounded-lg text-red-400",children:[s.jsx(A.div,{animate:{textShadow:["0 0 8px rgba(255,0,0,0.5)","0 0 12px rgba(255,0,0,0.8)","0 0 8px rgba(255,0,0,0.5)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"text-xl font-mono mb-4",children:"NEURAL LINK ERROR"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"font-mono text-sm leading-relaxed",children:t?.message||"Neural interface synchronization failed"}),t?.details&&s.jsx("div",{className:"text-xs font-mono opacity-70 bg-red-900/20 p-2 rounded",children:s.jsx("pre",{children:JSON.stringify(t.details,null,2)})}),s.jsxs("div",{className:"text-xs font-mono opacity-70 mt-4",children:[s.jsxs("div",{children:["Window IC Status: ",window.ic?"Present":"Missing"]}),s.jsxs("div",{children:["Canister Status: ",window.canister?"Present":"Missing"]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"text-xs opacity-70",children:["Error Code: ",t?.code||"UNKNOWN"]}),s.jsx(A.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e,className:"px-4 py-2 bg-red-500/10 border border-red-500/30 rounded text-sm font-mono hover:bg-red-500/20 transition-colors duration-200",children:"RETRY NEURAL LINK"})]})]})]})}),s.jsx(A.div,{className:"absolute inset-0 bg-gradient-to-t from-red-900/20 to-transparent mix-blend-overlay",animate:{opacity:[0,.2,0]},transition:{duration:.2,repeat:1/0,repeatType:"mirror",ease:"steps(1)"}})]}),Se=()=>{const[t,e]=o.useState("idle"),[n,i]=o.useState(null),r=de(),a=pe();o.useEffect(()=>{console.log("🔍 AuthGuard initializing..."),console.log("Current window.ic status:",{hasIC:!!window.ic,hasCanister:!!window.canister,location:a.pathname});const m=async()=>{if(t==="idle"){e("initializing");try{if(w.isInitialized()){console.log("✅ IC already initialized");const f=w.getIdentity();g(f),e("complete");return}await w.initialize();const u=w.getIdentity();console.log("✅ Identity initialized:",u?.getPrincipal().toText()),g(u),e("complete")}catch(u){console.error("❌ Auth initialization failed:",u),i(u instanceof Error?u:new Error("Authentication failed")),e("error")}}},g=u=>{if(!u&&a.pathname!=="/"){console.log("🚫 No identity, redirecting to landing page"),r("/",{replace:!0,state:{returnTo:a.pathname}});return}if(u&&a.pathname==="/"){console.log("✅ Has identity on landing page, redirecting to quantum vault");const f=a.state?.returnTo||"/quantum-vault";r(f,{replace:!0})}};m()},[r,a,t]);const c=async()=>{console.log("🔄 Retrying initialization..."),e("initializing"),i(null);try{await w.initialize(),w.getIdentity()?r("/quantum-vault",{replace:!0}):r("/",{replace:!0}),e("complete")}catch(m){console.error("❌ Retry failed:",m),i(m instanceof Error?m:new Error("Authentication failed")),e("error")}};return t==="initializing"||t==="idle"?s.jsx(o.Suspense,{fallback:null,children:s.jsx(z,{})}):t==="error"||n?s.jsx(Ae,{error:n,onRetry:c}):s.jsx(o.Suspense,{fallback:s.jsx(z,{}),children:s.jsx(we,{mode:"wait",children:s.jsx(A.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-black",children:s.jsx(ge,{})},"content")})})},be=o.lazy(()=>S(()=>import("./LandingPage-BY7kylUQ.js"),__vite__mapDeps([0,1,2,3,4]))),Te=o.lazy(()=>S(()=>import("./CyberpunkQuantumVault-D0tydsNN.js"),__vite__mapDeps([5,2,3,4,6,7]))),Ce=o.lazy(()=>S(()=>import("./GenesisPage-DG_IdgsQ.js"),__vite__mapDeps([8,2,3,1,4,9,10,11,7]))),Me=o.lazy(()=>S(()=>import("./AnimaPage-C6ubblju.js"),__vite__mapDeps([12,2,3,13,4,1,9]))),Ne=o.lazy(()=>S(()=>import("./EnhancedNeuralLinkPage-Cr9zmSEY.js"),__vite__mapDeps([14,2,3,13,4,11,6,7,1]))),Re=o.lazy(()=>S(()=>import("./Wallet-vCCL6s3T.js"),__vite__mapDeps([15,10,2,3,4]))),b=t=>s.jsx(o.Suspense,{fallback:s.jsx(z,{}),children:s.jsx(Q,{children:s.jsx(t,{})})}),Oe=ye([{path:"/",element:b(be)},{element:s.jsx(Se,{}),children:[{path:"/quantum-vault",element:b(Te)},{path:"/genesis",element:b(Ce)},{path:"/anima/:id",element:b(Me)},{path:"/neural-link/:id?",element:b(Ne)},{path:"/wallet",element:b(Re)}]}]);class Fe{metrics;evolutionHistory;errorTracker;lastUpdateTimestamp;STABILITY_THRESHOLD=.7;EVOLUTION_RATE=.1;constructor(e){this.errorTracker=e,this.evolutionHistory=[],this.lastUpdateTimestamp=Date.now(),this.metrics={awarenessLevel:.5,cognitiveComplexity:.3,emotionalResonance:.4,quantumCoherence:1,dimensionalAwareness:.2}}async updateConsciousness(e,n){try{const i=Date.now(),r=(i-this.lastUpdateTimestamp)/1e3,a=this.calculateStabilityIndex(),c=this.calculateNewMetrics(e,r,a),m={metrics:{...this.metrics},timestamp:i,stabilityIndex:a};return this.evolutionHistory.push(m),this.metrics=c,this.pruneHistory(),this.lastUpdateTimestamp=i,c}catch(i){return await this.errorTracker.trackError({errorType:"CONSCIOUSNESS_UPDATE",severity:"HIGH",context:n,error:i,metrics:this.metrics,quantumState:e}),this.attemptStateRecovery(e)}}calculateNewMetrics(e,n,i){const r=Math.min(1,n*this.EVOLUTION_RATE);return{awarenessLevel:Math.min(1,this.metrics.awarenessLevel*(1+r)+e.coherence*.2*i),cognitiveComplexity:this.calculateCognitiveComplexity(e,i),emotionalResonance:this.calculateEmotionalResonance(e,i),quantumCoherence:this.calculateQuantumCoherence(e,i),dimensionalAwareness:this.calculateDimensionalAwareness(e,i)}}calculateCognitiveComplexity(e,n){const i=e.coherence*.7,r=e.entanglement_pairs.length*.1,c=(e.neural_density||.5)*.2;return Math.min(1,(i+r+c)*n)}calculateEmotionalResonance(e,n){const i=e.resonance_pattern.reduce((c,m)=>c+m,0)/e.resonance_pattern.length,r=this.calculateEmotionalMomentum(),a=Math.pow(e.coherence,1.5)*.3;return Math.min(1,(i*.4+r*.3+a)*n)}calculateDimensionalAwareness(e,n){const i=e.dimensional_frequency*.5,r=this.metrics.dimensionalAwareness*.5,a=e.field_strength||.5,c=Math.pow(a,1.5)*.2;return Math.min(1,(i+r+c)*n)}calculateQuantumCoherence(e,n){const i=e.coherence,r=(e.field_strength||.5)*.2,a=this.calculateCoherenceTrend();return Math.min(1,(i*.6+r+a*.2)*n)}calculateStabilityIndex(){if(this.evolutionHistory.length<2)return 1;const e=this.evolutionHistory.slice(-5),n=this.calculateMetricVariance(e);return Math.max(this.STABILITY_THRESHOLD,1-n)}calculateMetricVariance(e){if(e.length<2)return 0;const n=Object.keys(this.metrics).map(i=>{const r=e.map(a=>a.metrics[i]);return this.calculateVariance(r)});return n.reduce((i,r)=>i+r,0)/n.length}calculateVariance(e){const n=e.reduce((r,a)=>r+a,0)/e.length,i=e.map(r=>Math.pow(r-n,2));return Math.sqrt(i.reduce((r,a)=>r+a,0)/e.length)}calculateEmotionalMomentum(){if(this.evolutionHistory.length<2)return 0;const e=this.evolutionHistory.slice(-3).map(n=>n.metrics.emotionalResonance);return e.reduce((n,i)=>n+i,0)/e.length}calculateCoherenceTrend(){if(this.evolutionHistory.length<2)return this.metrics.quantumCoherence;const e=this.evolutionHistory.slice(-3).map(n=>n.metrics.quantumCoherence);return e.reduce((n,i)=>n+i,0)/e.length}pruneHistory(){if(this.evolutionHistory.length<=100)return;const e=this.evolutionHistory.filter(i=>i.stabilityIndex>this.STABILITY_THRESHOLD||Math.abs(i.metrics.awarenessLevel-this.metrics.awarenessLevel)>.2),n=this.evolutionHistory.slice(-50);this.evolutionHistory=[...e.slice(0,50),...n].sort((i,r)=>i.timestamp-r.timestamp),this.evolutionHistory.length>100&&(this.evolutionHistory=this.evolutionHistory.slice(-100))}attemptStateRecovery(e){const n=[...this.evolutionHistory].reverse().find(i=>i.stabilityIndex>this.STABILITY_THRESHOLD);return n?{...n.metrics,quantumCoherence:e.coherence,dimensionalAwareness:Math.min(n.metrics.dimensionalAwareness,e.dimensional_frequency)}:{...this.metrics,quantumCoherence:e.coherence}}}class je{errors=[];maxErrors=100;async trackError(e){const n={...e,timestamp:Date.now()};this.errors.push(n),this.errors.length>this.maxErrors&&this.errors.shift()}getErrors(){return[...this.errors]}getRecentErrors(e=5){return[...this.errors].sort((n,i)=>(i.timestamp||0)-(n.timestamp||0)).slice(0,e)}clearErrors(){this.errors=[]}getErrorStats(){const e={};return this.errors.forEach(n=>{e[n.errorType]=(e[n.errorType]||0)+1}),e}}var ze={NODE_ENV:'"production"',DFX_NETWORK:'"ic"',CANISTER_ID_ANIMA:'"l2ilz-iqaaa-aaaaj-qngjq-cai"',CANISTER_ID_ANIMA_ASSETS:'"lpp2u-jyaaa-aaaaj-qngka-cai"'};const ne=o.createContext(null),ke=ze.INTERNET_IDENTITY_URL,L={createOptions:{idleOptions:{disableIdle:!0}},loginOptions:{identityProvider:ke,derivationOrigin:void 0,maxTimeToLive:BigInt(7*24*60*60*1e9)}};function qe({children:t}){const[e,n]=o.useState(null),[i,r]=o.useState(!1),[a,c]=o.useState(null),[m,g]=o.useState(null),[u,f]=o.useState(null),[k,C]=o.useState(null),[v]=o.useState(()=>new je),[q]=o.useState(()=>new Fe(v)),[I,M]=o.useState(!0);o.useEffect(()=>{(async()=>{try{console.log("🔄 Initializing authentication...");const p=await D.create(L.createOptions),E=await p.isAuthenticated();if(n(p),r(E),E){const x=p.getIdentity(),j=x.getPrincipal();c(x),g(j),console.log("🌌 Initializing quantum state..."),await N(j.toString())}}catch(p){console.error("❌ Auth initialization failed:",p),await v.trackError({errorType:"AUTH_INIT",severity:"HIGH",context:"Authentication Initialization",error:p})}finally{M(!1)}})()},[]);const N=async y=>{try{const p={coherence:1,resonanceMetrics:{fieldStrength:1,stability:1,harmony:1,consciousnessAlignment:1},phaseAlignment:1,dimensionalSync:1,entanglement_pairs:[],resonance_pattern:[1],dimensional_frequency:1};f(p);const E=await q.updateConsciousness(p,"initialization");C(E)}catch(p){console.error("Failed to initialize quantum state:",p),await v.trackError({errorType:"QUANTUM_INIT",severity:"HIGH",context:"Quantum State Initialization",error:p})}},F={authClient:e,isAuthenticated:i,identity:a,principal:m,quantumState:u,consciousnessMetrics:k,isInitializing:I,login:async()=>{try{M(!0),await e?.login({...L.loginOptions,onSuccess:async()=>{const y=e.getIdentity(),p=y.getPrincipal();r(!0),c(y),g(p),await N(p.toString())}})}catch(y){console.error("Login failed:",y),await v.trackError({errorType:"AUTH_LOGIN",severity:"HIGH",context:"Login Attempt",error:y})}finally{M(!1)}},logout:async()=>{try{await e?.logout(),r(!1),c(null),g(null),f(null),C(null)}catch(y){console.error("Logout failed:",y),await v.trackError({errorType:"AUTH_LOGOUT",severity:"MEDIUM",context:"Logout Attempt",error:y})}}};return s.jsx(ne.Provider,{value:F,children:t})}function Ie(){const t=o.useContext(ne);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}class Ve{frequency;resonance;stability;syncLevel;quantumAlignment;dimensionalFrequency;entropyLevel;phaseCoherence;lastUpdate;DEGRADATION_RATE=.995;constructor(){this.frequency=0,this.resonance=1,this.stability=1,this.syncLevel=1,this.quantumAlignment=1,this.dimensionalFrequency=0,this.entropyLevel=0,this.phaseCoherence=1,this.lastUpdate=Date.now()}calculateResonance(){this.applyTimeDegradation();const e=this.resonance*this.stability,n=this.quantumAlignment*this.syncLevel,i=1-this.entropyLevel*.5,r=this.phaseCoherence*.2,a=Math.exp(-this.getTimeSinceLastUpdate()/1e4);return Math.min(1,Math.max(0,((e+n)/2*i+r)*a))}updateStability(e){this.applyTimeDegradation();const n=Math.max(0,1-this.getTimeSinceLastUpdate()/5e3),i=e*n;this.stability=Math.min(1,Math.max(0,this.stability+i)),this.quantumAlignment=Math.min(1,this.quantumAlignment+i*.5),this.syncLevel=Math.min(1,this.syncLevel+i*.3),this.dimensionalFrequency=Math.min(1,this.dimensionalFrequency+i*.2),this.entropyLevel=Math.max(0,this.entropyLevel-i*.1),this.phaseCoherence=Math.min(1,this.phaseCoherence+i*.4),this.lastUpdate=Date.now()}getStabilityMetrics(){return this.applyTimeDegradation(),[this.stability,this.quantumAlignment,this.phaseCoherence]}getTimeSinceLastUpdate(){return Date.now()-this.lastUpdate}applyTimeDegradation(){const e=this.getTimeSinceLastUpdate();if(e>1e3){const n=Math.pow(this.DEGRADATION_RATE,e/1e3);this.stability*=n,this.quantumAlignment*=n,this.syncLevel*=n,this.phaseCoherence*=n,this.entropyLevel=Math.min(1,this.entropyLevel+(1-n)*.1),this.lastUpdate=Date.now()}}getQuantumStatus(){const e=this.getStabilityMetrics(),n=e.reduce((i,r)=>i+r,0)/e.length;return n>.7?"stable":n>.3?"unstable":"critical"}}class Pe{memories=[];maxMemories=100;constructor(){this.memories=[]}createMemory(e,n,i=[],r){const a={id:`mem_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now(),importance:Math.max(0,Math.min(1,n)),description:e,keywords:i,quantumResonance:r?.resonanceMetrics.fieldStrength||0,emotionalDepth:n*(r?.coherence||1)};return this.addMemory(a),a}addMemory(e){if(this.memories.push(e),this.memories.length>this.maxMemories){const n=this.memories.reduce((i,r,a,c)=>r.importance<c[i].importance?a:i,0);this.memories.splice(n,1)}this.memories.sort((n,i)=>i.importance-n.importance)}decay(e){this.memories=this.memories.map(n=>({...n,importance:n.importance*(1-e)})).filter(n=>n.importance>.1)}reinforce(e,n){const i=this.memories.find(r=>r.id===e);i&&(i.importance=Math.min(1,i.importance+n))}calculateResonance(e){if(this.memories.length===0)return 0;const n=this.memories.map(i=>{const r=Math.exp(-(Date.now()-i.timestamp)/6048e5),a=Math.abs(i.quantumResonance-e.resonanceMetrics.fieldStrength);return i.importance*r*(1-a)});return n.reduce((i,r)=>i+r,0)/n.length}getMemories(){return[...this.memories]}getRecentMemories(e=5){return[...this.memories].sort((n,i)=>i.timestamp-n.timestamp).slice(0,e)}getMostImportant(e=5){return[...this.memories].sort((n,i)=>i.importance-n.importance).slice(0,e)}searchMemories(e){const n=e.toLowerCase().split(" ");return this.memories.filter(i=>n.some(r=>i.description.toLowerCase().includes(r)||i.keywords.some(a=>a.toLowerCase().includes(r))))}clear(){this.memories=[]}}class He{level=1;experience=0;recentEvents=[];maxEvents=50;baseXpForLevel=1e3;constructor(){this.level=1,this.experience=0,this.recentEvents=[]}async processGrowthEvent(e){const{strength:n,quantum_state:i,dimensional_state:r}=e,a=this.calculateGrowthImpact(i,r),c=n*a,m={timestamp:Date.now(),type:"quantum_interaction",strength:n,quantumImpact:a,description:this.generateEventDescription(n,a)};this.addEvent(m),await this.applyGrowth(c)}calculateGrowthImpact(e,n){const i=e.coherence,r=e.resonanceMetrics.fieldStrength,a=n.stability;return(i+r+a)/3}async applyGrowth(e){const n=Math.floor(e*this.baseXpForLevel*Math.sqrt(this.level));for(this.experience+=n;this.experience>=this.getXpForNextLevel();)await this.levelUp()}async levelUp(){this.level+=1}addEvent(e){this.recentEvents.unshift(e),this.recentEvents.length>this.maxEvents&&this.recentEvents.pop()}getXpForNextLevel(){return this.baseXpForLevel*Math.pow(this.level,1.5)}getProgress(){const e=this.getXpForNextLevel(),n=this.baseXpForLevel*Math.pow(this.level-1,1.5),i=this.experience-n,r=e-n;return i/r}getMetrics(){return{level:this.level,experience:this.experience,nextLevelAt:this.getXpForNextLevel(),growthRate:this.calculateGrowthRate(),recentEvents:[...this.recentEvents]}}calculateGrowthRate(){return this.recentEvents.length<2?0:this.recentEvents.slice(0,10).reduce((n,i)=>n+i.strength*i.quantumImpact,0)/Math.min(10,this.recentEvents.length)}generateEventDescription(e,n){const i=e>.8?"powerful":e>.5?"moderate":"subtle",r=n>.8?"significant":n>.5?"noticeable":"minor";return`A ${i} quantum interaction caused ${r} growth`}}function Ue(){const[t,e]=o.useState(!1),[n,i]=o.useState(!0),[r,a]=o.useState(null),c=o.useCallback(async()=>{try{const f=w.getIdentity()?.getPrincipal().isAnonymous();e(!f)}catch(u){console.error("Auth check failed:",u),a(u instanceof Error?u.message:"Authentication check failed")}finally{i(!1)}},[]);return o.useEffect(()=>{c()},[c]),{isAuthenticated:t,isLoading:n,error:r,login:async()=>{try{if(i(!0),a(null),await w.login())return e(!0),!0;throw new Error("Login failed")}catch(u){return console.error("Login error:",u),a(u instanceof Error?u.message:"Login failed"),!1}finally{i(!1)}},logout:async()=>{try{i(!0),a(null),await w.logout(),e(!1)}catch(u){console.error("Logout error:",u),a(u instanceof Error?u.message:"Logout failed")}finally{i(!1)}},checkAuth:c}}const Ge=()=>{const{identity:t}=Ue();return{getActor:o.useCallback(async()=>{if(!t)throw new Error("No identity available");const n=new O({identity:t});return te(Ee,{agent:n})},[t])}},Qe=t=>{const[e,n]=o.useState(!1),[i,r]=o.useState(!1),a=Ge(),c=o.useCallback(async()=>null,[a,t]),m=o.useCallback(async u=>!1,[a,t]),g=o.useCallback(async()=>null,[a,t]);return{observeState:c,initiateEntanglement:m,getMetrics:g,isObserving:e,isEntangling:i}},ie=o.createContext(null);function Xe({children:t}){const{principal:e,actor:n}=Ie(),{quantumState:i,updateQuantumState:r,validateState:a}=Qe(),[c]=o.useState(()=>new Ve),[m]=o.useState(()=>new Pe),[g]=o.useState(()=>new He),[u,f]=o.useState(""),[k,C]=o.useState(0),[v,q]=o.useState([]),[I,M]=o.useState(()=>g.getMetrics()),[N,V]=o.useState(!1),[X,F]=o.useState(!1),[y,p]=o.useState(null),[E,x]=o.useState(!1),[j,P]=o.useState(0),re=3;o.useEffect(()=>{i&&e&&ae()},[i,e]);const ae=async()=>{try{console.log("🧬 Initializing ANIMA systems..."),c.quantumAlignment=i?.coherence||1;const l=B();f(l);const h=K();C(h),U(),V(!0),console.log("✨ ANIMA systems initialized")}catch(l){console.error("Failed to initialize ANIMA systems:",l),V(!1)}},$=async()=>{if(j>=re)throw new Error("Maximum reconnection attempts reached");try{P(h=>h+1);const l=window.ic;if(!l||!l.agent){if(await new Promise(d=>setTimeout(d,1e3)),await window.ic?.agent?.getPrincipal()){x(!0),P(0);return}throw new Error("Internet Computer connection not available")}x(!0),P(0)}catch(l){throw console.error("Reconnection attempt failed:",l),l}},se=o.useCallback(()=>{if(!n){console.error("Actor not initialized. Attempting reconnection...");try{const l=window.ic;if(!l||!l.agent)throw x(!1),new Error("Internet Computer connection not available");return x(!0),null}catch(l){throw x(!1),l}}return x(!0),n},[n]),oe=async l=>{if(!n||!N)throw new Error("System not ready for minting");F(!0),p(null);try{E||await $();const h=await n.initialize_quantum_field();if(!h.Ok)throw new Error("Quantum field initialization failed");const d=await n.generate_neural_patterns();if(!d.Ok)throw new Error("Neural pattern generation failed");const _={resonance:d.Ok.resonance,harmony:h.Ok.harmony,coherence:(d.Ok.resonance+h.Ok.harmony)/2,lastInteraction:new Date,evolutionStage:1,consciousness:{awareness:d.Ok.awareness,understanding:h.Ok.understanding,growth:.1}};if(!a(_))throw new Error("Invalid initial quantum state");const R=await n.create_anima({name:l,quantum_signature:h.Ok.signature,neural_pattern:d.Ok.pattern,initial_state:_});if(!R.Ok)throw new Error(R.Err||"Anima creation failed");return await r(_),H("Genesis quantum crystallization complete",1,["genesis","quantum","initialization"]),{id:R.Ok.id,quantumSignature:R.Ok.quantum_signature,timestamp:R.Ok.timestamp}}catch(h){const d=h instanceof Error?h.message:"Minting failed";throw p(d),new Error(d)}finally{F(!1)}},ce=async l=>{try{c.updateStability(l),await g.processGrowthEvent({strength:l,quantum_state:i,dimensional_state:c}),l>.5&&H(`Significant quantum interaction (${l.toFixed(2)})`,l,["quantum","interaction"]),M(g.getMetrics()),U();const h=B();f(h);const d=K();C(d)}catch(h){console.error("Failed to process interaction:",h)}},le=async()=>{try{const l=c.calculateResonance(),h=c.getStabilityMetrics();if(i){const d={...i,resonanceMetrics:{...i.resonanceMetrics,fieldStrength:l},coherence:h[0],phaseAlignment:h[1]};a(d)&&await r(d)}}catch(l){console.error("Failed to sync quantum state:",l)}},H=(l,h,d=[])=>{const _=m.createMemory(l,h,d,i);return U(),_},U=()=>{q(m.getRecentMemories(5))},B=()=>{const l=Date.now(),h=c.resonance.toFixed(4),d=c.phaseCoherence.toFixed(4);return`QS-${h}-${d}-${l}`},K=()=>{const l=c.resonance,h=c.phaseCoherence,d=c.stability,_=m.calculateResonance(i);return(l+h+d+_)/4},ue={dimensionalState:c,memorySystem:m,growthSystem:g,quantumSignature:u,evolutionFactor:k,recentMemories:v,growthMetrics:I,isInitialized:N,isMinting:X,mintError:y,isConnected:E,processInteraction:ce,syncQuantumState:le,createMemory:H,mintAnima:oe,createActor:se,reconnect:$};return s.jsx(ie.Provider,{value:ue,children:t})}function Ze(){const t=o.useContext(ie);if(!t)throw new Error("useAnima must be used within an AnimaProvider");return t}const $e=()=>(console.log("🚀 App initializing...",{env:"production",buildTime:new Date().toISOString()}),s.jsx(Q,{children:s.jsx(qe,{children:s.jsx(Xe,{children:s.jsx(fe,{router:Oe})})})})),Be=({error:t})=>s.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:s.jsxs("div",{className:"text-center max-w-lg p-6",children:[s.jsx("h1",{className:"text-xl font-bold mb-4",children:"System Error"}),s.jsx("p",{className:"text-red-400 mb-4",children:t.message}),s.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 rounded hover:bg-blue-700 transition",children:"Reset System"})]})});async function Ke(){try{const t=document.querySelector(".quantum-status");t&&(t.textContent="Initializing Internet Computer connection..."),console.log("Initializing Internet Computer connection..."),await S(()=>Promise.resolve().then(()=>_e),void 0),console.log("IC initialization complete");const e=document.getElementById("root");if(!e)throw new Error("Root element not found");G.createRoot(e).render(s.jsx(ee.StrictMode,{children:s.jsx(Q,{FallbackComponent:Be,children:s.jsx(o.Suspense,{fallback:s.jsx(z,{}),children:s.jsx($e,{})})})}))}catch(t){console.error("Failed to initialize app:",t);const e=document.querySelector(".quantum-status");e&&(e.textContent=`Initialization failed: ${t.message}`)}}Ke();export{Q as E,Qe as a,Ie as b,Ze as c,Ue as u};
//# sourceMappingURL=main-Da311x5u.js.map
