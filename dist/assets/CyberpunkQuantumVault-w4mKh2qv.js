import{r as o,u as E}from"./vendor-DMORb-JD.js";import{u as R,a as k,W as A}from"./WaveformGenerator-CQRpQMOQ.js";import{A as I}from"./dfinity-TOns67gM.js";import{c as j,M as _,B as C}from"./MatrixRain-CSfoVol3.js";import{j as a,m as u,A as q}from"./framer-B_r9gDg5.js";import{L as O}from"./LaughingMan-BTo5jOgc.js";import"./useAuth-BPIBBZIh.js";import"./main-DOjFPmdr.js";const S=j("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]),F=j("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]),B=j("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),H=j("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),$=({IDL:t})=>{const e=t.Record({e8s:t.Nat64}),s=t.Record({timestamp_nanos:t.Nat64}),n=t.Record({to:t.Vec(t.Nat8),fee:e,memo:t.Nat64,from_subaccount:t.Opt(t.Vec(t.Nat8)),created_at_time:t.Opt(s),amount:e}),r=t.Variant({TxTooOld:t.Record({allowed_window_nanos:t.Nat64}),BadFee:t.Record({expected_fee:e}),TxDuplicate:t.Record({duplicate_of:t.Nat64}),TxCreatedInFuture:t.Null,InsufficientFunds:t.Record({balance:e})}),i=t.Variant({Ok:t.Nat64,Err:r}),h=t.Record({account:t.Vec(t.Nat8)}),p=t.Record({owner:t.Principal,subaccount:t.Opt(t.Vec(t.Nat8))}),N=t.Record({to:p,fee:t.Opt(t.Nat),memo:t.Opt(t.Vec(t.Nat8)),from_subaccount:t.Opt(t.Vec(t.Nat8)),created_at_time:t.Opt(t.Nat64),amount:t.Nat}),y=t.Variant({GenericError:t.Record({message:t.Text,error_code:t.Nat}),TemporarilyUnavailable:t.Null,BadBurn:t.Record({min_burn_amount:t.Nat}),Duplicate:t.Record({duplicate_of:t.Nat}),BadFee:t.Record({expected_fee:t.Nat}),CreatedInFuture:t.Record({ledger_time:t.Nat64}),TooOld:t.Null,InsufficientFunds:t.Record({balance:t.Nat})}),v=t.Variant({Ok:t.Nat,Err:y});return t.Service({account_balance:t.Func([h],[e],["query"]),transfer:t.Func([n],[i],[]),icrc1_balance_of:t.Func([p],[t.Nat],["query"]),icrc1_transfer:t.Func([N],[v],[])})};var b=(t=>(t.Network="NETWORK",t.Authentication="AUTHENTICATION",t.Authorization="AUTHORIZATION",t.Validation="VALIDATION",t.Business="BUSINESS",t.Technical="TECHNICAL",t.Security="SECURITY",t.Quantum="QUANTUM",t))(b||{}),T=(t=>(t.Critical="CRITICAL",t.High="HIGH",t.Medium="MEDIUM",t.Low="LOW",t.Info="INFO",t))(T||{});class x{static instance;errors=[];MAX_ERRORS=100;listeners=[];constructor(){this.setupGlobalHandlers()}static getInstance(){return x.instance||(x.instance=new x),x.instance}setupGlobalHandlers(){window.addEventListener("unhandledrejection",e=>{this.trackError({type:"UnhandledPromiseRejection",category:"TECHNICAL",severity:"HIGH",message:e.reason?.message||"Unknown Promise Error",timestamp:new Date,context:{reason:e.reason}})}),window.addEventListener("error",e=>{this.trackError({type:"GlobalError",category:"TECHNICAL",severity:"CRITICAL",message:e.message,timestamp:new Date,context:{filename:e.filename,lineno:e.lineno,colno:e.colno},stackTrace:e.error?.stack})})}trackError(e){const s={...e,context:{...e.context,url:window.location.href,userAgent:navigator.userAgent,timestamp:new Date().toISOString()}};this.errors=[s,...this.errors].slice(0,this.MAX_ERRORS),this.notifyListeners(s),this.persistErrors()}notifyListeners(e){this.listeners.forEach(s=>s(e))}addListener(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(s=>s!==e)}}persistErrors(){try{localStorage.setItem("anima_error_log",JSON.stringify(this.errors))}catch(e){console.warn("Failed to persist errors:",e)}}getErrors(){return this.errors}clearErrors(){this.errors=[],this.persistErrors()}getErrorSummary(){const e=this.errors.reduce((s,n)=>(s[n.type]=(s[n.type]||0)+1,s),{});return{total:this.errors.length,byType:e,mostRecent:this.errors[0],mostCommonType:Object.entries(e).sort(([,s],[,n])=>n-s)[0]?.[0]}}}x.getInstance();var U={NODE_ENV:'"production"',DFX_NETWORK:'"ic"',CANISTER_ID_ANIMA:'"l2ilz-iqaaa-aaaaj-qngjq-cai"',CANISTER_ID_ANIMA_ASSETS:'"lpp2u-jyaaa-aaaaj-qngka-cai"'};class f{static instance=null;initialized=!1;syncInterval=null;retryInterval=null;errorTracker;MAX_RETRIES=3;RETRY_INTERVAL=3e4;STABILITY_THRESHOLD=.7;state=null;constructor(){this.errorTracker=x.getInstance(),this.setupRetryMechanism()}static getInstance(){return f.instance||(f.instance=new f),f.instance}setupRetryMechanism(){this.retryInterval=setInterval(()=>{this.retryFailedTransactions()},this.RETRY_INTERVAL)}async retryFailedTransactions(){if(this.state)for(const[e,s]of this.state.pendingTransactions.entries())if(s.status==="failed"&&s.retryCount<this.MAX_RETRIES)try{await this.processTransaction(s),s.retryCount++}catch(n){this.logTransactionError(s,n)}else s.retryCount>=this.MAX_RETRIES&&(this.state.pendingTransactions.delete(e),this.errorTracker.trackError({type:"MaxRetriesExceeded",category:b.Network,severity:T.High,message:`Transaction ${e} exceeded max retries`,timestamp:new Date,context:{transaction:s}}))}async processTransaction(e){if(!this.state)throw new Error("Wallet not initialized");const s=await I.createActor($,{agent:window.ic?.agent,canisterId:U.LEDGER_CANISTER_ID});try{await s.transfer({to:Array.from(Buffer.from(e.id,"hex")),amount:{e8s:e.amount},fee:{e8s:BigInt(1e4)},memo:BigInt(0),from_subaccount:[],created_at_time:[]}),e.status="completed",await this.updateTransactionState(e)}catch(n){throw n}}async updateTransactionState(e){if(!this.state)return;const s=this.state.transactions.findIndex(n=>n.id===e.id);s!==-1&&(this.state.transactions[s]=e),e.status==="completed"?this.state.pendingTransactions.delete(e.id):this.state.pendingTransactions.set(e.id,e),await this.updateQuantumMetrics()}async updateQuantumMetrics(){if(!this.state)return;const e=this.state.transactions.slice(-10),s=e.filter(n=>n.status==="completed").length/e.length;this.state.quantumMetrics={coherenceLevel:Math.max(.1,Math.min(1,this.state.quantumMetrics.coherenceLevel*(1+(s-.5)))),stabilityIndex:s,entanglementFactor:Math.min(1,this.state.quantumMetrics.entanglementFactor+.1),stabilityStatus:this.getStabilityStatus(s)}}getStabilityStatus(e){return e>=this.STABILITY_THRESHOLD?"stable":e>=this.STABILITY_THRESHOLD/2?"unstable":"critical"}async initialize(){if(!this.initialized)try{this.state={address:await this.generateAddress(),balance:BigInt(0),isLocked:!1,transactions:[],quantumMetrics:{coherenceLevel:1,stabilityIndex:1,entanglementFactor:0,stabilityStatus:"stable"},pendingTransactions:new Map},await this.refreshBalance(),this.startSync(),this.initialized=!0}catch(e){throw this.errorTracker.trackError({type:"InitializationFailed",category:b.System,severity:T.Critical,message:e instanceof Error?e.message:"Wallet initialization failed",timestamp:new Date}),e}}async generateAddress(){return"sample_address"}startSync(){this.syncInterval||(this.syncInterval=setInterval(async()=>{try{await this.refreshBalance(),await this.updateQuantumMetrics()}catch(e){console.error("Sync failed:",e)}},3e4))}async spend(e,s=""){if(!this.state)throw new Error("Wallet not initialized");if(this.state.isLocked)throw new Error("Wallet is locked");if(e>this.state.balance)throw new Error("Insufficient balance");if(this.state.quantumMetrics.stabilityStatus==="critical")throw new Error("Wallet stability critical");const n={id:crypto.randomUUID(),type:"spend",amount:e,timestamp:Date.now(),status:"pending",memo:s,quantumMetrics:this.state.quantumMetrics,retryCount:0};try{return this.state.transactions.unshift(n),this.state.pendingTransactions.set(n.id,n),await this.processTransaction(n),n}catch(r){throw this.logTransactionError(n,r),r}}logTransactionError(e,s){e.status="failed",this.errorTracker.trackError({type:"TransactionFailed",category:b.Network,severity:T.High,message:s instanceof Error?s.message:"Transaction failed",timestamp:new Date,context:{transaction:e}})}getBalance(){if(!this.state)throw new Error("Wallet not initialized");return this.state.balance}getQuantumMetrics(){if(!this.state)throw new Error("Wallet not initialized");return this.state.quantumMetrics}isInitialized(){return this.initialized}dispose(){this.syncInterval&&clearInterval(this.syncInterval),this.retryInterval&&clearInterval(this.retryInterval),f.instance=null}async refreshBalance(){if(!this.state)throw new Error("Wallet not initialized")}}const V=({className:t="",cellSize:e=30,gridSize:s=10,pulseColor:n="cyan",quantumState:r=.5})=>{const[i,h]=o.useState([]),[p,N]=o.useState([]),y=o.useRef(),v=o.useRef(0);o.useEffect(()=>{const c=[];for(let l=-s;l<=s;l++)for(let d=-s;d<=s;d++){const g=-l-d;Math.abs(g)<=s&&c.push({x:l*e*1.5,y:(d+l/2)*e*Math.sqrt(3),value:Math.random(),active:Math.random()>.5,quantum:!1})}h(c);const m=l=>{v.current=l*.001,h(d=>d.map(g=>({...g,value:Math.sin(v.current+g.x*.01+g.y*.01)*.5+.5,quantum:p.includes(d.indexOf(g))}))),y.current=requestAnimationFrame(m)};return y.current=requestAnimationFrame(m),()=>{y.current&&cancelAnimationFrame(y.current)}},[e,s]),o.useEffect(()=>{const c=setInterval(()=>{const m=Array.from({length:Math.floor(i.length*r)},()=>Math.floor(Math.random()*i.length));N(m)},2e3);return()=>clearInterval(c)},[i.length,r]);const M=c=>{const m=[];for(let l=0;l<6;l++){const d=Math.PI/3*l;m.push(`${c*Math.cos(d)},${c*Math.sin(d)}`)}return m.join(" ")};return a.jsx("div",{className:`relative overflow-hidden ${t}`,children:a.jsx("svg",{className:"w-full h-full",viewBox:`${-s*e*2} ${-s*e*2} ${s*e*4} ${s*e*4}`,children:a.jsx("g",{transform:`translate(${s*e}, ${s*e})`,children:i.map((c,m)=>a.jsxs(u.g,{initial:{opacity:0,scale:0},animate:{opacity:c.active?1:.3,scale:c.quantum?[1,1.1,1]:1},transition:{duration:c.quantum?2:.5,repeat:c.quantum?1/0:void 0},transform:`translate(${c.x}, ${c.y})`,children:[a.jsx("polygon",{points:M(e*.95),fill:`rgba(${n==="cyan"?"6, 182, 212":"124, 58, 237"}, ${c.value*.2})`,stroke:`rgba(${n==="cyan"?"6, 182, 212":"124, 58, 237"}, ${c.quantum?.8:.3})`,strokeWidth:c.quantum?2:1}),c.quantum&&a.jsx(u.circle,{r:e*.2,fill:`rgba(${n==="cyan"?"6, 182, 212":"124, 58, 237"}, 0.5)`,animate:{r:[e*.2,e*.4,e*.2],opacity:[.8,.2,.8]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})]},m))})})})},W=()=>{const[t,e]=o.useState([]);o.useEffect(()=>{const n=["Quantum state synchronized","Neural patterns stable","Network integrity verified","Security protocols active","Consciousness matrix online","Reality anchors calibrated","Dimensional resonance optimal","Quantum coherence maintained","Neural pathways secured","Time dilation normalized"],r=["system","network","quantum","security"],h=setInterval(()=>{const p=n[Math.floor(Math.random()*n.length)],N=r[Math.floor(Math.random()*r.length)];e(y=>[...y.slice(-4),{id:Math.random().toString(),content:p,type:N}])},2e3);return()=>clearInterval(h)},[]);const s=n=>{switch(n){case"system":return"text-cyan-300";case"network":return"text-emerald-300";case"quantum":return"text-purple-300";case"security":return"text-red-300";default:return"text-white"}};return a.jsx("div",{className:"w-full h-full font-mono text-sm",children:a.jsx(q,{mode:"popLayout",children:t.map((n,r)=>a.jsxs(u.div,{initial:{opacity:0,x:-20},animate:{opacity:.7,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:`flex items-center gap-2 ${s(n.type)}`,children:[a.jsxs("span",{className:"opacity-50",children:["[",n.type.toUpperCase(),"]"]}),a.jsx("span",{children:n.content}),a.jsx(u.span,{animate:{opacity:[1,0]},transition:{duration:1,repeat:1/0},className:"w-1 h-1 rounded-full bg-current"})]},n.id))})})},Q=({anima:t,onClick:e,position:s})=>a.jsx(u.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},whileHover:{scale:1.1,zIndex:50},className:"absolute w-48 h-48 cursor-pointer",style:{left:s.x,top:s.y},onClick:e,children:a.jsxs("div",{className:"relative w-full h-full",children:[a.jsx("svg",{className:"absolute inset-0",viewBox:"0 0 100 100",children:a.jsx("polygon",{points:"50,0 93.3,25 93.3,75 50,100 6.7,75 6.7,25",fill:"rgba(0,0,0,0.5)",stroke:"rgba(0,255,255,0.3)",strokeWidth:"1",className:"animate-pulse"})}),a.jsxs("div",{className:"absolute inset-4 flex flex-col justify-between p-3 text-cyan-300",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-sm font-mono truncate",children:t.designation}),a.jsxs("div",{className:"text-xs opacity-50",children:["#",t.id.padStart(4,"0")]})]}),a.jsx(A,{type:"Stable",amplitude:.5,frequency:1,className:"h-8"}),a.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("span",{className:"opacity-50",children:"EL"}),a.jsxs("span",{children:[t.energyLevel,"%"]})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("span",{className:"opacity-50",children:"ED"}),a.jsx("span",{children:t.edition})]})]})]})]})}),P=()=>{const[t,e]=o.useState(BigInt(0)),[s,n]=o.useState({coherenceLevel:1,stabilityIndex:1,entanglementFactor:0,stabilityStatus:"stable"});o.useEffect(()=>{const i=f.getInstance(),h=()=>{i.isInitialized()&&(e(i.getBalance()),n(i.getQuantumMetrics()))};h();const p=setInterval(h,3e4);return()=>clearInterval(p)},[]);const r=i=>`${Number(i)/1e8} ICP`;return a.jsxs(u.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"fixed top-4 right-4 bg-black/50 backdrop-blur-sm border border-cyan-500/30 rounded-lg p-4",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-xs text-cyan-300 opacity-50",children:"QUANTUM BALANCE"}),a.jsx("span",{className:"text-lg font-mono text-cyan-300",children:r(t)})]})}),a.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-2 text-xs",children:[a.jsxs("div",{className:"text-cyan-300/50",children:[a.jsx("div",{children:"Coherence"}),a.jsxs("div",{children:[Math.round(s.coherenceLevel*100),"%"]})]}),a.jsxs("div",{className:"text-cyan-300/50",children:[a.jsx("div",{children:"Stability"}),a.jsxs("div",{children:[Math.round(s.stabilityIndex*100),"%"]})]}),a.jsxs("div",{className:"text-cyan-300/50",children:[a.jsx("div",{children:"Entanglement"}),a.jsxs("div",{children:[Math.round(s.entanglementFactor*100),"%"]})]})]})]})},G=()=>{const[t]=o.useState({network:Math.random()*100,security:Math.random()*100,quantum:Math.random()*100,neural:Math.random()*100});return a.jsxs(u.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"fixed left-4 top-1/2 -translate-y-1/2 bg-black/50 backdrop-blur-sm border border-cyan-500/30 rounded-lg p-4 space-y-4",children:[a.jsx(w,{icon:F,label:"NETWORK",value:t.network}),a.jsx(w,{icon:H,label:"SECURITY",value:t.security}),a.jsx(w,{icon:S,label:"QUANTUM",value:t.quantum}),a.jsx(w,{icon:C,label:"NEURAL",value:t.neural})]})},w=({icon:t,label:e,value:s})=>a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs text-cyan-300 opacity-50",children:[a.jsx(t,{size:12}),a.jsx("span",{children:e})]}),a.jsx("div",{className:"h-1 bg-black/50 rounded-full overflow-hidden",children:a.jsx(u.div,{className:"h-full bg-cyan-500",initial:{width:0},animate:{width:`${s}%`},transition:{duration:1}})})]}),tt=()=>{const t=E(),{animas:e}=R();k(),o.useEffect(()=>{(async()=>{const r=f.getInstance();if(!r.isInitialized())try{await r.initialize()}catch(i){console.error("Failed to initialize wallet:",i)}})()},[]);const s=n=>{const i=n/Math.max(e.length,1)*Math.PI*2;return{x:Math.cos(i)*300+window.innerWidth/2-96,y:Math.sin(i)*300+window.innerHeight/2-96}};return a.jsxs("div",{className:"fixed inset-0 bg-black text-white overflow-hidden",children:[a.jsx("div",{className:"fixed inset-0 opacity-20",children:a.jsx(_,{})}),a.jsx("div",{className:"fixed inset-0 opacity-30",children:a.jsx(V,{})}),a.jsxs("div",{className:"relative z-10 w-full h-full",children:[a.jsx(P,{}),a.jsx(G,{}),a.jsx(u.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{delay:.5},className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:a.jsx(O,{className:"w-32 h-32 opacity-30"})}),e.map((n,r)=>a.jsx(Q,{anima:n,onClick:()=>t(`/anima/${n.id}`),position:s(r)},n.id)),a.jsxs(u.button,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>t("/genesis"),className:"fixed bottom-8 left-1/2 -translate-x-1/2 px-6 py-3 bg-transparent border border-cyan-500/30 rounded-lg text-cyan-300  flex items-center gap-3 hover:bg-cyan-500/20",children:[a.jsx(B,{className:"w-5 h-5"}),a.jsx("span",{className:"font-mono",children:"INITIALIZE GENESIS PROTOCOL"})]}),a.jsx("div",{className:"fixed bottom-4 left-4 right-4 h-16",children:a.jsx(W,{})})]})]})};export{tt as CyberpunkQuantumVault,tt as default};
//# sourceMappingURL=CyberpunkQuantumVault-w4mKh2qv.js.map
