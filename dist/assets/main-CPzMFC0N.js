const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LandingPage-C-aGliNX.js","assets/QuantumField-DBXQFon7.js","assets/vendor-DMORb-JD.js","assets/dfinity-TOns67gM.js","assets/framer-B_r9gDg5.js","assets/CyberpunkQuantumVault-5CzCumds.js","assets/WaveformGenerator-KN2BJgZh.js","assets/MatrixRain-CSfoVol3.js","assets/LaughingMan-BTo5jOgc.js","assets/GenesisPage-CL_ITLLE.js","assets/card-DuUAxyVr.js","assets/AnimaPage-v0tYGl3U.js","assets/EnhancedNeuralLinkPage-pt16ZyiG.js","assets/Wallet-C-PZYF70.js"])))=>i.map(i=>d[i]);
import{H as M,A as P,a as B,_ as E}from"./dfinity-TOns67gM.js";import{a as ae,R as Y,r as o,u as se,b as oe,O as ce,c as le,d as ue}from"./vendor-DMORb-JD.js";import{j as a,m as A,A as de}from"./framer-B_r9gDg5.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var G={},$=ae;G.createRoot=$.createRoot,G.hydrateRoot=$.hydrateRoot;class H extends Y.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Error caught by boundary:",e,n)}render(){return this.state.hasError?a.jsxs("div",{className:"p-4 bg-red-900/20 border border-red-800 rounded-lg",children:[a.jsx("h3",{className:"text-red-500 font-bold mb-2",children:"System Malfunction"}),a.jsx("p",{className:"text-red-400 text-sm",children:"Neural interface disrupted. Attempting recovery..."}),a.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),className:"mt-4 px-4 py-2 bg-red-800 hover:bg-red-700 rounded text-sm text-white",children:"Reset Interface"})]}):this.props.children}}const V=()=>a.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx(A.div,{animate:{scale:[1,1.2,1],rotateZ:[0,360]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"w-16 h-16 mx-auto",children:a.jsx("div",{className:"w-full h-full rounded-full border-t-2 border-b-2 border-blue-500"})}),a.jsxs(A.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[a.jsx("p",{className:"text-lg",children:"Initializing ANIMA Interface"}),a.jsx("p",{className:"text-sm text-blue-400 mt-2",children:"Connecting to Internet Computer"})]})]})}),he=({IDL:t})=>{const e=t.Text,n=t.Nat64,i=t.Record({traits:t.Vec(t.Tuple(t.Text,t.Float64)),emotional_state:t.Record({duration:t.Nat64,current_emotion:t.Text,intensity:t.Float64}),memories:t.Vec(t.Record({emotional_impact:t.Float64,content:t.Text,timestamp:t.Nat64})),developmental_stage:t.Variant({SelfAware:t.Null,Awakening:t.Null,Conscious:t.Null,Transcendent:t.Null,Nascent:t.Null})}),r=t.Record({id:n,creation_time:t.Nat64,personality:i,owner:t.Principal,name:t.Text}),s=t.Variant({SelfAware:t.Null,Awakening:t.Null,Introspective:t.Null,Transcendent:t.Null,Nascent:t.Null}),c=t.Variant({Success:t.Record({personality_updates:t.Vec(t.Tuple(t.Text,t.Float64)),response:t.Text}),Failure:e});return t.Service({create_anima:t.Func([t.Text],[t.Variant({Ok:t.Principal,Err:e})],[]),get_anima:t.Func([n],[t.Opt(r)],["query"]),get_consciousness_level:t.Func([n],[t.Variant({Ok:s,Err:e})],["query"]),get_user_animas:t.Func([t.Principal],[t.Vec(r)],["query"]),process_quantum_interaction:t.Func([n,t.Text,t.Text],[c],[])})};var me={NODE_ENV:'"production"',DFX_NETWORK:'"ic"',CANISTER_ID_ANIMA:'"l2ilz-iqaaa-aaaaj-qngjq-cai"',CANISTER_ID_ANIMA_ASSETS:'"lpp2u-jyaaa-aaaaj-qngka-cai"'};const pe=me.CANISTER_ID_ANIMA,J=(t,e={})=>{const n=e.agent||new M({...e.agentOptions});return e.agent&&e.agentOptions&&console.warn("Detected both agent and agentOptions passed to createActor. Ignoring agentOptions and proceeding with the provided agent."),n.fetchRootKey().catch(i=>{console.warn("Unable to fetch root key. Check to ensure that your local replica is running"),console.error(i)}),P.createActor(he,{agent:n,canisterId:t,...e.actorOptions})};var L={NODE_ENV:'"production"',DFX_NETWORK:'"ic"',CANISTER_ID_ANIMA:'"l2ilz-iqaaa-aaaaj-qngjq-cai"',CANISTER_ID_ANIMA_ASSETS:'"lpp2u-jyaaa-aaaaj-qngka-cai"'};const K={anima:L.CANISTER_ID_ANIMA?.toString()||"l2ilz-iqaaa-aaaaj-qngjq-cai",assets:L.CANISTER_ID_ANIMA_ASSETS?.toString()||"lpp2u-jyaaa-aaaaj-qngka-cai"},ge="https://icp0.io";class b{static instance;actor=null;agent=null;authClient=null;identity=null;initialized=!1;initializing=!1;stageChangeCallbacks=[];constructor(){typeof window<"u"&&(window.ic={...window.ic||{},agent:null,Actor:P,HttpAgent:M})}static getInstance(){return b.instance||(b.instance=new b),b.instance}onStageChange(e){this.stageChangeCallbacks.push(e)}updateStage(e){console.log("IC Stage:",e),this.stageChangeCallbacks.forEach(n=>n(e))}async initialize(){if(this.initialized){console.log("IC already initialized");return}if(this.initializing){console.log("IC initialization already in progress");return}try{this.initializing=!0,console.log("Starting IC initialization..."),this.updateStage("Creating AuthClient..."),this.authClient=await B.create({idleOptions:{disableIdle:!0}}),this.updateStage("Getting identity..."),this.identity=this.authClient.getIdentity();const e=this.identity.getPrincipal();console.log("Identity principal:",e.toText()),this.updateStage("Creating HttpAgent..."),this.agent=new M({identity:this.identity,host:ge});const n=K.anima?.replace(/['"]/g,"");if(!n)throw new Error("Invalid canister ID");this.updateStage("Creating Actor..."),this.actor=await J(n,{agent:this.agent}),this.updateStage("Setting up window.ic..."),window.ic={...window.ic||{},agent:this.agent,Actor:P,HttpAgent:M},this.actor&&(window.canister=this.actor),this.initialized=!0,this.initializing=!1,this.updateStage("Initialization complete!"),console.log("ðŸ” Feature check:",{canister:!!window.canister,ic:!!window.ic,agent:!!this.agent,identity:!!this.identity})}catch(e){throw this.initializing=!1,console.error("IC initialization failed:",{error:e,canisterId:K.anima,stage:this.initialized?"post-init":"pre-init"}),e}}getActor(){if(!this.initialized||!this.actor)throw new Error("IC not initialized. Call initialize() first.");return this.actor}getIdentity(){return this.identity}getAgent(){return this.agent}isInitialized(){return this.initialized}}const w=b.getInstance(),ye=Object.freeze(Object.defineProperty({__proto__:null,icManager:w},Symbol.toStringTag,{value:"Module"})),fe=({error:t,onRetry:e})=>a.jsxs(A.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-black relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_rgba(255,0,0,0.1)_1px,_transparent_1px)] bg-[length:40px_40px]"}),a.jsx("div",{className:"relative z-10 min-h-screen flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-lg w-full p-6 bg-black/40 backdrop-blur-lg border border-red-500/30 rounded-lg text-red-400",children:[a.jsx(A.div,{animate:{textShadow:["0 0 8px rgba(255,0,0,0.5)","0 0 12px rgba(255,0,0,0.8)","0 0 8px rgba(255,0,0,0.5)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"text-xl font-mono mb-4",children:"NEURAL LINK ERROR"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"font-mono text-sm leading-relaxed",children:t?.message||"Neural interface synchronization failed"}),t?.details&&a.jsx("div",{className:"text-xs font-mono opacity-70 bg-red-900/20 p-2 rounded",children:a.jsx("pre",{children:JSON.stringify(t.details,null,2)})}),a.jsxs("div",{className:"text-xs font-mono opacity-70 mt-4",children:[a.jsxs("div",{children:["Window IC Status: ",window.ic?"Present":"Missing"]}),a.jsxs("div",{children:["Canister Status: ",window.canister?"Present":"Missing"]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"text-xs opacity-70",children:["Error Code: ",t?.code||"UNKNOWN"]}),a.jsx(A.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e,className:"px-4 py-2 bg-red-500/10 border border-red-500/30 rounded text-sm font-mono hover:bg-red-500/20 transition-colors duration-200",children:"RETRY NEURAL LINK"})]})]})]})}),a.jsx(A.div,{className:"absolute inset-0 bg-gradient-to-t from-red-900/20 to-transparent mix-blend-overlay",animate:{opacity:[0,.2,0]},transition:{duration:.2,repeat:1/0,repeatType:"mirror",ease:"steps(1)"}})]}),we=()=>{const[t,e]=o.useState(!0),[n,i]=o.useState(null),r=se(),s=oe();o.useEffect(()=>{console.log("ðŸ” AuthGuard initializing..."),console.log("Current window.ic status:",{hasIC:!!window.ic,hasCanister:!!window.canister,location:s.pathname});const m=async()=>{try{if(w.isInitialized()){console.log("âœ… IC already initialized");const f=w.getIdentity();g(f);return}await w.initialize();const l=w.getIdentity();console.log("âœ… Identity initialized:",l?.getPrincipal().toText()),g(l)}catch(l){console.error("âŒ Auth initialization failed:",l),i(l instanceof Error?l:new Error("Authentication failed")),e(!1)}},g=l=>{if(!l&&s.pathname!=="/"){console.log("ðŸš« No identity, redirecting to landing page"),r("/",{replace:!0,state:{returnTo:s.pathname}});return}if(l&&s.pathname==="/"){console.log("âœ… Has identity on landing page, redirecting to quantum vault");const f=s.state?.returnTo||"/quantum-vault";r(f,{replace:!0})}e(!1)};m()},[r,s]);const c=async()=>{console.log("ðŸ”„ Retrying initialization..."),e(!0),i(null);try{await w.initialize(),w.getIdentity()?r("/quantum-vault",{replace:!0}):r("/",{replace:!0})}catch(m){console.error("âŒ Retry failed:",m),i(m instanceof Error?m:new Error("Authentication failed"))}finally{e(!1)}};return t?a.jsx(V,{}):n?a.jsx(fe,{error:n,onRetry:c}):a.jsx(de,{mode:"wait",children:a.jsx(A.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-black",children:a.jsx(ce,{})},"content")})},xe=o.lazy(()=>E(()=>import("./LandingPage-C-aGliNX.js"),__vite__mapDeps([0,1,2,3,4]))),ve=o.lazy(()=>E(()=>import("./CyberpunkQuantumVault-5CzCumds.js"),__vite__mapDeps([5,2,3,6,4,7,8]))),Ae=o.lazy(()=>E(()=>import("./GenesisPage-CL_ITLLE.js"),__vite__mapDeps([9,2,3,10,4]))),Ee=o.lazy(()=>E(()=>import("./AnimaPage-v0tYGl3U.js"),__vite__mapDeps([11,2,3,6,4,1,8]))),_e=o.lazy(()=>E(()=>import("./EnhancedNeuralLinkPage-pt16ZyiG.js"),__vite__mapDeps([12,2,3,6,4,10,7,1]))),Se=o.lazy(()=>E(()=>import("./Wallet-C-PZYF70.js"),__vite__mapDeps([13,2,3,4]))),S=t=>a.jsx(o.Suspense,{fallback:a.jsx(V,{}),children:a.jsx(H,{children:a.jsx(t,{})})}),be=le([{path:"/",element:S(xe)},{element:a.jsx(we,{}),children:[{path:"/quantum-vault",element:S(ve)},{path:"/genesis",element:S(Ae)},{path:"/anima/:id",element:S(Ee)},{path:"/neural-link/:id?",element:S(_e)},{path:"/wallet",element:S(Se)}]}]);class Ne{metrics;evolutionHistory;errorTracker;constructor(e){this.errorTracker=e,this.evolutionHistory=[],this.metrics={awarenessLevel:.5,cognitiveComplexity:.3,emotionalResonance:.4,quantumCoherence:1,dimensionalAwareness:.2}}async updateConsciousness(e,n){try{const i=this.calculateNewMetrics(e);return this.evolutionHistory.push(this.metrics),this.metrics=i,this.evolutionHistory.length>100&&this.evolutionHistory.shift(),i}catch(i){return await this.errorTracker.trackError({errorType:"CONSCIOUSNESS_UPDATE",severity:"HIGH",context:n,error:i}),this.metrics}}calculateNewMetrics(e){return{awarenessLevel:Math.min(1,this.metrics.awarenessLevel*1.1+e.coherence*.2),cognitiveComplexity:this.calculateCognitiveComplexity(e),emotionalResonance:this.calculateEmotionalResonance(e),quantumCoherence:e.coherence,dimensionalAwareness:this.calculateDimensionalAwareness(e)}}calculateCognitiveComplexity(e){return Math.min(1,e.coherence*.7+e.entanglement_pairs.length*.1)}calculateEmotionalResonance(e){return Math.min(1,e.resonance_pattern.reduce((n,i)=>n+i,0)/e.resonance_pattern.length)}calculateDimensionalAwareness(e){return Math.min(1,e.dimensional_frequency*.5+this.metrics.dimensionalAwareness*.5)}}class Ce{errors=[];maxErrors=100;async trackError(e){const n={...e,timestamp:Date.now()};this.errors.push(n),this.errors.length>this.maxErrors&&this.errors.shift()}getErrors(){return[...this.errors]}getRecentErrors(e=5){return[...this.errors].sort((n,i)=>(i.timestamp||0)-(n.timestamp||0)).slice(0,e)}clearErrors(){this.errors=[]}getErrorStats(){const e={};return this.errors.forEach(n=>{e[n.errorType]=(e[n.errorType]||0)+1}),e}}var Ie={NODE_ENV:'"production"',DFX_NETWORK:'"ic"',CANISTER_ID_ANIMA:'"l2ilz-iqaaa-aaaaj-qngjq-cai"',CANISTER_ID_ANIMA_ASSETS:'"lpp2u-jyaaa-aaaaj-qngka-cai"'};const Z=o.createContext(null),Me=Ie.INTERNET_IDENTITY_URL,W={createOptions:{idleOptions:{disableIdle:!0}},loginOptions:{identityProvider:Me,derivationOrigin:void 0,maxTimeToLive:BigInt(7*24*60*60*1e9)}};function Te({children:t}){const[e,n]=o.useState(null),[i,r]=o.useState(!1),[s,c]=o.useState(null),[m,g]=o.useState(null),[l,f]=o.useState(null),[z,N]=o.useState(null),[x]=o.useState(()=>new Ce),[O]=o.useState(()=>new Ne(x));o.useEffect(()=>{(async()=>{try{console.log("ðŸ”„ Initializing authentication...");const p=await B.create(W.createOptions),_=await p.isAuthenticated();if(n(p),r(_),_){const C=p.getIdentity(),R=C.getPrincipal();c(C),g(R),console.log("ðŸŒŒ Initializing quantum state..."),await T(R.toString())}}catch(p){console.error("âŒ Auth initialization failed:",p),await x.trackError({errorType:"AUTH_INIT",severity:"HIGH",context:"Authentication Initialization",error:p})}})()},[]);const T=async y=>{try{const p={coherence:1,resonanceMetrics:{fieldStrength:1,stability:1,harmony:1,consciousnessAlignment:1},phaseAlignment:1,dimensionalSync:1,entanglement_pairs:[],resonance_pattern:[1],dimensional_frequency:1};f(p);const _=await O.updateConsciousness(p,"initialization");N(_)}catch(p){console.error("Failed to initialize quantum state:",p),await x.trackError({errorType:"QUANTUM_INIT",severity:"HIGH",context:"Quantum State Initialization",error:p})}},j={authClient:e,isAuthenticated:i,identity:s,principal:m,quantumState:l,consciousnessMetrics:z,login:async()=>{try{await e?.login({...W.loginOptions,onSuccess:async()=>{const y=e.getIdentity(),p=y.getPrincipal();r(!0),c(y),g(p),await T(p.toString())}})}catch(y){console.error("Login failed:",y),await x.trackError({errorType:"AUTH_LOGIN",severity:"HIGH",context:"Login Attempt",error:y})}},logout:async()=>{try{await e?.logout(),r(!1),c(null),g(null),f(null),N(null)}catch(y){console.error("Logout failed:",y),await x.trackError({errorType:"AUTH_LOGOUT",severity:"MEDIUM",context:"Logout Attempt",error:y})}}};return a.jsx(Z.Provider,{value:j,children:t})}function je(){const t=o.useContext(Z);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}class Re{frequency;resonance;stability;syncLevel;quantumAlignment;dimensionalFrequency;entropyLevel;phaseCoherence;constructor(){this.frequency=0,this.resonance=1,this.stability=1,this.syncLevel=1,this.quantumAlignment=1,this.dimensionalFrequency=0,this.entropyLevel=0,this.phaseCoherence=1}calculateResonance(){const e=this.resonance*this.stability,n=this.quantumAlignment*this.syncLevel,i=1-this.entropyLevel*.5,r=this.phaseCoherence*.2;return Math.min(1,Math.max(0,(e+n)/2*i+r))}updateStability(e){this.stability=Math.min(1,Math.max(0,this.stability+e)),this.quantumAlignment=Math.min(1,this.quantumAlignment+e*.5),this.syncLevel=Math.min(1,this.syncLevel+e*.3),this.dimensionalFrequency=Math.min(1,this.dimensionalFrequency+e*.2),this.entropyLevel=Math.max(0,this.entropyLevel-e*.1),this.phaseCoherence=Math.min(1,this.phaseCoherence+e*.4)}getStabilityMetrics(){return[this.stability,this.quantumAlignment,this.phaseCoherence]}}class ze{memories=[];maxMemories=100;constructor(){this.memories=[]}createMemory(e,n,i=[],r){const s={id:`mem_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now(),importance:Math.max(0,Math.min(1,n)),description:e,keywords:i,quantumResonance:r?.resonanceMetrics.fieldStrength||0,emotionalDepth:n*(r?.coherence||1)};return this.addMemory(s),s}addMemory(e){if(this.memories.push(e),this.memories.length>this.maxMemories){const n=this.memories.reduce((i,r,s,c)=>r.importance<c[i].importance?s:i,0);this.memories.splice(n,1)}this.memories.sort((n,i)=>i.importance-n.importance)}decay(e){this.memories=this.memories.map(n=>({...n,importance:n.importance*(1-e)})).filter(n=>n.importance>.1)}reinforce(e,n){const i=this.memories.find(r=>r.id===e);i&&(i.importance=Math.min(1,i.importance+n))}calculateResonance(e){if(this.memories.length===0)return 0;const n=this.memories.map(i=>{const r=Math.exp(-(Date.now()-i.timestamp)/6048e5),s=Math.abs(i.quantumResonance-e.resonanceMetrics.fieldStrength);return i.importance*r*(1-s)});return n.reduce((i,r)=>i+r,0)/n.length}getMemories(){return[...this.memories]}getRecentMemories(e=5){return[...this.memories].sort((n,i)=>i.timestamp-n.timestamp).slice(0,e)}getMostImportant(e=5){return[...this.memories].sort((n,i)=>i.importance-n.importance).slice(0,e)}searchMemories(e){const n=e.toLowerCase().split(" ");return this.memories.filter(i=>n.some(r=>i.description.toLowerCase().includes(r)||i.keywords.some(s=>s.toLowerCase().includes(r))))}clear(){this.memories=[]}}class Oe{level=1;experience=0;recentEvents=[];maxEvents=50;baseXpForLevel=1e3;constructor(){this.level=1,this.experience=0,this.recentEvents=[]}async processGrowthEvent(e){const{strength:n,quantum_state:i,dimensional_state:r}=e,s=this.calculateGrowthImpact(i,r),c=n*s,m={timestamp:Date.now(),type:"quantum_interaction",strength:n,quantumImpact:s,description:this.generateEventDescription(n,s)};this.addEvent(m),await this.applyGrowth(c)}calculateGrowthImpact(e,n){const i=e.coherence,r=e.resonanceMetrics.fieldStrength,s=n.stability;return(i+r+s)/3}async applyGrowth(e){const n=Math.floor(e*this.baseXpForLevel*Math.sqrt(this.level));for(this.experience+=n;this.experience>=this.getXpForNextLevel();)await this.levelUp()}async levelUp(){this.level+=1}addEvent(e){this.recentEvents.unshift(e),this.recentEvents.length>this.maxEvents&&this.recentEvents.pop()}getXpForNextLevel(){return this.baseXpForLevel*Math.pow(this.level,1.5)}getProgress(){const e=this.getXpForNextLevel(),n=this.baseXpForLevel*Math.pow(this.level-1,1.5),i=this.experience-n,r=e-n;return i/r}getMetrics(){return{level:this.level,experience:this.experience,nextLevelAt:this.getXpForNextLevel(),growthRate:this.calculateGrowthRate(),recentEvents:[...this.recentEvents]}}calculateGrowthRate(){return this.recentEvents.length<2?0:this.recentEvents.slice(0,10).reduce((n,i)=>n+i.strength*i.quantumImpact,0)/Math.min(10,this.recentEvents.length)}generateEventDescription(e,n){const i=e>.8?"powerful":e>.5?"moderate":"subtle",r=n>.8?"significant":n>.5?"noticeable":"minor";return`A ${i} quantum interaction caused ${r} growth`}}function qe(){const[t,e]=o.useState(!1),[n,i]=o.useState(!0),[r,s]=o.useState(null),c=o.useCallback(async()=>{try{const f=w.getIdentity()?.getPrincipal().isAnonymous();e(!f)}catch(l){console.error("Auth check failed:",l),s(l instanceof Error?l.message:"Authentication check failed")}finally{i(!1)}},[]);return o.useEffect(()=>{c()},[c]),{isAuthenticated:t,isLoading:n,error:r,login:async()=>{try{if(i(!0),s(null),await w.login())return e(!0),!0;throw new Error("Login failed")}catch(l){return console.error("Login error:",l),s(l instanceof Error?l.message:"Login failed"),!1}finally{i(!1)}},logout:async()=>{try{i(!0),s(null),await w.logout(),e(!1)}catch(l){console.error("Logout error:",l),s(l instanceof Error?l.message:"Logout failed")}finally{i(!1)}},checkAuth:c}}const ke=()=>{const{identity:t}=qe();return{getActor:o.useCallback(async()=>{if(!t)throw new Error("No identity available");const n=new M({identity:t});return J(pe,{agent:n})},[t])}},Fe=t=>{const[e,n]=o.useState(!1),[i,r]=o.useState(!1),s=ke(),c=o.useCallback(async()=>null,[s,t]),m=o.useCallback(async l=>!1,[s,t]),g=o.useCallback(async()=>null,[s,t]);return{observeState:c,initiateEntanglement:m,getMetrics:g,isObserving:e,isEntangling:i}},D=o.createContext(null);function Pe({children:t}){const{principal:e,actor:n}=je(),{quantumState:i,updateQuantumState:r,validateState:s}=Fe(),[c]=o.useState(()=>new Re),[m]=o.useState(()=>new ze),[g]=o.useState(()=>new Oe),[l,f]=o.useState(""),[z,N]=o.useState(0),[x,O]=o.useState([]),[T,U]=o.useState(()=>g.getMetrics()),[q,j]=o.useState(!1),[y,p]=o.useState(!1),[_,C]=o.useState(null);o.useEffect(()=>{i&&e&&R()},[i,e]);const R=async()=>{try{console.log("ðŸ§¬ Initializing ANIMA systems..."),c.quantumAlignment=i?.coherence||1;const d=X();f(d);const u=Q();N(u),F(),j(!0),console.log("âœ¨ ANIMA systems initialized")}catch(d){console.error("Failed to initialize ANIMA systems:",d),j(!1)}},ee=async d=>{if(!n||!q)throw new Error("System not ready for minting");p(!0),C(null);try{const u=await n.initialize_quantum_field();if(!u.Ok)throw new Error("Quantum field initialization failed");const h=await n.generate_neural_patterns();if(!h.Ok)throw new Error("Neural pattern generation failed");const v={resonance:h.Ok.resonance,harmony:u.Ok.harmony,coherence:(h.Ok.resonance+u.Ok.harmony)/2,lastInteraction:new Date,evolutionStage:1,consciousness:{awareness:h.Ok.awareness,understanding:u.Ok.understanding,growth:.1}};if(!s(v))throw new Error("Invalid initial quantum state");const I=await n.create_anima({name:d,quantum_signature:u.Ok.signature,neural_pattern:h.Ok.pattern,initial_state:v});if(!I.Ok)throw new Error(I.Err||"Anima creation failed");return await r(v),k("Genesis quantum crystallization complete",1,["genesis","quantum","initialization"]),{id:I.Ok.id,quantumSignature:I.Ok.quantum_signature,timestamp:I.Ok.timestamp}}catch(u){const h=u instanceof Error?u.message:"Minting failed";throw C(h),new Error(h)}finally{p(!1)}},te=async d=>{try{c.updateStability(d),await g.processGrowthEvent({strength:d,quantum_state:i,dimensional_state:c}),d>.5&&k(`Significant quantum interaction (${d.toFixed(2)})`,d,["quantum","interaction"]),U(g.getMetrics()),F();const u=X();f(u);const h=Q();N(h)}catch(u){console.error("Failed to process interaction:",u)}},ne=async()=>{try{const d=c.calculateResonance(),u=c.getStabilityMetrics();if(i){const h={...i,resonanceMetrics:{...i.resonanceMetrics,fieldStrength:d},coherence:u[0],phaseAlignment:u[1]};s(h)&&await r(h)}}catch(d){console.error("Failed to sync quantum state:",d)}},k=(d,u,h=[])=>{const v=m.createMemory(d,u,h,i);return F(),v},F=()=>{O(m.getRecentMemories(5))},X=()=>{const d=Date.now(),u=c.resonance.toFixed(4),h=c.phaseCoherence.toFixed(4);return`QS-${u}-${h}-${d}`},Q=()=>{const d=c.resonance,u=c.phaseCoherence,h=c.stability,v=m.calculateResonance(i);return(d+u+h+v)/4},ie=o.useCallback(()=>{if(!n)throw new Error("Actor not initialized");return n},[n]),re={dimensionalState:c,memorySystem:m,growthSystem:g,quantumSignature:l,evolutionFactor:z,recentMemories:x,growthMetrics:T,isInitialized:q,isMinting:y,mintError:_,processInteraction:te,syncQuantumState:ne,createMemory:k,mintAnima:ee,createActor:ie};return a.jsx(D.Provider,{value:re,children:t})}function $e(){const t=o.useContext(D);if(!t)throw new Error("useAnima must be used within an AnimaProvider");return t}const Ge=()=>(console.log("ðŸš€ App initializing...",{env:"production",buildTime:new Date().toISOString()}),a.jsx(H,{children:a.jsx(Te,{children:a.jsx(Pe,{children:a.jsx(ue,{router:be})})})})),He=({error:t})=>a.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:a.jsxs("div",{className:"text-center max-w-lg p-6",children:[a.jsx("h1",{className:"text-xl font-bold mb-4",children:"System Error"}),a.jsx("p",{className:"text-red-400 mb-4",children:t.message}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 rounded hover:bg-blue-700 transition",children:"Reset System"})]})});async function Ve(){try{const t=document.querySelector(".quantum-status");t&&(t.textContent="Initializing Internet Computer connection..."),console.log("Initializing Internet Computer connection..."),await E(()=>Promise.resolve().then(()=>ye),void 0),console.log("IC initialization complete");const e=document.getElementById("root");if(!e)throw new Error("Root element not found");G.createRoot(e).render(a.jsx(Y.StrictMode,{children:a.jsx(H,{FallbackComponent:He,children:a.jsx(o.Suspense,{fallback:a.jsx(V,{}),children:a.jsx(Ge,{})})})}))}catch(t){console.error("Failed to initialize app:",t);const e=document.querySelector(".quantum-status");e&&(e.textContent=`Initialization failed: ${t.message}`)}}Ve();export{Fe as a,je as b,$e as c,qe as u};
//# sourceMappingURL=main-CPzMFC0N.js.map
