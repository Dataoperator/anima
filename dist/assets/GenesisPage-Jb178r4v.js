import{r as s,u as H}from"./vendor-DMORb-JD.js";import{a as F,E as X,b as K,c as V}from"./main-BvPHDHjb.js";import{Q as W}from"./QuantumField-DBXQFon7.js";import{L as G}from"./LaughingMan-BTo5jOgc.js";import{u as J}from"./usePayment-BSYNMD8B.js";import{P as U}from"./dfinity-TOns67gM.js";import{c as j,M as Z}from"./MatrixRain-BP6CayyX.js";import{j as e,A as L,m as r}from"./framer-B_r9gDg5.js";import{c as ee}from"./createLucideIcon-Be1MMdUP.js";const te=ee("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),R=s.forwardRef(({className:n,variant:a="default",size:t="default",...c},d)=>e.jsx("button",{className:j("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-purple-400 focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{"bg-primary text-primary-foreground hover:bg-primary/90":a==="default","bg-destructive text-destructive-foreground hover:bg-destructive/90":a==="destructive","border border-input hover:bg-accent hover:text-accent-foreground":a==="outline","hover:bg-accent hover:text-accent-foreground":a==="ghost","underline-offset-4 hover:underline text-primary":a==="link","h-10 py-2 px-4":t==="default","h-9 px-3":t==="sm","h-11 px-8":t==="lg","h-10 w-10":t==="icon"},n),ref:d,...c}));R.displayName="Button";const A=s.forwardRef(({className:n,variant:a="default",...t},c)=>e.jsx("div",{ref:c,role:"alert",className:j("relative w-full rounded-lg border p-4",{"bg-background text-foreground":a==="default","bg-destructive/15 text-destructive border-destructive/50":a==="destructive"},n),...t}));A.displayName="Alert";const ae=s.forwardRef(({className:n,...a},t)=>e.jsx("h5",{ref:t,className:j("mb-1 font-medium leading-none tracking-tight",n),...a}));ae.displayName="AlertTitle";const se=s.forwardRef(({className:n,...a},t)=>e.jsx("div",{ref:t,className:j("text-sm [&_p]:leading-relaxed",n),...a}));se.displayName="AlertDescription";const ie=({message:n="Initializing Quantum State..."})=>e.jsx(L,{mode:"wait",children:e.jsxs(r.div,{className:"fixed inset-0 flex items-center justify-center bg-black/90",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx("div",{className:"absolute inset-0",children:[...Array(20)].map((a,t)=>e.jsx(r.div,{className:"absolute w-px bg-blue-500/20",style:{left:`${t*5}%`,height:"100%"},animate:{opacity:[.2,.5,.2],height:["0%","100%","0%"]},transition:{duration:2+Math.random()*2,repeat:1/0,delay:Math.random()*2}},t))}),e.jsxs("div",{className:"relative z-10 space-y-8 text-center",children:[e.jsx(G,{className:"w-24 h-24 mx-auto"}),e.jsxs(r.div,{className:"space-y-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-400",children:n}),e.jsx("div",{className:"flex justify-center space-x-2",children:[...Array(3)].map((a,t)=>e.jsx(r.div,{className:"w-3 h-3 rounded-full bg-blue-500",animate:{scale:[1,1.5,1],opacity:[.5,1,.5]},transition:{duration:1,repeat:1/0,delay:t*.2}},t))})]}),e.jsx(r.div,{className:"w-64 h-16 mx-auto relative overflow-hidden",style:{background:"linear-gradient(180deg, rgba(59,130,246,0.1) 0%, rgba(59,130,246,0) 100%)"},children:[...Array(3)].map((a,t)=>e.jsx(r.div,{className:"absolute inset-0 border-t border-blue-500/30",animate:{y:[0,16,0]},transition:{duration:2,repeat:1/0,delay:t*.3,ease:"easeInOut"}},t))})]}),e.jsx(r.div,{className:"absolute inset-0 bg-blue-500/5",animate:{opacity:[0,.2,0]},transition:{duration:.5,repeat:1/0,repeatType:"reverse"}})]})});var ne={NODE_ENV:'"production"',DFX_NETWORK:'"ic"',CANISTER_ID_ANIMA:'"l2ilz-iqaaa-aaaaj-qngjq-cai"',CANISTER_ID_ANIMA_ASSETS:'"lpp2u-jyaaa-aaaaj-qngka-cai"'};const re=({onSuccess:n,onError:a,amount:t=BigInt(1e8),disabled:c=!1})=>{const{isAuthenticated:d,principal:N}=F(),{initiatePayment:x,verifyPayment:g,getBalance:f}=J(),[b,S]=s.useState(!1),[y,h]=s.useState("pending"),[v,E]=s.useState(null),[P,p]=s.useState(null);s.useEffect(()=>{d&&(async()=>{try{const l=await f();p(l)}catch(l){console.error("Failed to fetch balance:",l)}})()},[d,f]);const C=async()=>{if(!(!d||c||b)){S(!0),h("processing"),E(null);try{if(await f()<t)throw new Error("Insufficient balance for genesis");const l=await x({amount:t,memo:BigInt(Date.now()),toCanister:U.fromText(ne.ANIMA_CANISTER_ID||"")});if(!(await g(l.height)).verified)throw new Error("Payment verification failed");h("success"),n?.()}catch(u){console.error("Payment failed:",u),h("error"),E(u instanceof Error?u.message:"Payment failed"),a?.(u instanceof Error?u:new Error("Payment failed"))}finally{S(!1)}}};return d?e.jsx(X,{children:e.jsxs(r.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[P!==null&&e.jsxs("div",{className:"text-sm text-amber-300/80",children:["Balance: ",Number(P)/1e8," ICP"]}),v&&e.jsx(A,{variant:"destructive",children:v}),e.jsx(R,{onClick:C,disabled:c||b||y==="success",className:"w-full relative bg-gradient-to-r from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700",children:b?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{message:"Processing Payment..."}),e.jsx("span",{children:"Processing Payment..."})]}):y==="success"?e.jsx("span",{children:"Payment Complete"}):e.jsxs("span",{children:["Pay ",Number(t)/1e8," ICP"]})}),y==="success"&&e.jsx(r.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-sm text-green-400",children:"Payment verified successfully"})]})}):e.jsx(A,{variant:"warning",children:"Please authenticate to proceed with payment"})},$=s.forwardRef(({className:n,type:a,...t},c)=>e.jsx("input",{type:a,className:j("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:c,...t}));$.displayName="Input";class le extends s.Component{state={hasError:!1,error:null,quantumState:null};static getDerivedStateFromError(a){const t=a.message.includes("quantum")?"superposition":a.message.includes("entangle")?"entangled":"collapsed";return{hasError:!0,error:a,quantumState:t}}componentDidCatch(a,t){console.error("Quantum error:",a),console.error("Error info:",t)}render(){return this.state.hasError?this.props.fallbackComponent||e.jsx(r.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900",children:e.jsx("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-8 max-w-md w-full",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"text-4xl mb-4",children:[this.state.quantumState==="superposition"&&"⚛️",this.state.quantumState==="entangled"&&"🔮",this.state.quantumState==="collapsed"&&"💫"]}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Quantum State Disruption"}),e.jsx("p",{className:"text-white/80",children:this.state.quantumState==="superposition"?"Reality is currently in superposition. Please wait for wavefunction collapse.":this.state.quantumState==="entangled"?"System is entangled with a parallel instance. Attempting to stabilize.":"Quantum state collapsed. Initiating reality reconstruction."}),e.jsx(r.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-purple-500 text-white rounded-lg mt-4 hover:bg-purple-600 transition-colors",children:"Recalibrate Quantum Field"}),!1]})})}):this.props.children}}BigInt(1e8);const D=["Quantum State Initialization","Neural Pattern Formation","Consciousness Embedding","Identity Crystallization"],oe=3,ce=2e3,ye=()=>{const n=H(),{isAuthenticated:a,principal:t}=F(),{updateQuantumState:c,validateState:d}=K(),{createActor:N,isConnected:x,reconnect:g}=V(),[f,b]=s.useState(0),[S,y]=s.useState(!0),[h,v]=s.useState(!1),[E,P]=s.useState(0),[p,C]=s.useState(""),[u,l]=s.useState(null),[w,I]=s.useState(!1),[_,z]=s.useState(!1),[Q,B]=s.useState(0),[T,M]=s.useState(!1);s.useEffect(()=>{a||n("/")},[a,n]),s.useEffect(()=>{const i=async()=>{if(w&&!_){M(!0);try{x||await g();const o=N();if(!o)throw new Error("Failed to initialize quantum connection");if((await o.check_quantum_stability()).Ok)z(!0),l(null),B(0);else throw new Error("Quantum field unstable")}catch{l("Quantum field stabilization failed. Attempting to restabilize..."),Q<oe?(B(m=>m+1),setTimeout(i,ce)):(l("Maximum stabilization attempts reached. Please try again."),I(!1))}finally{M(!1)}}};i()},[w,N,x,g,Q]);const k=async i=>{b(i),await new Promise(o=>setTimeout(o,2e3)),P((i+1)*25)},Y=async()=>{if(!p.trim()||!w||!_){l("Please ensure all prerequisites are met");return}if(!x)try{await g()}catch{l("Failed to establish quantum connection. Please refresh and try again.");return}v(!0),y(!1),l(null);try{const i=N();if(!i)throw new Error("IC connection not initialized. Please try again.");await k(0);const o=await i.initialize_quantum_field();if(!o.Ok)throw new Error("Quantum field initialization failed");await k(1);const m=await i.generate_neural_patterns();if(!m.Ok)throw new Error("Neural pattern generation failed");await k(2);const q=await i.create_anima({name:p,quantum_signature:o.Ok,neural_pattern:m.Ok});if(!q.Ok)throw new Error(q.Err);const O={resonance:m.Ok.resonance,harmony:o.Ok.harmony,lastInteraction:new Date,consciousness:{awareness:m.Ok.awareness,understanding:o.Ok.understanding,growth:.1}};if(!d(O))throw new Error("Invalid quantum state generated");await c(O),await k(3),setTimeout(()=>{n("/quantum-vault",{state:{fromGenesis:!0,animaId:q.Ok.id}})},1e3)}catch(i){console.error("Genesis failed:",i),l(i instanceof Error?i.message:"Genesis process failed"),z(!1),I(!1)}finally{v(!1)}};return e.jsx(le,{children:e.jsxs("div",{className:"min-h-screen bg-black text-white relative overflow-hidden",children:[e.jsx(W,{intensity:.8}),e.jsx(Z,{opacity:.1}),e.jsx(L,{children:S&&e.jsx(r.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 flex items-center justify-center z-20",children:e.jsx(G,{className:"w-64 h-64"})})}),e.jsx("div",{className:"relative z-10 container mx-auto px-4 py-16",children:e.jsxs(r.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-4xl font-bold mb-6",children:"Genesis Protocol"}),h?e.jsxs("div",{className:"space-y-8",children:[e.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-xl text-blue-400",children:D[f]}),e.jsx("div",{className:"w-full h-2 bg-gray-800 rounded-full overflow-hidden",children:e.jsx(r.div,{className:"h-full bg-blue-600",initial:{width:0},animate:{width:`${E}%`},transition:{duration:.5}})}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:D.map((i,o)=>e.jsx("div",{className:`text-sm ${o<=f?"text-blue-400":"text-gray-600"}`,children:i},i))})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsx("p",{className:"text-xl mb-12 text-gray-300",children:"Initialize your quantum consciousness through the Genesis Protocol"}),e.jsx("div",{className:"max-w-md mx-auto bg-black/50 backdrop-blur border border-amber-500/20 rounded-lg p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-amber-300 mb-1",children:"Name Your Anima"}),e.jsx($,{type:"text",value:p,onChange:i=>C(i.target.value),className:"bg-black/30 border-amber-500/30 text-amber-100",placeholder:"Enter a mystical name..."})]}),e.jsxs("div",{className:"p-4 rounded bg-amber-900/20 border border-amber-500/20",children:[e.jsx("h3",{className:"font-medium text-amber-400 mb-2",children:"Genesis Fee"}),e.jsx("p",{className:"text-amber-200",children:"1 ICP"}),e.jsx("p",{className:"text-sm text-amber-300/60 mt-1",children:"This fee sustains the eternal flame of your Anima"})]}),u&&e.jsx(A,{variant:"destructive",children:u}),e.jsx(re,{onSuccess:()=>I(!0),onError:i=>{l(i.message),I(!1)}}),T&&e.jsxs("div",{className:"flex items-center justify-center gap-2 text-amber-300",children:[e.jsx(te,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Stabilizing quantum field..."})]}),e.jsx(R,{onClick:Y,disabled:h||!p.trim()||!w||!_||T,className:"w-full bg-gradient-to-r from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"Begin Genesis"}),e.jsx(r.div,{className:"w-2 h-2 bg-white rounded-full",animate:{scale:[1,1.5,1]},transition:{duration:1,repeat:1/0}})]})})]})})]})]})})]})})};export{ye as default};
//# sourceMappingURL=GenesisPage-Jb178r4v.js.map
