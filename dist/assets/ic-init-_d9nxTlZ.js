import{t as V,C as jt,l as v,R as N,P as h,I as kt,A as S,e as U,a as Ft,d as xt,b as At,H as W,c as K}from"./main-D5zhtvQC.js";import"./vendor-B3N3Dm4y.js";import"./framer-BAQLW2sr.js";function M(){const t=typeof window>"u"?typeof global>"u"?typeof self>"u"?void 0:self.ic.agent:global.ic.agent:window.ic.agent;if(!t)throw new Error("No Agent could be found.");return t}const Et=5*60*1e3;function St(){return Ht(Pt(qt(),1e3),$t(1e3,1.2),zt(Et))}function qt(){let t=!0;return async()=>t?(t=!1,!0):!1}function Pt(t,e){return async(n,s,a)=>{if(await t(n,s,a))return new Promise(i=>setTimeout(i,e))}}function zt(t){const e=Date.now()+t;return async(n,s,a)=>{if(Date.now()>e)throw new Error(`Request timed out after ${t} msec:
  Request ID: ${V(s)}
  Request status: ${a}
`)}}function $t(t,e){let n=t;return()=>new Promise(s=>setTimeout(()=>{n*=e,s()},n))}function Ht(...t){return async(e,n,s)=>{for(const a of t)await a(e,n,s)}}async function X(t,e,n,s,a,i){var r;const o=[new TextEncoder().encode("request_status"),n],d=a??await((r=t.createReadStateRequest)===null||r===void 0?void 0:r.call(t,{paths:[o]})),l=await t.readState(e,{paths:[o]},void 0,d);if(t.rootKey==null)throw new Error("Agent root key not initialized before polling");const u=await jt.create({certificate:l.certificate,rootKey:t.rootKey,canisterId:e,blsVerify:i}),y=v(u.lookup([...o,new TextEncoder().encode("status")]));let p;switch(typeof y>"u"?p=N.Unknown:p=new TextDecoder().decode(y),p){case N.Replied:return v(u.lookup([...o,"reply"]));case N.Received:case N.Unknown:case N.Processing:return await s(e,n,p),X(t,e,n,s,d);case N.Rejected:{const g=new Uint8Array(v(u.lookup([...o,"reject_code"])))[0],m=new TextDecoder().decode(v(u.lookup([...o,"reject_message"])));throw new Error(`Call was rejected:
  Request ID: ${V(n)}
  Reject code: ${g}
  Reject text: ${m}
`)}case N.Done:throw new Error(`Call was marked as done but we never saw the reply:
  Request ID: ${V(n)}
`)}throw new Error("unreachable")}const Ut=({IDL:t})=>{const e=t.Variant({mainnet:t.Null,testnet:t.Null}),n=t.Text,s=t.Record({network:e,address:n,min_confirmations:t.Opt(t.Nat32)}),a=t.Nat64,i=a,r=t.Record({network:e}),o=t.Nat64,d=t.Vec(o),l=t.Record({network:e,filter:t.Opt(t.Variant({page:t.Vec(t.Nat8),min_confirmations:t.Nat32})),address:n}),u=t.Vec(t.Nat8),y=t.Record({txid:t.Vec(t.Nat8),vout:t.Nat32}),p=t.Record({height:t.Nat32,value:a,outpoint:y}),g=t.Record({next_page:t.Opt(t.Vec(t.Nat8)),tip_height:t.Nat32,tip_block_hash:u,utxos:t.Vec(p)}),m=t.Record({transaction:t.Vec(t.Nat8),network:e}),c=t.Principal,k=t.Record({canister_id:c,num_requested_changes:t.Opt(t.Nat64)}),b=t.Variant({from_user:t.Record({user_id:t.Principal}),from_canister:t.Record({canister_version:t.Opt(t.Nat64),canister_id:t.Principal})}),f=t.Variant({creation:t.Record({controllers:t.Vec(t.Principal)}),code_deployment:t.Record({mode:t.Variant({reinstall:t.Null,upgrade:t.Null,install:t.Null}),module_hash:t.Vec(t.Nat8)}),controllers_change:t.Record({controllers:t.Vec(t.Principal)}),code_uninstall:t.Null}),F=t.Record({timestamp_nanos:t.Nat64,canister_version:t.Nat64,origin:b,details:f}),R=t.Record({controllers:t.Vec(t.Principal),module_hash:t.Opt(t.Vec(t.Nat8)),recent_changes:t.Vec(F),total_num_changes:t.Nat64}),O=t.Record({canister_id:c}),P=t.Variant({controllers:t.Null,public:t.Null}),Y=t.Record({freezing_threshold:t.Nat,controllers:t.Vec(t.Principal),reserved_cycles_limit:t.Nat,log_visibility:P,wasm_memory_limit:t.Nat,memory_allocation:t.Nat,compute_allocation:t.Nat}),Z=t.Record({status:t.Variant({stopped:t.Null,stopping:t.Null,running:t.Null}),memory_size:t.Nat,cycles:t.Nat,settings:Y,query_stats:t.Record({response_payload_bytes_total:t.Nat,num_instructions_total:t.Nat,num_calls_total:t.Nat,request_payload_bytes_total:t.Nat}),idle_cycles_burned_per_day:t.Nat,module_hash:t.Opt(t.Vec(t.Nat8)),reserved_cycles:t.Nat}),I=t.Record({canister_id:c}),x=t.Record({freezing_threshold:t.Opt(t.Nat),controllers:t.Opt(t.Vec(t.Principal)),reserved_cycles_limit:t.Opt(t.Nat),log_visibility:t.Opt(P),wasm_memory_limit:t.Opt(t.Nat),memory_allocation:t.Opt(t.Nat),compute_allocation:t.Opt(t.Nat)}),D=t.Record({settings:t.Opt(x),sender_canister_version:t.Opt(t.Nat64)}),L=t.Record({canister_id:c}),tt=t.Record({canister_id:c}),et=t.Record({canister_id:c}),z=t.Variant({secp256k1:t.Null}),nt=t.Record({key_id:t.Record({name:t.Text,curve:z}),canister_id:t.Opt(c),derivation_path:t.Vec(t.Vec(t.Nat8))}),at=t.Record({public_key:t.Vec(t.Nat8),chain_code:t.Vec(t.Nat8)}),st=t.Record({canister_id:c}),rt=t.Record({idx:t.Nat64,timestamp_nanos:t.Nat64,content:t.Vec(t.Nat8)}),it=t.Record({canister_log_records:t.Vec(rt)}),$=t.Record({value:t.Text,name:t.Text}),A=t.Record({status:t.Nat,body:t.Vec(t.Nat8),headers:t.Vec($)}),ct=t.Record({url:t.Text,method:t.Variant({get:t.Null,head:t.Null,post:t.Null}),max_response_bytes:t.Opt(t.Nat64),body:t.Opt(t.Vec(t.Nat8)),transform:t.Opt(t.Record({function:t.Func([t.Record({context:t.Vec(t.Nat8),response:A})],[A],["query"]),context:t.Vec(t.Nat8)})),headers:t.Vec($)}),H=t.Variant({reinstall:t.Null,upgrade:t.Opt(t.Record({wasm_memory_persistence:t.Opt(t.Variant({keep:t.Null,replace:t.Null})),skip_pre_upgrade:t.Opt(t.Bool)})),install:t.Null}),E=t.Record({hash:t.Vec(t.Nat8)}),ot=t.Record({arg:t.Vec(t.Nat8),wasm_module_hash:t.Vec(t.Nat8),mode:H,chunk_hashes_list:t.Vec(E),target_canister:c,store_canister:t.Opt(c),sender_canister_version:t.Opt(t.Nat64)}),lt=t.Vec(t.Nat8),dt=t.Record({arg:t.Vec(t.Nat8),wasm_module:lt,mode:H,canister_id:c,sender_canister_version:t.Opt(t.Nat64)}),_t=t.Record({start_at_timestamp_nanos:t.Nat64,subnet_id:t.Principal}),ut=t.Record({num_block_failures_total:t.Nat64,node_id:t.Principal,num_blocks_proposed_total:t.Nat64}),pt=t.Vec(t.Record({timestamp_nanos:t.Nat64,node_metrics:t.Vec(ut)})),gt=t.Record({settings:t.Opt(x),specified_id:t.Opt(c),amount:t.Opt(t.Nat),sender_canister_version:t.Opt(t.Nat64)}),ht=t.Record({canister_id:c}),yt=t.Record({canister_id:c,amount:t.Nat}),mt=t.Vec(t.Nat8),ft=t.Record({key_id:t.Record({name:t.Text,curve:z}),derivation_path:t.Vec(t.Vec(t.Nat8)),message_hash:t.Vec(t.Nat8)}),Nt=t.Record({signature:t.Vec(t.Nat8)}),wt=t.Record({canister_id:c}),Rt=t.Record({canister_id:c}),bt=t.Record({canister_id:c}),Ot=t.Vec(E),vt=t.Record({canister_id:c,sender_canister_version:t.Opt(t.Nat64)}),Tt=t.Record({canister_id:t.Principal,settings:x,sender_canister_version:t.Opt(t.Nat64)}),Vt=t.Record({chunk:t.Vec(t.Nat8),canister_id:t.Principal}),Ct=E;return t.Service({bitcoin_get_balance:t.Func([s],[i],[]),bitcoin_get_current_fee_percentiles:t.Func([r],[d],[]),bitcoin_get_utxos:t.Func([l],[g],[]),bitcoin_send_transaction:t.Func([m],[],[]),canister_info:t.Func([k],[R],[]),canister_status:t.Func([O],[Z],[]),clear_chunk_store:t.Func([I],[],[]),create_canister:t.Func([D],[L],[]),delete_canister:t.Func([tt],[],[]),deposit_cycles:t.Func([et],[],[]),ecdsa_public_key:t.Func([nt],[at],[]),fetch_canister_logs:t.Func([st],[it],["query"]),http_request:t.Func([ct],[A],[]),install_chunked_code:t.Func([ot],[],[]),install_code:t.Func([dt],[],[]),node_metrics_history:t.Func([_t],[pt],[]),provisional_create_canister_with_cycles:t.Func([gt],[ht],[]),provisional_top_up_canister:t.Func([yt],[],[]),raw_rand:t.Func([],[mt],[]),sign_with_ecdsa:t.Func([ft],[Nt],[]),start_canister:t.Func([wt],[],[]),stop_canister:t.Func([Rt],[],[]),stored_chunks:t.Func([bt],[Ot],[]),uninstall_code:t.Func([vt],[],[]),update_settings:t.Func([Tt],[],[]),upload_chunk:t.Func([Vt],[Ct],[])})};class G extends S{constructor(e,n,s,a){super(["Call failed:",`  Canister: ${e.toText()}`,`  Method: ${n} (${s})`,...Object.getOwnPropertyNames(a).map(i=>`  "${i}": ${JSON.stringify(a[i])}`)].join(`
`)),this.canisterId=e,this.methodName=n,this.type=s,this.props=a}}class Kt extends G{constructor(e,n,s){var a;super(e,n,"query",{Status:s.status,Code:(a=Ft[s.reject_code])!==null&&a!==void 0?a:`Unknown Code "${s.reject_code}"`,Message:s.reject_message}),this.result=s}}class Mt extends G{constructor(e,n,s,a){super(e,n,"update",Object.assign({"Request ID":V(s)},a.body?Object.assign(Object.assign({},a.body.error_code?{"Error code":a.body.error_code}:{}),{"Reject code":String(a.body.reject_code),"Reject message":a.body.reject_message}):{"HTTP status code":a.status.toString(),"HTTP status text":a.statusText})),this.requestId=s,this.response=a}}const _=Symbol.for("ic-agent-metadata");class j{constructor(e){this[_]=Object.freeze(e)}static agentOf(e){return e[_].config.agent}static interfaceOf(e){return e[_].service}static canisterIdOf(e){return h.from(e[_].config.canisterId)}static async install(e,n){const s=e.mode===void 0?{install:null}:e.mode,a=e.arg?[...new Uint8Array(e.arg)]:[],i=[...new Uint8Array(e.module)],r=typeof n.canisterId=="string"?h.fromText(n.canisterId):n.canisterId;await B(n).install_code({mode:s,arg:a,wasm_module:i,canister_id:r,sender_canister_version:[]})}static async createCanister(e,n){function s(i){return[{controllers:i.controllers?[i.controllers]:[],compute_allocation:i.compute_allocation?[i.compute_allocation]:[],freezing_threshold:i.freezing_threshold?[i.freezing_threshold]:[],memory_allocation:i.memory_allocation?[i.memory_allocation]:[],reserved_cycles_limit:[],log_visibility:[],wasm_memory_limit:[]}]}const{canister_id:a}=await B(e||{}).provisional_create_canister_with_cycles({amount:[],settings:s(n||{}),specified_id:[],sender_canister_version:[]});return a}static async createAndInstallCanister(e,n,s){const a=await this.createCanister(s);return await this.install(Object.assign({},n),Object.assign(Object.assign({},s),{canisterId:a})),this.createActor(e,Object.assign(Object.assign({},s),{canisterId:a}))}static createActorClass(e,n){const s=e({IDL:kt});class a extends j{constructor(r){if(!r.canisterId)throw new S(`Canister ID is required, but received ${typeof r.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);const o=typeof r.canisterId=="string"?h.fromText(r.canisterId):r.canisterId;super({config:Object.assign(Object.assign(Object.assign({},J),r),{canisterId:o}),service:s});for(const[d,l]of s._fields)n?.httpDetails&&l.annotations.push(q),this[d]=Bt(this,d,l,r.blsVerify)}}return a}static createActor(e,n){if(!n.canisterId)throw new S(`Canister ID is required, but received ${typeof n.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);return new(this.createActorClass(e))(n)}static createActorWithHttpDetails(e,n){return new(this.createActorClass(e,{httpDetails:!0}))(n)}}function T(t,e){const n=xt(t,At.Buffer.from(e));switch(n.length){case 0:return;case 1:return n[0];default:return n}}const J={pollingStrategyFactory:St},q="http-details";function Bt(t,e,n,s){let a;n.annotations.includes("query")||n.annotations.includes("composite_query")?a=async(r,...o)=>{var d,l;r=Object.assign(Object.assign({},r),(l=(d=t[_].config).queryTransform)===null||l===void 0?void 0:l.call(d,e,o,Object.assign(Object.assign({},t[_].config),r)));const u=r.agent||t[_].config.agent||M(),y=h.from(r.canisterId||t[_].config.canisterId),p=U(n.argTypes,o),g=await u.query(y,{methodName:e,arg:p,effectiveCanisterId:r.effectiveCanisterId});switch(g.status){case"rejected":throw new Kt(y,e,g);case"replied":return n.annotations.includes(q)?{httpDetails:g.httpDetails,result:T(n.retTypes,g.reply.arg)}:T(n.retTypes,g.reply.arg)}}:a=async(r,...o)=>{var d,l;r=Object.assign(Object.assign({},r),(l=(d=t[_].config).callTransform)===null||l===void 0?void 0:l.call(d,e,o,Object.assign(Object.assign({},t[_].config),r)));const u=r.agent||t[_].config.agent||M(),{canisterId:y,effectiveCanisterId:p,pollingStrategyFactory:g}=Object.assign(Object.assign(Object.assign({},J),t[_].config),r),m=h.from(y),c=p!==void 0?h.from(p):m,k=U(n.argTypes,o),{requestId:b,response:f}=await u.call(m,{methodName:e,arg:k,effectiveCanisterId:c});if(!f.ok||f.body)throw new Mt(m,e,b,f);const F=g(),R=await X(u,c,b,F,s),O=n.annotations.includes(q);if(R!==void 0)return O?{httpDetails:f,result:T(n.retTypes,R)}:T(n.retTypes,R);if(n.retTypes.length===0)return O?{httpDetails:f,result:void 0}:void 0;throw new Error(`Call was returned undefined, but type [${n.retTypes.join(",")}].`)};const i=(...r)=>a({},...r);return i.withOptions=r=>(...o)=>a(r,...o),i}function B(t){function e(n,s){if(t.effectiveCanisterId)return{effectiveCanisterId:h.from(t.effectiveCanisterId)};const a=s[0];let i=h.fromHex("");return a&&typeof a=="object"&&a.canister_id&&(i=h.from(a.canister_id)),{effectiveCanisterId:i}}return j.createActor(Ut,Object.assign(Object.assign(Object.assign({},t),{canisterId:h.fromHex("")}),{callTransform:e,queryTransform:e}))}const Wt=({IDL:t})=>{const e=t.Text,n=t.Nat64,s=t.Record({traits:t.Vec(t.Tuple(t.Text,t.Float64)),emotional_state:t.Record({duration:t.Nat64,current_emotion:t.Text,intensity:t.Float64}),memories:t.Vec(t.Record({emotional_impact:t.Float64,content:t.Text,timestamp:t.Nat64})),developmental_stage:t.Variant({SelfAware:t.Null,Awakening:t.Null,Conscious:t.Null,Transcendent:t.Null,Nascent:t.Null})}),a=t.Record({id:n,creation_time:t.Nat64,personality:s,owner:t.Principal,name:t.Text}),i=t.Variant({SelfAware:t.Null,Awakening:t.Null,Introspective:t.Null,Transcendent:t.Null,Nascent:t.Null}),r=t.Variant({Success:t.Record({personality_updates:t.Vec(t.Tuple(t.Text,t.Float64)),response:t.Text}),Failure:e});return t.Service({create_anima:t.Func([t.Text],[t.Variant({Ok:t.Principal,Err:e})],[]),get_anima:t.Func([n],[t.Opt(a)],["query"]),get_consciousness_level:t.Func([n],[t.Variant({Ok:i,Err:e})],["query"]),get_user_animas:t.Func([t.Principal],[t.Vec(a)],["query"]),process_quantum_interaction:t.Func([n,t.Text,t.Text],[r],[])})};var Xt={};const Gt=(t,e={})=>{const n=e.agent||new W({...e.agentOptions});return e.agent&&e.agentOptions&&console.warn("Detected both agent and agentOptions passed to createActor. Ignoring agentOptions and proceeding with the provided agent."),Xt.DFX_NETWORK!=="ic"&&n.fetchRootKey().catch(s=>{console.warn("Unable to fetch root key. Check to ensure that your local replica is running"),console.error(s)}),j.createActor(Wt,{agent:n,canisterId:t,...e.actorOptions})};var C={};const Jt=C.DFX_NETWORK||"ic",Q=Jt==="local",Qt={anima:C.ANIMA_CANISTER_ID||"l2ilz-iqaaa-aaaaj-qngjq-cai",assets:C.ASSETS_CANISTER_ID||"lpp2u-jyaaa-aaaaj-qngka-cai"},Yt=Q?"http://localhost:4943":"https://icp0.io";class w{static instance;actor=null;agent=null;authClient=null;identity=null;initialized=!1;constructor(){}static getInstance(){return w.instance||(w.instance=new w),w.instance}async initialize(){if(!this.initialized)try{console.log("Initializing Internet Computer connection..."),this.authClient=await K.create(),this.identity=this.authClient.getIdentity(),this.agent=new W({identity:this.identity,host:Yt}),Q&&await this.agent.fetchRootKey(),this.actor=Gt(Qt.anima,{agent:this.agent}),this.initialized=!0,console.log("IC initialization complete")}catch(e){throw console.error("IC initialization failed:",e),e}}getActor(){if(!this.initialized||!this.actor)throw new Error("IC not initialized. Call initialize() first.");return this.actor}getIdentity(){return this.identity}getAgent(){return this.agent}isInitialized(){return this.initialized}async login(){if(!this.authClient)throw new Error("Auth client not initialized");return new Promise(e=>{this.authClient.login({identityProvider:C.II_URL||"https://identity.ic0.app",onSuccess:()=>{this.identity=this.authClient.getIdentity(),this.agent&&this.agent.replaceIdentity(this.identity),e(!0)},onError:()=>e(!1)})})}async logout(){if(!this.authClient)throw new Error("Auth client not initialized");await this.authClient.logout(),this.identity=await K.create().then(e=>e.getIdentity()),this.agent&&this.agent.replaceIdentity(this.identity)}}const Lt=w.getInstance();export{Qt as CANISTER_IDS,Lt as icManager};
//# sourceMappingURL=ic-init-_d9nxTlZ.js.map
