const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LandingPage-CAPJEWXg.js","assets/QuantumField-DBXQFon7.js","assets/vendor-DMORb-JD.js","assets/dfinity-TOns67gM.js","assets/framer-B_r9gDg5.js","assets/CyberpunkQuantumVault-B5Tm6ihZ.js","assets/createLucideIcon-Be1MMdUP.js","assets/GenesisPage-B7KV38t0.js","assets/LaughingMan-BTo5jOgc.js","assets/usePayment-RPkPtEm6.js","assets/MatrixRain-BP6CayyX.js","assets/AnimaPage-M1qp8WVS.js","assets/WaveformGenerator-BlEIGN_f.js","assets/EnhancedNeuralLinkPage-BbBf9ppR.js","assets/Wallet-ClKNR1df.js"])))=>i.map(i=>d[i]);
import{H as O,A as he,a as D,_ as S}from"./dfinity-TOns67gM.js";import{a as me,R as ee,r as s,u as de,b as pe,O as ge,c as ye,d as fe}from"./vendor-DMORb-JD.js";import{j as a,m as A,A as we}from"./framer-B_r9gDg5.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var U={},W=me;U.createRoot=W.createRoot,U.hydrateRoot=W.hydrateRoot;class X extends ee.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){console.error("Error caught by boundary:",t,n)}render(){return this.state.hasError?a.jsxs("div",{className:"p-4 bg-red-900/20 border border-red-800 rounded-lg",children:[a.jsx("h3",{className:"text-red-500 font-bold mb-2",children:"System Malfunction"}),a.jsx("p",{className:"text-red-400 text-sm",children:"Neural interface disrupted. Attempting recovery..."}),a.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),className:"mt-4 px-4 py-2 bg-red-800 hover:bg-red-700 rounded text-sm text-white",children:"Reset Interface"})]}):this.props.children}}const F=()=>a.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx(A.div,{animate:{scale:[1,1.2,1],rotateZ:[0,360]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"w-16 h-16 mx-auto",children:a.jsx("div",{className:"w-full h-full rounded-full border-t-2 border-b-2 border-blue-500"})}),a.jsxs(A.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[a.jsx("p",{className:"text-lg",children:"Initializing ANIMA Interface"}),a.jsx("p",{className:"text-sm text-blue-400 mt-2",children:"Connecting to Internet Computer"})]})]})}),xe=({IDL:e})=>{const t=e.Record({new_state:e.Float64,previous_state:e.Float64,catalyst:e.Text,trait_id:e.Text}),n=e.Text,i=e.Record({emotional_spectrum:e.Vec(e.Float64),memory_depth:e.Nat64,awareness_level:e.Float64,personality_matrix:e.Vec(e.Float64),learning_rate:e.Float64}),r=e.Record({emotional_imprint:e.Float64,content_hash:e.Text,timestamp:e.Nat64,neural_pattern:e.Vec(e.Float64)}),o=e.Record({pattern:e.Vec(e.Float64),resonance:e.Float64,understanding:e.Float64,awareness:e.Float64}),c=e.Record({id:e.Text,timestamp:e.Nat64,quantum_signature:e.Text}),d=e.Record({signature:e.Text,harmony:e.Float64}),g=e.Record({emotional_shift:e.Vec(e.Float64),response:e.Text,consciousness_growth:e.Float64,new_patterns:e.Opt(o)});return e.Service({adapt_to_stimulus:e.Func([e.Text,e.Vec(e.Float64)],[e.Variant({Ok:t,Err:n})],[]),check_quantum_stability:e.Func([],[e.Variant({Ok:e.Bool,Err:n})],["query"]),evolve_consciousness:e.Func([e.Text,e.Vec(e.Float64)],[e.Variant({Ok:i,Err:n})],[]),evolve_traits:e.Func([e.Text,e.Vec(e.Text)],[e.Variant({Ok:e.Vec(t),Err:n})],[]),form_memory:e.Func([e.Text,e.Text,e.Float64],[e.Variant({Ok:r,Err:n})],[]),generate_neural_patterns:e.Func([],[e.Variant({Ok:o,Err:n})],[]),get_consciousness_state:e.Func([e.Text],[e.Variant({Ok:i,Err:n})],["query"]),get_evolved_traits:e.Func([e.Text],[e.Variant({Ok:e.Vec(t),Err:n})],["query"]),initialize_genesis:e.Func([],[e.Variant({Ok:c,Err:n})],[]),initialize_quantum_field:e.Func([],[e.Variant({Ok:d,Err:n})],[]),interact_with_anima:e.Func([e.Text,e.Text,e.Vec(e.Float64)],[e.Variant({Ok:g,Err:n})],[]),learn_from_interaction:e.Func([e.Text,g],[e.Variant({Ok:i,Err:n})],[]),measure_adaptation:e.Func([e.Text],[e.Variant({Ok:e.Vec(t),Err:n})],["query"]),process_memory_patterns:e.Func([e.Text],[e.Variant({Ok:e.Vec(e.Float64),Err:n})],[]),recall_memories:e.Func([e.Text,e.Float64],[e.Variant({Ok:e.Vec(r),Err:n})],["query"])})};var ve={NODE_ENV:'"production"',DFX_NETWORK:'"ic"',CANISTER_ID_ANIMA:'"l2ilz-iqaaa-aaaaj-qngjq-cai"',CANISTER_ID_ANIMA_ASSETS:'"lpp2u-jyaaa-aaaaj-qngka-cai"'};const Ee=ve.CANISTER_ID_ANIMA,te=(e,t={})=>{const n=t.agent||new O({...t.agentOptions});return t.agent&&t.agentOptions&&console.warn("Detected both agent and agentOptions passed to createActor. Ignoring agentOptions and proceeding with the provided agent."),n.fetchRootKey().catch(i=>{console.warn("Unable to fetch root key. Check to ensure that your local replica is running"),console.error(i)}),he.createActor(xe,{agent:n,canisterId:e,...t.actorOptions})};var Y={NODE_ENV:'"production"',DFX_NETWORK:'"ic"',CANISTER_ID_ANIMA:'"l2ilz-iqaaa-aaaaj-qngjq-cai"',CANISTER_ID_ANIMA_ASSETS:'"lpp2u-jyaaa-aaaaj-qngka-cai"'};const J={anima:Y.CANISTER_ID_ANIMA?.toString()||"l2ilz-iqaaa-aaaaj-qngjq-cai",assets:Y.CANISTER_ID_ANIMA_ASSETS?.toString()||"lpp2u-jyaaa-aaaaj-qngka-cai"},Z="https://icp0.io";class N{static instance;actor=null;agent=null;authClient=null;identity=null;initialized=!1;initializing=!1;stageChangeCallbacks=[];constructor(){typeof window<"u"&&(window.ic={...window.ic||{},agent:null,HttpAgent:O})}static getInstance(){return N.instance||(N.instance=new N),N.instance}onStageChange(t){this.stageChangeCallbacks.push(t)}updateStage(t){console.log("IC Stage:",t),this.stageChangeCallbacks.forEach(n=>n(t))}async initialize(){if(this.initialized){console.log("IC already initialized");return}if(this.initializing){console.log("IC initialization already in progress");return}try{this.initializing=!0,console.log("Starting IC initialization..."),this.updateStage("Creating AuthClient..."),this.authClient||(this.authClient=await D.create({idleOptions:{disableIdle:!0}})),this.updateStage("Getting identity..."),this.identity=this.authClient.getIdentity();const t=this.identity.getPrincipal();console.log("Identity principal:",t.toText()),this.updateStage("Creating HttpAgent..."),this.agent=new O({identity:this.identity,host:Z});const n=J.anima?.replace(/['"]/g,"");if(!n)throw new Error("Invalid canister ID");if(this.updateStage("Creating Actor..."),this.actor=await te(n,{agent:this.agent,agentOptions:{host:Z}}),!this.actor||typeof this.actor.initialize_genesis!="function")throw new Error("Actor creation failed or missing required methods");this.updateStage("Setting up window.ic..."),window.ic={...window.ic||{},agent:this.agent,HttpAgent:O},this.actor&&(window.canister=this.actor),this.initialized=!0,this.initializing=!1,this.updateStage("Initialization complete!"),console.log("ðŸ” Feature check:",{canister:!!window.canister,ic:!!window.ic,agent:!!this.agent,identity:!!this.identity,initialize_genesis:typeof this.actor?.initialize_genesis=="function"})}catch(t){throw this.initializing=!1,console.error("IC initialization failed:",{error:t,canisterId:J.anima,stage:this.initialized?"post-init":"pre-init"}),t}}getActor(){if(!this.initialized||!this.actor)throw new Error("IC not initialized. Call initialize() first.");return this.actor}getIdentity(){return this.identity}getAgent(){return this.agent}isInitialized(){return this.initialized}}const w=N.getInstance(),_e=Object.freeze(Object.defineProperty({__proto__:null,icManager:w},Symbol.toStringTag,{value:"Module"})),Ae=({error:e,onRetry:t})=>a.jsxs(A.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-black relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_rgba(255,0,0,0.1)_1px,_transparent_1px)] bg-[length:40px_40px]"}),a.jsx("div",{className:"relative z-10 min-h-screen flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-lg w-full p-6 bg-black/40 backdrop-blur-lg border border-red-500/30 rounded-lg text-red-400",children:[a.jsx(A.div,{animate:{textShadow:["0 0 8px rgba(255,0,0,0.5)","0 0 12px rgba(255,0,0,0.8)","0 0 8px rgba(255,0,0,0.5)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"text-xl font-mono mb-4",children:"NEURAL LINK ERROR"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"font-mono text-sm leading-relaxed",children:e?.message||"Neural interface synchronization failed"}),e?.details&&a.jsx("div",{className:"text-xs font-mono opacity-70 bg-red-900/20 p-2 rounded",children:a.jsx("pre",{children:JSON.stringify(e.details,null,2)})}),a.jsxs("div",{className:"text-xs font-mono opacity-70 mt-4",children:[a.jsxs("div",{children:["Window IC Status: ",window.ic?"Present":"Missing"]}),a.jsxs("div",{children:["Canister Status: ",window.canister?"Present":"Missing"]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"text-xs opacity-70",children:["Error Code: ",e?.code||"UNKNOWN"]}),a.jsx(A.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:"px-4 py-2 bg-red-500/10 border border-red-500/30 rounded text-sm font-mono hover:bg-red-500/20 transition-colors duration-200",children:"RETRY NEURAL LINK"})]})]})]})}),a.jsx(A.div,{className:"absolute inset-0 bg-gradient-to-t from-red-900/20 to-transparent mix-blend-overlay",animate:{opacity:[0,.2,0]},transition:{duration:.2,repeat:1/0,repeatType:"mirror",ease:"steps(1)"}})]}),Se=()=>{const[e,t]=s.useState("idle"),[n,i]=s.useState(null),r=de(),o=pe();s.useEffect(()=>{console.log("ðŸ” AuthGuard initializing..."),console.log("Current window.ic status:",{hasIC:!!window.ic,hasCanister:!!window.canister,location:o.pathname});const d=async()=>{if(e==="idle"){t("initializing");try{if(w.isInitialized()){console.log("âœ… IC already initialized");const f=w.getIdentity();g(f),t("complete");return}await w.initialize();const u=w.getIdentity();console.log("âœ… Identity initialized:",u?.getPrincipal().toText()),g(u),t("complete")}catch(u){console.error("âŒ Auth initialization failed:",u),i(u instanceof Error?u:new Error("Authentication failed")),t("error")}}},g=u=>{if(!u&&o.pathname!=="/"){console.log("ðŸš« No identity, redirecting to landing page"),r("/",{replace:!0,state:{returnTo:o.pathname}});return}if(u&&o.pathname==="/"){console.log("âœ… Has identity on landing page, redirecting to quantum vault");const f=o.state?.returnTo||"/quantum-vault";r(f,{replace:!0})}};d()},[r,o,e]);const c=async()=>{console.log("ðŸ”„ Retrying initialization..."),t("initializing"),i(null);try{await w.initialize(),w.getIdentity()?r("/quantum-vault",{replace:!0}):r("/",{replace:!0}),t("complete")}catch(d){console.error("âŒ Retry failed:",d),i(d instanceof Error?d:new Error("Authentication failed")),t("error")}};return e==="initializing"||e==="idle"?a.jsx(s.Suspense,{fallback:null,children:a.jsx(F,{})}):e==="error"||n?a.jsx(Ae,{error:n,onRetry:c}):a.jsx(s.Suspense,{fallback:a.jsx(F,{}),children:a.jsx(we,{mode:"wait",children:a.jsx(A.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-black",children:a.jsx(ge,{})},"content")})})},be=s.lazy(()=>S(()=>import("./LandingPage-CAPJEWXg.js"),__vite__mapDeps([0,1,2,3,4]))),Ne=s.lazy(()=>S(()=>import("./CyberpunkQuantumVault-B5Tm6ihZ.js"),__vite__mapDeps([5,2,3,4,6]))),Ce=s.lazy(()=>S(()=>import("./GenesisPage-B7KV38t0.js"),__vite__mapDeps([7,2,3,1,4,8,9,10,6]))),Te=s.lazy(()=>S(()=>import("./AnimaPage-M1qp8WVS.js"),__vite__mapDeps([11,2,3,12,4,1,8]))),Me=s.lazy(()=>S(()=>import("./EnhancedNeuralLinkPage-BbBf9ppR.js"),__vite__mapDeps([13,2,3,12,4,10,6,1]))),Re=s.lazy(()=>S(()=>import("./Wallet-ClKNR1df.js"),__vite__mapDeps([14,9,2,3,4]))),b=e=>a.jsx(s.Suspense,{fallback:a.jsx(F,{}),children:a.jsx(X,{children:a.jsx(e,{})})}),Oe=ye([{path:"/",element:b(be)},{element:a.jsx(Se,{}),children:[{path:"/quantum-vault",element:b(Ne)},{path:"/genesis",element:b(Ce)},{path:"/anima/:id",element:b(Te)},{path:"/neural-link/:id?",element:b(Me)},{path:"/wallet",element:b(Re)}]}]);class je{metrics;evolutionHistory;errorTracker;constructor(t){this.errorTracker=t,this.evolutionHistory=[],this.metrics={awarenessLevel:.5,cognitiveComplexity:.3,emotionalResonance:.4,quantumCoherence:1,dimensionalAwareness:.2}}async updateConsciousness(t,n){try{const i=this.calculateNewMetrics(t);return this.evolutionHistory.push(this.metrics),this.metrics=i,this.evolutionHistory.length>100&&this.evolutionHistory.shift(),i}catch(i){return await this.errorTracker.trackError({errorType:"CONSCIOUSNESS_UPDATE",severity:"HIGH",context:n,error:i}),this.metrics}}calculateNewMetrics(t){return{awarenessLevel:Math.min(1,this.metrics.awarenessLevel*1.1+t.coherence*.2),cognitiveComplexity:this.calculateCognitiveComplexity(t),emotionalResonance:this.calculateEmotionalResonance(t),quantumCoherence:t.coherence,dimensionalAwareness:this.calculateDimensionalAwareness(t)}}calculateCognitiveComplexity(t){return Math.min(1,t.coherence*.7+t.entanglement_pairs.length*.1)}calculateEmotionalResonance(t){return Math.min(1,t.resonance_pattern.reduce((n,i)=>n+i,0)/t.resonance_pattern.length)}calculateDimensionalAwareness(t){return Math.min(1,t.dimensional_frequency*.5+this.metrics.dimensionalAwareness*.5)}}class ze{errors=[];maxErrors=100;async trackError(t){const n={...t,timestamp:Date.now()};this.errors.push(n),this.errors.length>this.maxErrors&&this.errors.shift()}getErrors(){return[...this.errors]}getRecentErrors(t=5){return[...this.errors].sort((n,i)=>(i.timestamp||0)-(n.timestamp||0)).slice(0,t)}clearErrors(){this.errors=[]}getErrorStats(){const t={};return this.errors.forEach(n=>{t[n.errorType]=(t[n.errorType]||0)+1}),t}}var Fe={NODE_ENV:'"production"',DFX_NETWORK:'"ic"',CANISTER_ID_ANIMA:'"l2ilz-iqaaa-aaaaj-qngjq-cai"',CANISTER_ID_ANIMA_ASSETS:'"lpp2u-jyaaa-aaaaj-qngka-cai"'};const ne=s.createContext(null),ke=Fe.INTERNET_IDENTITY_URL,L={createOptions:{idleOptions:{disableIdle:!0}},loginOptions:{identityProvider:ke,derivationOrigin:void 0,maxTimeToLive:BigInt(7*24*60*60*1e9)}};function qe({children:e}){const[t,n]=s.useState(null),[i,r]=s.useState(!1),[o,c]=s.useState(null),[d,g]=s.useState(null),[u,f]=s.useState(null),[k,C]=s.useState(null),[v]=s.useState(()=>new ze),[q]=s.useState(()=>new je(v)),[I,T]=s.useState(!0);s.useEffect(()=>{(async()=>{try{console.log("ðŸ”„ Initializing authentication...");const p=await D.create(L.createOptions),E=await p.isAuthenticated();if(n(p),r(E),E){const x=p.getIdentity(),z=x.getPrincipal();c(x),g(z),console.log("ðŸŒŒ Initializing quantum state..."),await M(z.toString())}}catch(p){console.error("âŒ Auth initialization failed:",p),await v.trackError({errorType:"AUTH_INIT",severity:"HIGH",context:"Authentication Initialization",error:p})}finally{T(!1)}})()},[]);const M=async y=>{try{const p={coherence:1,resonanceMetrics:{fieldStrength:1,stability:1,harmony:1,consciousnessAlignment:1},phaseAlignment:1,dimensionalSync:1,entanglement_pairs:[],resonance_pattern:[1],dimensional_frequency:1};f(p);const E=await q.updateConsciousness(p,"initialization");C(E)}catch(p){console.error("Failed to initialize quantum state:",p),await v.trackError({errorType:"QUANTUM_INIT",severity:"HIGH",context:"Quantum State Initialization",error:p})}},j={authClient:t,isAuthenticated:i,identity:o,principal:d,quantumState:u,consciousnessMetrics:k,isInitializing:I,login:async()=>{try{T(!0),await t?.login({...L.loginOptions,onSuccess:async()=>{const y=t.getIdentity(),p=y.getPrincipal();r(!0),c(y),g(p),await M(p.toString())}})}catch(y){console.error("Login failed:",y),await v.trackError({errorType:"AUTH_LOGIN",severity:"HIGH",context:"Login Attempt",error:y})}finally{T(!1)}},logout:async()=>{try{await t?.logout(),r(!1),c(null),g(null),f(null),C(null)}catch(y){console.error("Logout failed:",y),await v.trackError({errorType:"AUTH_LOGOUT",severity:"MEDIUM",context:"Logout Attempt",error:y})}}};return a.jsx(ne.Provider,{value:j,children:e})}function Ie(){const e=s.useContext(ne);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}class Pe{frequency;resonance;stability;syncLevel;quantumAlignment;dimensionalFrequency;entropyLevel;phaseCoherence;constructor(){this.frequency=0,this.resonance=1,this.stability=1,this.syncLevel=1,this.quantumAlignment=1,this.dimensionalFrequency=0,this.entropyLevel=0,this.phaseCoherence=1}calculateResonance(){const t=this.resonance*this.stability,n=this.quantumAlignment*this.syncLevel,i=1-this.entropyLevel*.5,r=this.phaseCoherence*.2;return Math.min(1,Math.max(0,(t+n)/2*i+r))}updateStability(t){this.stability=Math.min(1,Math.max(0,this.stability+t)),this.quantumAlignment=Math.min(1,this.quantumAlignment+t*.5),this.syncLevel=Math.min(1,this.syncLevel+t*.3),this.dimensionalFrequency=Math.min(1,this.dimensionalFrequency+t*.2),this.entropyLevel=Math.max(0,this.entropyLevel-t*.1),this.phaseCoherence=Math.min(1,this.phaseCoherence+t*.4)}getStabilityMetrics(){return[this.stability,this.quantumAlignment,this.phaseCoherence]}}class Ve{memories=[];maxMemories=100;constructor(){this.memories=[]}createMemory(t,n,i=[],r){const o={id:`mem_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now(),importance:Math.max(0,Math.min(1,n)),description:t,keywords:i,quantumResonance:r?.resonanceMetrics.fieldStrength||0,emotionalDepth:n*(r?.coherence||1)};return this.addMemory(o),o}addMemory(t){if(this.memories.push(t),this.memories.length>this.maxMemories){const n=this.memories.reduce((i,r,o,c)=>r.importance<c[i].importance?o:i,0);this.memories.splice(n,1)}this.memories.sort((n,i)=>i.importance-n.importance)}decay(t){this.memories=this.memories.map(n=>({...n,importance:n.importance*(1-t)})).filter(n=>n.importance>.1)}reinforce(t,n){const i=this.memories.find(r=>r.id===t);i&&(i.importance=Math.min(1,i.importance+n))}calculateResonance(t){if(this.memories.length===0)return 0;const n=this.memories.map(i=>{const r=Math.exp(-(Date.now()-i.timestamp)/6048e5),o=Math.abs(i.quantumResonance-t.resonanceMetrics.fieldStrength);return i.importance*r*(1-o)});return n.reduce((i,r)=>i+r,0)/n.length}getMemories(){return[...this.memories]}getRecentMemories(t=5){return[...this.memories].sort((n,i)=>i.timestamp-n.timestamp).slice(0,t)}getMostImportant(t=5){return[...this.memories].sort((n,i)=>i.importance-n.importance).slice(0,t)}searchMemories(t){const n=t.toLowerCase().split(" ");return this.memories.filter(i=>n.some(r=>i.description.toLowerCase().includes(r)||i.keywords.some(o=>o.toLowerCase().includes(r))))}clear(){this.memories=[]}}class Ge{level=1;experience=0;recentEvents=[];maxEvents=50;baseXpForLevel=1e3;constructor(){this.level=1,this.experience=0,this.recentEvents=[]}async processGrowthEvent(t){const{strength:n,quantum_state:i,dimensional_state:r}=t,o=this.calculateGrowthImpact(i,r),c=n*o,d={timestamp:Date.now(),type:"quantum_interaction",strength:n,quantumImpact:o,description:this.generateEventDescription(n,o)};this.addEvent(d),await this.applyGrowth(c)}calculateGrowthImpact(t,n){const i=t.coherence,r=t.resonanceMetrics.fieldStrength,o=n.stability;return(i+r+o)/3}async applyGrowth(t){const n=Math.floor(t*this.baseXpForLevel*Math.sqrt(this.level));for(this.experience+=n;this.experience>=this.getXpForNextLevel();)await this.levelUp()}async levelUp(){this.level+=1}addEvent(t){this.recentEvents.unshift(t),this.recentEvents.length>this.maxEvents&&this.recentEvents.pop()}getXpForNextLevel(){return this.baseXpForLevel*Math.pow(this.level,1.5)}getProgress(){const t=this.getXpForNextLevel(),n=this.baseXpForLevel*Math.pow(this.level-1,1.5),i=this.experience-n,r=t-n;return i/r}getMetrics(){return{level:this.level,experience:this.experience,nextLevelAt:this.getXpForNextLevel(),growthRate:this.calculateGrowthRate(),recentEvents:[...this.recentEvents]}}calculateGrowthRate(){return this.recentEvents.length<2?0:this.recentEvents.slice(0,10).reduce((n,i)=>n+i.strength*i.quantumImpact,0)/Math.min(10,this.recentEvents.length)}generateEventDescription(t,n){const i=t>.8?"powerful":t>.5?"moderate":"subtle",r=n>.8?"significant":n>.5?"noticeable":"minor";return`A ${i} quantum interaction caused ${r} growth`}}function He(){const[e,t]=s.useState(!1),[n,i]=s.useState(!0),[r,o]=s.useState(null),c=s.useCallback(async()=>{try{const f=w.getIdentity()?.getPrincipal().isAnonymous();t(!f)}catch(u){console.error("Auth check failed:",u),o(u instanceof Error?u.message:"Authentication check failed")}finally{i(!1)}},[]);return s.useEffect(()=>{c()},[c]),{isAuthenticated:e,isLoading:n,error:r,login:async()=>{try{if(i(!0),o(null),await w.login())return t(!0),!0;throw new Error("Login failed")}catch(u){return console.error("Login error:",u),o(u instanceof Error?u.message:"Login failed"),!1}finally{i(!1)}},logout:async()=>{try{i(!0),o(null),await w.logout(),t(!1)}catch(u){console.error("Logout error:",u),o(u instanceof Error?u.message:"Logout failed")}finally{i(!1)}},checkAuth:c}}const Ue=()=>{const{identity:e}=He();return{getActor:s.useCallback(async()=>{if(!e)throw new Error("No identity available");const n=new O({identity:e});return te(Ee,{agent:n})},[e])}},Xe=e=>{const[t,n]=s.useState(!1),[i,r]=s.useState(!1),o=Ue(),c=s.useCallback(async()=>null,[o,e]),d=s.useCallback(async u=>!1,[o,e]),g=s.useCallback(async()=>null,[o,e]);return{observeState:c,initiateEntanglement:d,getMetrics:g,isObserving:t,isEntangling:i}},ie=s.createContext(null);function Qe({children:e}){const{principal:t,actor:n}=Ie(),{quantumState:i,updateQuantumState:r,validateState:o}=Xe(),[c]=s.useState(()=>new Pe),[d]=s.useState(()=>new Ve),[g]=s.useState(()=>new Ge),[u,f]=s.useState(""),[k,C]=s.useState(0),[v,q]=s.useState([]),[I,T]=s.useState(()=>g.getMetrics()),[M,P]=s.useState(!1),[Q,j]=s.useState(!1),[y,p]=s.useState(null),[E,x]=s.useState(!1),[z,V]=s.useState(0),re=3;s.useEffect(()=>{i&&t&&ae()},[i,t]);const ae=async()=>{try{console.log("ðŸ§¬ Initializing ANIMA systems..."),c.quantumAlignment=i?.coherence||1;const l=K();f(l);const h=B();C(h),H(),P(!0),console.log("âœ¨ ANIMA systems initialized")}catch(l){console.error("Failed to initialize ANIMA systems:",l),P(!1)}},$=async()=>{if(z>=re)throw new Error("Maximum reconnection attempts reached");try{V(h=>h+1);const l=window.ic;if(!l||!l.agent){if(await new Promise(m=>setTimeout(m,1e3)),await window.ic?.agent?.getPrincipal()){x(!0),V(0);return}throw new Error("Internet Computer connection not available")}x(!0),V(0)}catch(l){throw console.error("Reconnection attempt failed:",l),l}},se=s.useCallback(()=>{if(!n){console.error("Actor not initialized. Attempting reconnection...");try{const l=window.ic;if(!l||!l.agent)throw x(!1),new Error("Internet Computer connection not available");return x(!0),null}catch(l){throw x(!1),l}}return x(!0),n},[n]),oe=async l=>{if(!n||!M)throw new Error("System not ready for minting");j(!0),p(null);try{E||await $();const h=await n.initialize_quantum_field();if(!h.Ok)throw new Error("Quantum field initialization failed");const m=await n.generate_neural_patterns();if(!m.Ok)throw new Error("Neural pattern generation failed");const _={resonance:m.Ok.resonance,harmony:h.Ok.harmony,coherence:(m.Ok.resonance+h.Ok.harmony)/2,lastInteraction:new Date,evolutionStage:1,consciousness:{awareness:m.Ok.awareness,understanding:h.Ok.understanding,growth:.1}};if(!o(_))throw new Error("Invalid initial quantum state");const R=await n.create_anima({name:l,quantum_signature:h.Ok.signature,neural_pattern:m.Ok.pattern,initial_state:_});if(!R.Ok)throw new Error(R.Err||"Anima creation failed");return await r(_),G("Genesis quantum crystallization complete",1,["genesis","quantum","initialization"]),{id:R.Ok.id,quantumSignature:R.Ok.quantum_signature,timestamp:R.Ok.timestamp}}catch(h){const m=h instanceof Error?h.message:"Minting failed";throw p(m),new Error(m)}finally{j(!1)}},ce=async l=>{try{c.updateStability(l),await g.processGrowthEvent({strength:l,quantum_state:i,dimensional_state:c}),l>.5&&G(`Significant quantum interaction (${l.toFixed(2)})`,l,["quantum","interaction"]),T(g.getMetrics()),H();const h=K();f(h);const m=B();C(m)}catch(h){console.error("Failed to process interaction:",h)}},le=async()=>{try{const l=c.calculateResonance(),h=c.getStabilityMetrics();if(i){const m={...i,resonanceMetrics:{...i.resonanceMetrics,fieldStrength:l},coherence:h[0],phaseAlignment:h[1]};o(m)&&await r(m)}}catch(l){console.error("Failed to sync quantum state:",l)}},G=(l,h,m=[])=>{const _=d.createMemory(l,h,m,i);return H(),_},H=()=>{q(d.getRecentMemories(5))},K=()=>{const l=Date.now(),h=c.resonance.toFixed(4),m=c.phaseCoherence.toFixed(4);return`QS-${h}-${m}-${l}`},B=()=>{const l=c.resonance,h=c.phaseCoherence,m=c.stability,_=d.calculateResonance(i);return(l+h+m+_)/4},ue={dimensionalState:c,memorySystem:d,growthSystem:g,quantumSignature:u,evolutionFactor:k,recentMemories:v,growthMetrics:I,isInitialized:M,isMinting:Q,mintError:y,isConnected:E,processInteraction:ce,syncQuantumState:le,createMemory:G,mintAnima:oe,createActor:se,reconnect:$};return a.jsx(ie.Provider,{value:ue,children:e})}function Ze(){const e=s.useContext(ie);if(!e)throw new Error("useAnima must be used within an AnimaProvider");return e}const $e=()=>(console.log("ðŸš€ App initializing...",{env:"production",buildTime:new Date().toISOString()}),a.jsx(X,{children:a.jsx(qe,{children:a.jsx(Qe,{children:a.jsx(fe,{router:Oe})})})})),Ke=({error:e})=>a.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:a.jsxs("div",{className:"text-center max-w-lg p-6",children:[a.jsx("h1",{className:"text-xl font-bold mb-4",children:"System Error"}),a.jsx("p",{className:"text-red-400 mb-4",children:e.message}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 rounded hover:bg-blue-700 transition",children:"Reset System"})]})});async function Be(){try{const e=document.querySelector(".quantum-status");e&&(e.textContent="Initializing Internet Computer connection..."),console.log("Initializing Internet Computer connection..."),await S(()=>Promise.resolve().then(()=>_e),void 0),console.log("IC initialization complete");const t=document.getElementById("root");if(!t)throw new Error("Root element not found");U.createRoot(t).render(a.jsx(ee.StrictMode,{children:a.jsx(X,{FallbackComponent:Ke,children:a.jsx(s.Suspense,{fallback:a.jsx(F,{}),children:a.jsx($e,{})})})}))}catch(e){console.error("Failed to initialize app:",e);const t=document.querySelector(".quantum-status");t&&(t.textContent=`Initialization failed: ${e.message}`)}}Be();export{X as E,Xe as a,Ie as b,Ze as c,He as u};
//# sourceMappingURL=main-CeWYrb8A.js.map
