{"version":3,"file":"Wallet-DRS0XiZd.js","sources":["../../src/hooks/usePayment.ts","../../src/components/ui/Wallet.tsx"],"sourcesContent":["import { useState, useCallback } from 'react';\nimport { useAuth } from '@/contexts/auth-context'; // Fixed import path\nimport { Principal } from '@dfinity/principal';\n\nconst PAYMENT_AMOUNTS = {\n  Creation: BigInt(100_000_000), // 1 ICP\n  Evolution: BigInt(50_000_000),  // 0.5 ICP\n  Feature: BigInt(25_000_000),   // 0.25 ICP\n};\n\nexport const usePayment = () => {\n  const { actor, principal } = useAuth();\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const getPaymentAmount = useCallback((type: keyof typeof PAYMENT_AMOUNTS) => {\n    return PAYMENT_AMOUNTS[type];\n  }, []);\n\n  const processPayment = useCallback(async (\n    amount: bigint,\n    paymentType: keyof typeof PAYMENT_AMOUNTS\n  ) => {\n    if (!actor || !principal) {\n      throw new Error('Not authenticated');\n    }\n\n    setIsProcessing(true);\n    setError(null);\n\n    try {\n      const principalId = Principal.fromText(principal);\n      const result = await actor.process_payment({\n        amount,\n        payer: principalId,\n        payment_type: paymentType,\n        timestamp: BigInt(Date.now())\n      });\n\n      return result;\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Payment processing failed');\n      throw err;\n    } finally {\n      setIsProcessing(false);\n    }\n  }, [actor, principal]);\n\n  return {\n    processPayment,\n    getPaymentAmount,\n    isProcessing,\n    error,\n  };\n};\n\nexport type PaymentHook = ReturnType<typeof usePayment>;","import React from 'react';\nimport { motion } from 'framer-motion';\nimport { usePayment } from '@/hooks/usePayment';\n\ninterface WalletProps {\n  className?: string;\n}\n\nexport const Wallet: React.FC<WalletProps> = ({ className = '' }) => {\n  const { balance, ledgerService, refreshBalance } = usePayment();\n\n  return (\n    <div className={`bg-white/5 rounded-xl p-4 ${className}`}>\n      <div className=\"flex justify-between items-center\">\n        <span className=\"text-gray-300\">Wallet Balance:</span>\n        <div className=\"flex items-center gap-2\">\n          {balance !== null ? (\n            <span className=\"text-white font-semibold\">\n              {ledgerService?.formatICP(balance)}\n            </span>\n          ) : (\n            <motion.div\n              animate={{ opacity: [0.5, 1, 0.5] }}\n              transition={{ duration: 1.5, repeat: Infinity }}\n              className=\"h-6 w-24 bg-white/10 rounded\"\n            />\n          )}\n          <button\n            onClick={() => refreshBalance()}\n            className=\"text-blue-400 hover:text-blue-300 transition-colors\"\n          >\n            â†»\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};"],"names":["PAYMENT_AMOUNTS","Creation","BigInt","Evolution","Feature","usePayment","actor","principal","useAuth","isProcessing","setIsProcessing","useState","error","setError","getPaymentAmount","useCallback","type","processPayment","amount","paymentType","Error","principalId","Principal","fromText","result","process_payment","payer","payment_type","timestamp","Date","now","err","message","Wallet","className","balance","ledgerService","refreshBalance","_jsx","children","_jsxs","formatICP","motion","div","animate","opacity","transition","duration","repeat","Infinity","onClick"],"mappings":"uIAIA,MAAMA,EAAkB,CACtBC,SAAUC,OAAO,GAAW,EAC5BC,UAAWD,OAAO,GAAU,EAC5BE,QAASF,OAAO,IAAU,CAC5B,EAEaG,EAAaA,IAAM,CACxB,KAAA,CAAEC,MAAAA,EAAOC,UAAAA,GAAcC,EAAQ,EAC/B,CAACC,EAAcC,CAAe,EAAIC,EAAAA,SAAS,EAAK,EAChD,CAACC,EAAOC,CAAQ,EAAIF,EAAAA,SAAwB,IAAI,EAEhDG,EAAmBC,cAAaC,GAC7BhB,EAAgBgB,CAAI,EAC1B,EAAE,EA+BE,MAAA,CACLC,eA9BqBF,EAAAA,YAAY,MACjCG,EACAC,IACG,CACC,GAAA,CAACb,GAAS,CAACC,EACP,MAAA,IAAIa,MAAM,mBAAmB,EAGrCV,EAAgB,EAAI,EACpBG,EAAS,IAAI,EAET,GAAA,CACIQ,MAAAA,EAAcC,EAAUC,SAAShB,CAAS,EAQzCiB,OAPQ,MAAMlB,EAAMmB,gBAAgB,CACzCP,OAAAA,EACAQ,MAAOL,EACPM,aAAcR,EACdS,UAAW1B,OAAO2B,KAAKC,IAAK,CAAA,CAAA,CAC7B,QAGMC,EAAK,CACZlB,MAAAA,EAASkB,aAAeX,MAAQW,EAAIC,QAAU,2BAA2B,EACnED,CAAAA,QACE,CACRrB,EAAgB,EAAK,CAAA,CACvB,EACC,CAACJ,EAAOC,CAAS,CAAC,EAInBO,iBAAAA,EACAL,aAAAA,EACAG,MAAAA,CACF,CACF,EC9CaqB,EAAgCA,CAAC,CAAEC,UAAAA,EAAY,MAAS,CACnE,KAAM,CAAEC,QAAAA,EAASC,cAAAA,EAAeC,eAAAA,CAAAA,EAAmBhC,EAAW,EAG5DiC,OAAAA,EAAAA,WAAKJ,UAAW,6BAA6BA,CAAS,GAAGK,SACvDC,EAAAA,KAAKN,MAAAA,CAAAA,UAAU,oCAAmCK,SAAA,OAChD,OAAA,CAAML,UAAU,gBAAeK,SAAC,kBAAqB,EACrDC,EAAAA,KAAKN,MAAAA,CAAAA,UAAU,0BAAyBK,SAAA,CACrCJ,IAAY,KACXG,EAAAA,IAAMJ,OAAAA,CAAAA,UAAU,2BAA0BK,SACvCH,GAAeK,UAAUN,CAAO,CAAC,CAAA,EAGpCG,EAAAA,IAACI,EAAOC,IAAG,CACTC,QAAS,CAAEC,QAAS,CAAC,GAAK,EAAG,EAAG,CAAE,EAClCC,WAAY,CAAEC,SAAU,IAAKC,OAAQC,GAAS,EAC9Cf,UAAU,8BAAA,CACX,EAEHI,EAAAA,IAAA,SAAA,CACEY,QAASA,IAAMb,EAAe,EAC9BH,UAAU,sDAAqDK,SAChE,GAAA,CAED,CAAS,CAAA,CAAA,CACL,CAAA,CACF,CAAA,CACH,CAET"}